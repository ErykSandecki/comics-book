(this["webpackJsonpcomics-book"]=this["webpackJsonpcomics-book"]||[]).push([[0],{177:function(e,t,r){},179:function(e,t,r){},180:function(e,t,r){},304:function(e,t,r){},306:function(e,t,r){},307:function(e,t,r){},308:function(e,t,r){},309:function(e,t,r){},310:function(e,t,r){},317:function(e,t,r){},318:function(e,t,r){"use strict";r.r(t);var c,a=r(0),n=r.n(a),i=r(17),o=r.n(i),s=r(23),l=r(162),u=r(354),f=r.p+"static/media/error.aee84ee0.svg",d=(r(177),r(5)),b=function(){return Object(d.jsx)("section",{className:"ErrorPage",children:Object(d.jsx)("img",{alt:"background-error",className:"ErrorPage__background",src:f})})},j=r(44),p=r.p+"static/media/close.91205169.svg",m=(r(179),function(e){var t=e.visible,r=e.setVisible,c=function(){return r(!1)};return Object(d.jsxs)("div",{className:"NavMenu ".concat(t&&"NavMenu--visible"),onClick:c,children:[Object(d.jsx)("div",{className:"NavMenu__background ".concat(t&&"NavMenu__background--visible")}),Object(d.jsx)("div",{className:"NavMenu__container ".concat(t&&"NavMenu__container--visible"),onClick:function(e){return e.stopPropagation()},children:Object(d.jsxs)("div",{className:"NavMenu__header",children:[Object(d.jsx)("input",{placeholder:"Search for a channel:",className:"NavMenu__input-filter"}),Object(d.jsx)("div",{className:"NavMenu__button-close",children:Object(d.jsx)("img",{alt:"close-icon",onClick:c,src:p})})]})})]})}),O=r.p+"static/media/hamburger-menu.4f615ee5.svg",v=(r(180),function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),r=t[0],c=t[1];return Object(d.jsxs)("header",{className:"PageHeader",children:[Object(d.jsxs)("div",{className:"PageHeader__content",children:[Object(d.jsx)("div",{className:"PageHeader__channel-picker",children:"ME"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{className:"PageHeader__title",children:"Gentleman App - Meetings"}),Object(d.jsx)("p",{className:"PageHeader__users",children:"2 Brothers-in-law online"})]})]}),Object(d.jsx)("img",{alt:"hamburger-menu",className:"PageHeader__hamburger-menu",onClick:function(){return c(!0)},src:O}),Object(d.jsx)(m,{visible:r,setVisible:c})]})}),P=r(22),g=r(355),h=r(356),x=r(353),_=r.p+"static/media/back.3f83d067.svg",k=r.p+"static/media/button-picture.7e1048a6.svg",N=r.p+"static/media/empty-image.c3e5e19d.svg",y=function(e,t){var r=new FileReader,c=e.target.files;r.onload=function(e){t({file:c[0],src:e.target.result})},r.readAsDataURL(c[0])},w=r(35),S=r.n(w),I=r(157),E=r.n(I),F=r(158),L=r.n(F),M=r(31),C="profiles";!function(e){e[e.createProfile="".concat(C,"/createProfile")]="createProfile",e[e.createProfileSuccess="".concat(C,"/createProfileSuccess")]="createProfileSuccess",e[e.createProfileError="".concat(C,"/createProfileError")]="createProfileError",e[e.fetchProfilesSuccess="".concat(C,"/fetchProfilesSuccess")]="fetchProfilesSuccess",e[e.fetchProfilesError="".concat(C,"/fetchProfilesError")]="fetchProfilesError",e[e.uploadImageFinished="".concat(C,"/uploadImageFinished")]="uploadImageFinished",e[e.setProfileId="".concat(C,"/setProfileId")]="setProfileId"}(c||(c={}));var H,D=S()(C),A=Object(M.a)(D,S()("isPending")),R=Object(M.a)(D,L()(E.a,S()("data"))),T=function(e){return Object(M.a)(D,S()(e))},B=(r(304),function(e){var t=e.clickHandler,r=e.name,c=void 0===r?"":r,n=e.imageData,i=void 0===n?null:n,o=e.submitHandler,l=e.title,u=Object(s.c)(A),f=Object(a.useRef)(null),b=Object(a.useState)(i),p=Object(j.a)(b,2),m=p[0],O=p[1],v=Object(a.useState)(c),P=Object(j.a)(v,2),w=P[0],S=P[1];return Object(d.jsxs)("div",{className:"ProfileForm__form-wrapper",children:[Object(d.jsxs)("h2",{className:"ProfileForm__title",children:[Object(d.jsx)("img",{alt:"back-icon",className:"ProfileForm__icon",onClick:t,src:_}),l]}),Object(d.jsxs)("form",{className:"ProfileForm",onSubmit:function(e){e.preventDefault(),m&&w&&o({backToProfileList:t,imageData:m,name:w})},children:[Object(d.jsxs)("div",{className:"ProfileForm__avatar ".concat(m?"ProfileForm__avatar--selected":""),children:[m?Object(d.jsx)("img",{alt:"avatar",className:"ProfileForm__image",src:m.src}):Object(d.jsx)("img",{alt:"empty",className:"ProfileForm__empty-picture",src:N}),Object(d.jsx)("img",{alt:"button-icon",className:"ProfileForm__button-picture",onClick:function(){return f.current.click()},src:k}),Object(d.jsx)("input",{className:"ProfileForm__input-file",onChange:function(e){return y(e,O)},ref:f,type:"file"})]}),Object(d.jsx)(g.a,{className:"ProfileForm__input-name",onChange:function(e){return S(e.target.value)},label:"Profile name:",value:w}),Object(d.jsxs)(h.a,{className:"ProfileForm__submit-button",color:"primary",disabled:u,size:"large",type:"submit",variant:"contained",children:["Create Profile",u&&Object(d.jsx)(x.a,{className:"ProfileForm__spinner",color:"primary",size:20})]})]})]})}),z=function(e){return{type:c.createProfileError,payload:e}},W=function(e){return{type:c.uploadImageFinished,payload:e}},V=function(e){var t=Object.assign({},e),r=Object(s.b)();return Object(d.jsx)(B,Object(P.a)({submitHandler:function(e){return r((t=e,{type:c.createProfile,payload:t}));var t},title:"Create Profile:"},t))},G=r.p+"static/media/plus.553def23.svg",J=(r(306),function(e){var t=e.clickHandler,r=e.mode,c=void 0===r?"add":r,a=e.name,n=e.src;return Object(d.jsxs)("section",{className:"ProfilePicker ProfilePicker--".concat(c),children:[Object(d.jsx)("p",{className:"ProfilePicker__title ProfilePicker--".concat(c,"__title"),children:a||"Create:"}),Object(d.jsx)("div",{className:"ProfilePicker__button",onClick:t,children:Object(d.jsx)("img",{alt:a?"".concat(a,"-avatar"):"icon",className:"ProfilePicker__image ProfilePicker--".concat(c,"__image"),src:n||G})})]})});!function(e){e.createProfile="createProfile",e.listProfiles="listProfiles"}(H||(H={}));r(307);var U,Y=function(e){var t=e.clickHandler,r=Object(s.b)(),a=Object(s.c)(T("data"));return Object(d.jsxs)("section",{className:"ProfilePickerList",children:[Object(d.jsx)("h1",{className:"ProfilePickerList__title",children:"Choose a brother-in-law:"}),Object(d.jsx)("p",{className:"ProfilePickerList__description",children:"Select a profile to start a conversation with your brother-in-law."}),Object(d.jsxs)("div",{className:"ProfilePickerList__pickers",children:[Object(d.jsx)(J,{clickHandler:function(){return t(H.createProfile)}}),a.map((function(e){var t=e.name,a=e.profileId,n=e.src;return Object(d.jsx)(J,{clickHandler:function(){return r((e=a,{type:c.setProfileId,payload:e}));var e},mode:"select",name:t,src:n},a)}))]})]})},K=(r(308),function(){var e=Object(a.useState)(H.listProfiles),t=Object(j.a)(e,2),r=t[0],c=t[1];return Object(d.jsx)("section",{className:"ProfilePickerSection",children:r===H.listProfiles?Object(d.jsx)(Y,{clickHandler:function(e){return c(e)}}):Object(d.jsx)(V,{clickHandler:function(){return c(H.listProfiles)}})})}),Q=r.p+"static/media/gentleman.154e51ca.svg",X=(r(309),function(e){e.appDataLoaded;return Object(d.jsxs)("div",{className:"PageLoader",children:[Object(d.jsx)("h2",{className:"PageLoader__title",children:"WELCOME GENTLEMAN"}),Object(d.jsx)("img",{alt:"gentleman-logo",src:Q}),Object(d.jsx)("div",{className:"PageLoader__spinner",children:Array.from(Array(12)).map((function(e,t){return Object(d.jsx)("div",{className:"PageLoader__circle PageLoader__circle--".concat(t+1)},t)}))})]})}),q="auth";!function(e){e[e.login="".concat(q,"/login")]="login",e[e.loginSuccess="".concat(q,"/loginSuccess")]="loginSuccess",e[e.loginError="".concat(q,"/loginError")]="loginError"}(U||(U={}));var Z,$=S()(q),ee=Object(M.a)($,S()("error")),te=Object(M.a)($,S()("isPending")),re=Object(M.a)(te,ee,(function(e,t){return!e&&!t})),ce=Object(M.a)(R,(function(e){return e})),ae=(r(310),function(){var e=Object(s.c)(T("seletedProfileId")),t=Object(s.c)(ce);return t?e?Object(d.jsx)("div",{className:"Page",children:Object(d.jsx)(v,{})}):Object(d.jsx)(K,{}):Object(d.jsx)(X,{appDataLoaded:t})}),ne=function(e){return{type:U.loginError,payload:e}},ie=function(){var e=Object(s.c)(te),t=Object(s.b)(),r=Object(s.c)(ee),c=Object(a.useMemo)((function(){return Object(l.a)({palette:{type:"dark"}})}),[]);return Object(a.useEffect)((function(){var e,r=prompt("Please enter a password:");indexedDB.deleteDatabase("firebaseLocalStorageDb"),t((e=r,{type:U.login,payload:e}))}),[]),e?null:r?Object(d.jsx)(b,{}):Object(d.jsxs)(u.a,{theme:c,children:[Object(d.jsx)(ae,{}),";"]})},oe=r(34),se={apiKey:"AIzaSyBYQ05TbRrP2wVEX7NDn5CWodoAnnkpcOY",authDomain:"comics-book.firebaseapp.com",projectId:"comics-book",storageBucket:"comics-book.appspot.com",messagingSenderId:"426496482303",appId:"1:426496482303:web:ebf257ff0a64a90f6ae5ca"};!function(e){e.profiles="profiles"}(Z||(Z={}));var le,ue,fe=function(e){console.error(e)},de=function(e){for(var t=Object.keys(e),r=[],c=0;c<t.length;c++)r.push(e[t[c]]);return r},be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.val();t(de(r||{}))},je=function(e,t,r){e.database().ref(r).on("value",(function(e){return be(e,t)}),fe)},pe=function(){var e=Object(s.c)(re),t=Object(s.b)();return Object(a.useEffect)((function(){oe.a.initializeApp(se)}),[]),Object(a.useEffect)((function(){var r=function(e){t(function(e){return{type:c.fetchProfilesSuccess,payload:e}}(e))};e&&setTimeout((function(){je(oe.a,r,Z.profiles)}),5e3)}),[e]),null},me=r(38),Oe=r(159),ve=r(75),Pe=r(160),ge={error:"",isPending:!0,profileId:""},he=function(e,t){var r=t.payload;return Object(P.a)(Object(P.a)({},e),{},{isPending:!1,profileId:r})},xe=function(e,t){var r=t.payload;return Object(P.a)(Object(P.a)({},e),{},{error:r,isPending:!1})},_e={data:null,error:"",isPending:!0,seletedProfileId:""},ke=function(e){return Object(P.a)(Object(P.a)({},e),{},{isPending:!0})},Ne=function(e){return Object(P.a)(Object(P.a)({},e),{},{isPending:!1})},ye=function(e,t){var r=t.payload;return Object(P.a)(Object(P.a)({},e),{},{error:r,isPending:!1})},we=function(e,t){var r=t.payload;return Object(P.a)(Object(P.a)({},e),{},{isPending:!1,data:r})},Se=function(e){return Object(P.a)(Object(P.a)({},e),{},{isPending:!1})},Ie=function(e,t){var r=t.payload;return Object(P.a)(Object(P.a)({},e),{},{seletedProfileId:r})},Ee={auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U.loginSuccess:return he(e,t);case U.loginError:return xe(e,t);default:return e}},profiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.createProfile:return ke(e);case c.createProfileSuccess:return Ne(e);case c.createProfileError:return ye(e,t);case c.fetchProfilesSuccess:return we(e,t);case c.fetchProfilesError:return Se(e);case c.setProfileId:return Ie(e,t);default:return e}}},Fe=function(){return Object(me.combineReducers)(Object(P.a)({},Ee))},Le=r(161),Me=r(24),Ce=r.n(Me),He=r(21);!function(e){e.profileId="profileId"}(le||(le={})),function(e){e.profiles="PROFILES"}(ue||(ue={}));var De=Ce.a.mark(Ae);function Ae(e){var t,r,c;return Ce.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=localStorage.getItem(le.profileId)||"",a.prev=2,a.next=5,oe.a.auth().signInWithEmailAndPassword("eryk.sandecki@gmail.com",t);case 5:return a.next=7,Object(He.b)((n=r,{type:U.loginSuccess,payload:n}));case 7:a.next=14;break;case 9:return a.prev=9,a.t0=a.catch(2),c=a.t0.code,a.next=14,Object(He.b)(ne(c));case 14:case"end":return a.stop()}var n}),De,null,[[2,9]])}var Re=Ce.a.mark(Te);function Te(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(He.a)([Object(He.e)(U.login,Ae)]);case 2:case"end":return e.stop()}}),Re)}var Be=Ce.a.mark(ze);function ze(e){var t,r,c,a,n,i,o;return Ce.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.action,c=t.file,a=t.path,s.prev=2,n=oe.a.storage().ref(a).put(c),i=Object(ve.b)((function(e){return n.on("state_changed",e)})),o="",s.next=8,Object(He.e)(i,(function(){}));case 8:return s.next=10,n;case 10:return s.next=12,n.snapshot.ref.getDownloadURL().then((function(e){return o=e}));case 12:return s.next=14,Object(He.b)(r({result:"success",src:o}));case 14:s.next=20;break;case 16:return s.prev=16,s.t0=s.catch(2),s.next=20,Object(He.b)(r({error:s.t0,result:"error"}));case 20:case"end":return s.stop()}}),Be,null,[[2,16]])}var We;!function(e){e[e.uploadFile="".concat("common","/uploadFile")]="uploadFile"}(We||(We={}));var Ve=Ce.a.mark(Ge);function Ge(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(He.a)([Object(He.e)(We.uploadFile,ze)]);case 2:case"end":return e.stop()}}),Ve)}var Je=r(163),Ue=function(e){var t=e.error,r=e.result,c=e.src;if("error"===r)throw t;return c},Ye=function(e){var t=[],r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";do{t.splice(0,t.length);for(var c=0;c<9;c++)t.push(r.charAt(Math.floor(Math.random()*r.length)))}while(e.find((function(e){return e.profileId===t.join("")})));return t.join("")},Ke=function(e){for(var t=oe.a.database().ref(e[0]),r=1;r<e.length;r++)t=t.child(e[r]);return t},Qe=function(e){return{type:We.uploadFile,payload:e}},Xe=Ce.a.mark(qe);function qe(e){var t,r,a,n,i,o,s,l,u,f;return Ce.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,r=t.backToProfileList,a=t.name,n=t.imageData.file,i="".concat(ue.profiles,"/").concat(a),d.next=5,Object(He.c)(T("data"));case 5:return o=d.sent,s=Ye(o),d.prev=7,d.next=10,Object(He.b)(Qe({action:W,path:i,file:n}));case 10:return d.next=12,Object(He.d)(c.uploadImageFinished);case 12:return l=d.sent,u=l.payload,f=Ue(u),d.next=17,Ke([Z.profiles]).set([].concat(Object(Je.a)(o),[{name:a,online:!1,profileId:s,src:f}]));case 17:return d.next=19,Object(He.b)({type:c.createProfileSuccess});case 19:return d.next=21,r();case 21:d.next=27;break;case 23:return d.prev=23,d.t0=d.catch(7),d.next=27,Object(He.b)(z(d.t0));case 27:case"end":return d.stop()}}),Xe,null,[[7,23]])}var Ze=Ce.a.mark($e);function $e(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(He.a)([Object(He.e)(c.createProfile,qe)]);case 2:case"end":return e.stop()}}),Ze)}var et=[Te,Ge,$e],tt=function(e){var t,r=Object(Le.a)(et);try{for(r.s();!(t=r.n()).done;){var c=t.value;e.run(c)}}catch(a){r.e(a)}finally{r.f()}},rt=Object(ve.a)(),ct=function(){var e=Object(me.createStore)(Fe(),{},Object(Oe.composeWithDevTools)(me.applyMiddleware.apply(void 0,[Pe.a].concat([rt]))));return tt(rt),e};r(317);o.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsxs)(s.a,{store:ct(),children:[Object(d.jsx)(pe,{}),Object(d.jsx)(ie,{})]})}),document.getElementById("root"))}},[[318,1,2]]]);
//# sourceMappingURL=main.c4d903ff.chunk.js.map