(this["webpackJsonpcomics-book"]=this["webpackJsonpcomics-book"]||[]).push([[0],{208:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},343:function(e,t,n){},345:function(e,t,n){},346:function(e,t,n){},347:function(e,t,n){},348:function(e,t,n){},349:function(e,t,n){},350:function(e,t,n){},352:function(e,t,n){},353:function(e,t,n){},354:function(e,t,n){},355:function(e,t,n){},356:function(e,t,n){},358:function(e,t,n){},359:function(e,t,n){"use strict";n.r(t);var c,a,r=n(0),s=n.n(r),i=n(19),o=n.n(i),l=n(13),u=n(185),d=n(400),f=n.p+"static/media/error.6a233495.svg",j=(n(208),n(4)),b=function(){return Object(j.jsx)("section",{className:"ErrorPage",children:Object(j.jsx)("img",{alt:"background-error",className:"ErrorPage__background",src:f})})},p=n(22),O=n.p+"static/media/send-icon.d7969ca4.svg",m=(n(210),Object(r.forwardRef)((function(e,t){var n=e.inputHandler,c=Object(r.useState)(!0),a=Object(p.a)(c,2),s=a[0],i=a[1];return Object(j.jsxs)("div",{className:"ChatInput",ref:t,children:[Object(j.jsx)("p",{className:"ChatInput__text-field",contentEditable:!0,onBlur:function(e){0===e.target.innerText.trim().length&&i(!0)},onFocus:function(){return i(!1)},onInput:n,suppressContentEditableWarning:!0}),s&&Object(j.jsx)("span",{className:"ChatInput__placeholder",children:"Message #Meetings:"}),Object(j.jsx)("img",{alt:"send-icon",className:"ChatInput__send-icon",src:O})]})}))),h=(n(211),Object(r.forwardRef)((function(e,t){return Object(j.jsx)("div",{className:"ChatMessages",ref:t})})));!function(e){e.marginOffset="MARGIN_OFFSET",e.version="VERSION"}(c||(c={})),function(e){e.profiles="PROFILES"}(a||(a={}));var v,g=Object(r.createContext)({margin:0,setMargin:function(){}}),x=function(e){var t=e.children,n=Object(r.useState)(parseInt(localStorage.getItem(c.marginOffset)||0)),a=Object(p.a)(n,2),s=a[0],i=a[1];return Object(j.jsx)(g.Provider,{value:{margin:s,setMargin:function(e){var t=s+e;(s>0||-1!==e)&&(i(t),localStorage.setItem(c.marginOffset,t))}},children:t})},P=(n(212),function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),n=Object(r.useContext)(g).margin;return Object(j.jsxs)("section",{className:"Chat",style:{height:"calc(100vh - ".concat(80+n,"px)")},children:[Object(j.jsx)(h,{ref:e}),Object(j.jsx)(m,{inputHandler:function(){var n=t.current.clientHeight;e.current.style.height="calc(100% - ".concat(n,"px)")},ref:t})]})}),_=n(393),N=n(396),C=n(360),k=n(403),y=n.p+"static/media/update-icon.82e7731f.svg",M=["Application access by password","Ability to create profiles","Ability to create channels","Status of active brothers-in-law","Application adapted to all devices","Ability to write on the channel","Status on the number of active brothers-in-law"],S="1.0.0",w=(n(213),function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),n=t[0],a=t[1],s=localStorage.getItem(c.version)||"",i=function(){localStorage.setItem(c.version,S),a(!1)};return Object(r.useEffect)((function(){s!==S&&setTimeout((function(){a(!0)}),1e3)}),[]),Object(j.jsx)(k.a,{className:"ModalNewUpdates",closeAfterTransition:!0,open:n,onClose:i,BackdropComponent:_.a,BackdropProps:{timeout:500},children:Object(j.jsx)(C.a,{in:n,children:Object(j.jsxs)("div",{className:"ModalNewUpdates__container",children:[Object(j.jsx)("div",{className:"ModalNewUpdates__icon",children:Object(j.jsx)("img",{alt:"update-icon",src:y})}),Object(j.jsxs)("div",{className:"ModalNewUpdates__content",children:[Object(j.jsxs)("h4",{className:"ModalNewUpdates__title",children:["New Update: ",S,":"]}),Object(j.jsx)("ul",{className:"ModalNewUpdates__details",children:M.map((function(e){return Object(j.jsx)("li",{className:"ModalNewUpdates__item",children:Object(j.jsxs)("p",{className:"ModalNewUpdates__description",children:[e,"."]})},e)}))}),Object(j.jsx)(N.a,{className:"ModalNewUpdates__submit",onClick:i,variant:"outlined",children:"Understand"})]})]})})})});!function(e){e.profiles="profiles",e.channels="channels"}(v||(v={}));var E,I=n(37),F=function(e){for(var t=I.a.database().ref(e[0]),n=1;n<e.length;n++)t=t.child(e[n]);return t},T=function(e){return{disconnectProfile:function(){return F([v.profiles,e,"online"]).onDisconnect().set(!1)}}},H=n(52),L=n.n(H),D=n(87),U=n.n(D),A=n(28),R=n.n(A),B=n(88),z=n.n(B),W=n(30),V="profiles";!function(e){e[e.createProfile="".concat(V,"/createProfile")]="createProfile",e[e.createProfileSuccess="".concat(V,"/createProfileSuccess")]="createProfileSuccess",e[e.createProfileError="".concat(V,"/createProfileError")]="createProfileError",e[e.fetchProfilesSuccess="".concat(V,"/fetchProfilesSuccess")]="fetchProfilesSuccess",e[e.fetchProfilesError="".concat(V,"/fetchProfilesError")]="fetchProfilesError",e[e.uploadImageFinished="".concat(V,"/uploadImageFinished")]="uploadImageFinished",e[e.selectProfile="".concat(V,"/selectProfile")]="selectProfile",e[e.selectProfileError="".concat(V,"/selectProfileError")]="selectProfileError",e[e.updateTimeProfile="".concat(V,"/updateTimeProfile")]="updateTimeProfile",e[e.updateTimeProfileError="".concat(V,"/updateTimeProfileError")]="updateTimeProfileError"}(E||(E={}));var G,J=R()(V),Y=Object(W.a)(J,R()("isPending")),K=Object(W.a)(J,L()(z.a,R()("data"))),Q=function(e){return Object(W.a)(J,R()(e))},X=function(e){return Object(W.a)(J,L()(U()((function(t){return t.profileId===e})),R()("data")))},q=function(e,t){return Object(W.a)(X(t),R()(e))},Z=function(e){return{type:E.createProfileError,payload:e}},$=function(e){return{type:E.uploadImageFinished,payload:e}},ee=function(){var e=Object(l.b)(),t=Object(l.c)(Q("selectedProfileId")),n=Object(l.c)(Q("data")).findIndex((function(e){return e.profileId===t})),c=T(n).disconnectProfile;return Object(r.useEffect)((function(){var n;c(),e((n=t,{type:E.updateTimeProfile,payload:n}))}),[]),null},te=n(14),ne=n(402),ce=n(404),ae=n(401),re=n(399),se="channels";!function(e){e[e.createChannel="".concat(se,"/createChannel")]="createChannel",e[e.createChannelSuccess="".concat(se,"/createChannelSuccess")]="createChannelSuccess",e[e.createChannelsError="".concat(se,"/createChannelsError")]="createChannelsError",e[e.fetchChannelsSuccess="".concat(se,"/fetchChannelsSuccess")]="fetchChannelsSuccess",e[e.fetchChannelsError="".concat(se,"/fetchChannelsError")]="fetchChannelsError",e[e.uploadImageFinished="".concat(se,"/uploadImageFinished")]="uploadImageFinished",e[e.setChannelId="".concat(se,"/setChannelId")]="setChannelId"}(G||(G={}));var ie,oe=function(e){return{type:G.createChannelsError,payload:e}},le=n(180),ue=n.n(le),de=R()(se),fe=Object(W.a)(de,R()("isPending")),je=Object(W.a)(de,L()(z.a,R()("channels"))),be=Object(W.a)(de,L()(R()("channelId"),ue.a,R()("channels"))),pe=function(e){return Object(W.a)(de,R()(e))},Oe=(n(343),function(e){var t=e.closeModal,n=e.openNotifiaction,c=Object(r.useState)(""),a=Object(p.a)(c,2),s=a[0],i=a[1],o=Object(r.useState)(""),u=Object(p.a)(o,2),d=u[0],f=u[1],b=Object(r.useState)(!1),O=Object(p.a)(b,2),m=O[0],h=O[1],v=Object(l.c)(fe),g=Object(l.b)();return Object(r.useEffect)((function(){!v&&m&&(t(),n())}),[v,m]),Object(j.jsxs)("form",{className:"NavMenuCreateChannelForm",onSubmit:function(e){var t;e.preventDefault(),s&&d&&(g((t={name:s,shortcut:d.toUpperCase()},{type:G.createChannel,payload:t})),h(!0))},children:[Object(j.jsx)("h2",{children:"Create channel:"}),Object(j.jsx)(ae.a,{className:"NavMenuCreateChannelForm__input",onChange:function(e){return i(e.target.value)},label:"Channel name:",value:s}),Object(j.jsx)(ae.a,{className:"NavMenuCreateChannelForm__input",onChange:function(e){return f(e.target.value)},label:"Shortcut channel name eg. (ME):",inputProps:{maxLength:2},value:d}),Object(j.jsxs)(N.a,{className:"ProfileForm__submit-button",color:"primary",disabled:v,size:"large",type:"submit",variant:"contained",children:["Create Channel",v&&Object(j.jsx)(re.a,{className:"ProfileForm__spinner",color:"primary",size:20})]})]})}),me=n.p+"static/media/plus-white-icon.abb60e4a.svg",he=(n(345),function(e){var t=e.closeNavMenu,n=Object(r.useState)(!1),c=Object(p.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(!1),o=Object(p.a)(i,2),u=o[0],d=o[1],f=Object(l.b)(),b=Object(l.c)(pe("channels")),O=function(e){return Object(j.jsx)(ne.a,Object(te.a)({elevation:6,variant:"filled"},e))},m=function(e){var n;t(),f((n=e,{type:G.setChannelId,payload:n}))};return Object(j.jsxs)("div",{className:"NavMenuChannels",children:[Object(j.jsxs)("div",{className:"NavMenuChannels__nav",children:[Object(j.jsx)("p",{className:"NavMenuChannels__title",children:"Channels"}),Object(j.jsx)("img",{alt:"plus-white-icon",className:"NavMenuChannels__button",onClick:function(){return d(!0)},src:me})]}),Object(j.jsx)("div",{className:"NavMenuChannels__channels",children:b.map((function(e){var t=e.channelId,n=e.name;return Object(j.jsxs)("p",{className:"NavMenuChannels__channel-name",onClick:function(){return m(t)},children:["#",n]},t)}))}),Object(j.jsx)(k.a,{className:"NavMenuChannels__modal",closeAfterTransition:!0,open:u,onClose:function(){return d(!1)},BackdropComponent:_.a,BackdropProps:{timeout:500},children:Object(j.jsx)(C.a,{in:u,children:Object(j.jsx)("div",{className:"NavMenuChannels__card",children:Object(j.jsx)(Oe,{closeModal:function(){return d(!1)},openNotifiaction:function(){return s(!0)}})})})}),Object(j.jsx)(ce.a,{open:a,className:"NavMenuChannels__snackbar",autoHideDuration:5e3,onClose:function(){return s(!1)},children:Object(j.jsx)(O,{onClose:function(){return s(!1)},severity:"success",children:"Channel has been added!"})})]})}),ve=n.p+"static/media/offline-icon.e258b94e.svg",ge=n.p+"static/media/online-icon.f3194dda.svg",xe=function(e,t,n){return n&&e-t<9e4},Pe=(n(346),function(){var e=Object(l.c)(Q("data")),t=Object(l.c)(Q("selectedProfileId")),n=Object(l.c)(q("lastUpdateTime",t)),c=function(e,t){return xe(n,e,t)?ge:ve};return Object(j.jsxs)("div",{className:"NavMenuProfiles",children:[Object(j.jsx)("div",{className:"NavMenuProfiles__header",children:Object(j.jsx)("p",{className:"NavMenuProfiles__title",children:"Brothers-in-law"})}),Object(j.jsx)("div",{className:"NavMenuProfiles__profiles",children:e.filter((function(e){return e.profileId!==t})).map((function(e){var t=e.lastUpdateTime,n=e.name,a=e.online,r=e.profileId,s=e.src;return Object(j.jsxs)("div",{className:"NavMenuProfiles__profile",children:[Object(j.jsx)("img",{alt:r,className:"NavMenuProfiles__avatar",src:s}),Object(j.jsx)("img",{alt:"status-icon",className:"NavMenuProfiles__status",src:c(t,a)}),Object(j.jsx)("p",{className:"NavMenuProfiles__name",children:n},r)]},r)}))})]})}),_e=n.p+"static/media/close-white-icon.46536c1e.svg",Ne=(n(347),function(e){var t=e.visible,n=e.setVisible,c=function(){return n(!1)},a=Object(l.c)(Q("selectedProfileId")),r=Object(l.c)(X(a)),s=r.name,i=r.src;return Object(j.jsxs)("div",{className:"NavMenu ".concat(t&&"NavMenu--visible"),onClick:c,children:[Object(j.jsx)("div",{className:"NavMenu__background ".concat(t&&"NavMenu__background--visible")}),Object(j.jsxs)("div",{className:"NavMenu__container ".concat(t&&"NavMenu__container--visible"),onClick:function(e){return e.stopPropagation()},children:[Object(j.jsxs)("div",{className:"NavMenu__header",children:[Object(j.jsxs)("div",{className:"NavMenu__profile-data",children:[Object(j.jsx)("img",{alt:"profile-avatar",className:"NavMenu__profile-avatar",src:i}),Object(j.jsx)("p",{className:"NavMenu__profile-name",children:s})]}),Object(j.jsx)("img",{alt:"close-white-icon",className:"NavMenu__button-close",onClick:c,src:_e})]}),Object(j.jsxs)("div",{className:"NavMenu__content",children:[Object(j.jsx)(he,{closeNavMenu:c}),Object(j.jsx)(Pe,{})]})]})]})}),Ce=n(186),ke=n(405),ye=n.p+"static/media/close-icon.092c61d5.svg",Me=n.p+"static/media/gear-icon.e5deb93c.svg",Se=n.p+"static/media/modify-size-icon.7b8f31f6.svg",we=(n(348),function(){var e=Object(r.useState)(null),t=Object(p.a)(e,2),n=t[0],c=t[1],a=Object(r.useContext)(g).setMargin,s=function(){c(null)};return Object(j.jsxs)("div",{className:"PageHeaderSettingsMenu",children:[Object(j.jsx)("img",{alt:"gear-icon",onClick:function(e){c(e.currentTarget)},src:Me}),Object(j.jsxs)(Ce.a,{id:"simple-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:s,children:[Object(j.jsxs)(ke.a,{className:"PageHeaderSettingsMenu__item",onClick:function(){return a(1)},children:["Up",Object(j.jsx)("img",{alt:"gear-icon",src:Se})]}),Object(j.jsxs)(ke.a,{className:"PageHeaderSettingsMenu__item",onClick:function(){return a(-1)},children:["Down",Object(j.jsx)("img",{alt:"reverted-gear-icon",className:"PageHeaderSettingsMenu__icon-rotate",src:Se})]}),Object(j.jsxs)(ke.a,{className:"PageHeaderSettingsMenu__item",onClick:s,children:["Close",Object(j.jsx)("img",{alt:"close-icon",src:ye})]})]})]})}),Ee=n.p+"static/media/hamburger-menu.85ddbb0d.svg",Ie=(n(349),function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),n=t[0],c=t[1],a=Object(l.c)(be),s=Object(l.c)(pe("selectedChannelId"))||a,i=Object(l.c)(function(e){return Object(W.a)(de,L()(U()((function(t){return t.channelId===e})),R()("channels")))}(s)),o=i.name,u=i.shortcut,d=Object(l.c)(Q("data")),f=Object(l.c)(Q("selectedProfileId")),b=Object(l.c)(q("lastUpdateTime",f));return Object(j.jsxs)("header",{className:"PageHeader",children:[Object(j.jsxs)("div",{className:"PageHeader__left-column",children:[Object(j.jsx)("div",{className:"PageHeader__channel-picker",children:u}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{className:"PageHeader__title",children:["#",o]}),Object(j.jsxs)("p",{className:"PageHeader__users",children:[d.filter((function(e){return e.profileId!==f})).reduce((function(e,t){var n=t.lastUpdateTime,c=t.online;return xe(b,n,c)?++e:e}),0)," Brothers online"]})]})]}),Object(j.jsxs)("div",{className:"PageHeader__right-column",children:[Object(j.jsx)(we,{}),Object(j.jsx)("img",{alt:"hamburger-menu",className:"PageHeader__hamburger-menu",onClick:function(){return c(!0)},src:Ee})]}),Object(j.jsx)(Ne,{visible:n,setVisible:c})]})}),Fe=n.p+"static/media/back.d5208217.svg",Te=n.p+"static/media/button-picture.9659aaae.svg",He=n.p+"static/media/empty-image.acb60281.svg",Le=function(e,t){var n=new FileReader,c=e.target.files;n.onload=function(e){t({file:c[0],src:e.target.result})},n.readAsDataURL(c[0])},De=(n(350),function(e){var t=e.clickHandler,n=e.name,c=void 0===n?"":n,a=e.imageData,s=void 0===a?null:a,i=e.submitHandler,o=e.title,u=Object(l.c)(Y),d=Object(r.useRef)(null),f=Object(r.useState)(s),b=Object(p.a)(f,2),O=b[0],m=b[1],h=Object(r.useState)(c),v=Object(p.a)(h,2),g=v[0],x=v[1];return Object(j.jsxs)("div",{className:"ProfileForm__form-wrapper",children:[Object(j.jsxs)("h2",{className:"ProfileForm__title",children:[Object(j.jsx)("img",{alt:"back-icon",className:"ProfileForm__icon",onClick:t,src:Fe}),o]}),Object(j.jsxs)("form",{className:"ProfileForm",onSubmit:function(e){e.preventDefault(),O&&g&&i({backToProfileList:t,imageData:O,name:g})},children:[Object(j.jsxs)("div",{className:"ProfileForm__avatar ".concat(O?"ProfileForm__avatar--selected":""),children:[O?Object(j.jsx)("img",{alt:"avatar",className:"ProfileForm__image",src:O.src}):Object(j.jsx)("img",{alt:"empty",className:"ProfileForm__empty-picture",src:He}),Object(j.jsx)("img",{alt:"button-icon",className:"ProfileForm__button-picture",onClick:function(){return d.current.click()},src:Te}),Object(j.jsx)("input",{className:"ProfileForm__input-file",onChange:function(e){return Le(e,m)},ref:d,type:"file"})]}),Object(j.jsx)(ae.a,{className:"ProfileForm__input-name",onChange:function(e){return x(e.target.value)},label:"Profile name:",value:g}),Object(j.jsxs)(N.a,{className:"ProfileForm__submit-button",color:"primary",disabled:u,size:"large",type:"submit",variant:"contained",children:["Create Profile",u&&Object(j.jsx)(re.a,{className:"ProfileForm__spinner",color:"primary",size:20})]})]})]})}),Ue=function(e){var t=Object.assign({},e),n=Object(l.b)();return Object(j.jsx)(De,Object(te.a)({submitHandler:function(e){return n((t=e,{type:E.createProfile,payload:t}));var t},title:"Create Profile:"},t))},Ae=n(187),Re=n(181),Be=function(e){var t=Object(r.useState)(!1),n=Object(p.a)(t,2),c=n[0],a=n[1],s=Re.isMobile?"touchstart":"mousedown",i=function(t){var n=t.target;e.current&&(!c&&e.current.contains(n)?a(!0):c&&!e.current.contains(n)&&a(!1))};return Object(r.useEffect)((function(){return document.addEventListener(s,i),function(){document.removeEventListener(s,i)}}),[e,c]),c},ze=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()},We=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=n.shouldPreventDefault,a=void 0===c||c,s=n.delay,i=void 0===s?1e3:s,o=Object(r.useState)(!1),l=Object(p.a)(o,2),u=l[0],d=l[1],f=Object(r.useRef)(),j=Object(r.useRef)(),b=Object(r.useCallback)((function(t){a&&t.target&&(t.target.addEventListener("touchend",ze,{passive:!1}),j.current=t.target),f.current=setTimeout((function(){e(t),d(!0)}),i)}),[e,i,a]),O=Object(r.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];f.current&&clearTimeout(f.current),n&&!u&&t(),a&&j.current&&j.current.removeEventListener("touchend",ze),d(!1)}),[a,t,u]);return{onMouseDown:function(e){return b(e)},onTouchStart:function(e){return b(e)},onMouseUp:function(e){return O(e)},onMouseLeave:function(e){return O(e,!1)},onTouchEnd:function(e){return O(e)},clearManual:function(){return O(null,!1)}}},Ve=n.p+"static/media/edit-icon.a04997a1.svg",Ge=n.p+"static/media/plus.c453ef1e.svg",Je=n.p+"static/media/trash-icon.66b5ea88.svg",Ye=(n(352),function(e){var t=e.clickHandler,n=e.mode,c=void 0===n?"add":n,a=e.name,s=e.src,i=Object(r.useRef)(null),o=Be(i),l=Object(r.useState)(!1),u=Object(p.a)(l,2),d=u[0],f=u[1],b="select"===c&&d&&o,O=We((function(){f(!0)}),(function(){t()})),m=O.clearManual,h=Object(Ae.a)(O,["clearManual"]);return Object(r.useEffect)((function(){!o&&d&&(f(!1),m())}),[o,d]),Object(j.jsxs)("section",{className:"ProfilePicker ".concat(b?"ProfilePicker--blur":""),ref:i,children:[Object(j.jsxs)("div",Object(te.a)(Object(te.a)({className:"ProfilePicker__card ProfilePicker--".concat(c,"__card ").concat(b?"ProfilePicker__card--blur":"")},h),{},{children:[Object(j.jsx)("p",{className:"ProfilePicker__title ProfilePicker--".concat(c,"__title"),children:a||"Create:"}),Object(j.jsx)("div",{className:"ProfilePicker__button ProfilePicker--".concat(c,"__button"),children:Object(j.jsx)("img",{alt:a?"".concat(a,"-avatar"):"icon",className:"ProfilePicker__image ProfilePicker--".concat(c,"__image"),src:s||Ge})})]})),b&&Object(j.jsx)("div",{className:"ProfilePicker__overlay",children:Object(j.jsxs)("div",{className:"ProfilePicker__wrapper",children:[Object(j.jsx)("p",{className:"ProfilePicker__help-text",children:"Select one of the options:"}),Object(j.jsxs)("div",{className:"ProfilePicker__options",children:[Object(j.jsx)("div",{className:"ProfilePicker__option",children:Object(j.jsx)("img",{alt:"edit-icon",src:Ve})}),Object(j.jsx)("div",{className:"ProfilePicker__option",children:Object(j.jsx)("img",{alt:"trash-icon",src:Je})})]})]})})]})});!function(e){e.createProfile="createProfile",e.listProfiles="listProfiles"}(ie||(ie={}));n(353);var Ke,Qe=function(e){var t=e.clickHandler,n=Object(l.b)(),c=Object(l.c)(Q("data"));return Object(j.jsxs)("section",{className:"ProfilePickerList",children:[Object(j.jsx)("h1",{className:"ProfilePickerList__title",children:"Choose a brother-in-law:"}),Object(j.jsx)("p",{className:"ProfilePickerList__description",children:"Select a profile to start a conversation with your brother-in-law."}),Object(j.jsxs)("div",{className:"ProfilePickerList__pickers",children:[Object(j.jsx)(Ye,{clickHandler:function(){return t(ie.createProfile)}}),c.map((function(e){var t=e.name,c=e.profileId,a=e.src;return Object(j.jsx)(Ye,{clickHandler:function(){return n((e=c,{type:E.selectProfile,payload:e}));var e},mode:"select",name:t,src:a},c)}))]})]})},Xe=(n(354),function(){var e=Object(r.useState)(ie.listProfiles),t=Object(p.a)(e,2),n=t[0],c=t[1];return Object(j.jsx)("section",{className:"ProfilePickerSection",children:n===ie.listProfiles?Object(j.jsx)(Qe,{clickHandler:function(e){return c(e)}}):Object(j.jsx)(Ue,{clickHandler:function(){return c(ie.listProfiles)}})})}),qe=n.p+"static/media/gentleman.ff3326dc.svg",Ze=(n(355),function(e){e.appDataLoaded;return Object(j.jsxs)("div",{className:"PageLoader",children:[Object(j.jsx)("h2",{className:"PageLoader__title",children:"WELCOME GENTLEMAN"}),Object(j.jsx)("img",{alt:"gentleman-logo",src:qe}),Object(j.jsx)("div",{className:"PageLoader__spinner",children:Array.from(Array(12)).map((function(e,t){return Object(j.jsx)("div",{className:"PageLoader__circle PageLoader__circle--".concat(t+1)},t)}))})]})}),$e="auth";!function(e){e[e.login="".concat($e,"/login")]="login",e[e.loginSuccess="".concat($e,"/loginSuccess")]="loginSuccess",e[e.loginError="".concat($e,"/loginError")]="loginError"}(Ke||(Ke={}));var et=R()($e),tt=Object(W.a)(et,R()("error")),nt=Object(W.a)(et,R()("isPending")),ct=Object(W.a)(nt,tt,(function(e,t){return!e&&!t})),at=Object(W.a)(K,je,(function(e,t){return e&&t})),rt=(n(356),function(){var e=Object(l.c)(Q("selectedProfileId")),t=Object(l.c)(at);return t?e?Object(j.jsxs)("div",{className:"Page",children:[Object(j.jsx)(ee,{}),Object(j.jsx)(Ie,{}),Object(j.jsx)(P,{})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(w,{}),Object(j.jsx)(Xe,{})]}):Object(j.jsx)(Ze,{appDataLoaded:t})}),st=function(){var e=Object(l.c)(nt),t=Object(l.b)(),n=Object(l.c)(tt),c=Object(r.useMemo)((function(){return Object(u.a)({palette:{type:"dark"}})}),[]);return Object(r.useEffect)((function(){var e,n=prompt("Please enter a password:");indexedDB.deleteDatabase("firebaseLocalStorageDb"),t((e=n,{type:Ke.login,payload:e}))}),[]),e?null:n?Object(j.jsx)(b,{}):Object(j.jsx)(d.a,{theme:c,children:Object(j.jsx)(x,{children:Object(j.jsx)(rt,{})})})},it={apiKey:"AIzaSyBYQ05TbRrP2wVEX7NDn5CWodoAnnkpcOY",authDomain:"comics-book.firebaseapp.com",projectId:"comics-book",storageBucket:"comics-book.appspot.com",messagingSenderId:"426496482303",appId:"1:426496482303:web:ebf257ff0a64a90f6ae5ca"},ot=function(e){console.error(e)},lt=function(e){for(var t=Object.keys(e),n=[],c=0;c<t.length;c++)n.push(e[t[c]]);return n},ut=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.val();t(lt(n||{}))},dt=function(e,t,n){e.database().ref(n).on("value",(function(e){return ut(e,t)}),ot)},ft=function(){var e=Object(l.c)(ct),t=Object(l.b)();return Object(r.useEffect)((function(){I.a.initializeApp(it)}),[]),Object(r.useEffect)((function(){var n=function(e){t(function(e){return{type:E.fetchProfilesSuccess,payload:e}}(e))},c=function(e){t(function(e){return{type:G.fetchChannelsSuccess,payload:e}}(e))};e&&setTimeout((function(){dt(I.a,n,v.profiles),dt(I.a,c,v.channels)}),5e3)}),[e]),null},jt=n(42),bt=n(182),pt=n(91),Ot=n(183),mt={error:"",isPending:!0},ht=function(e){return Object(te.a)(Object(te.a)({},e),{},{isPending:!1})},vt=function(e,t){var n=t.payload;return Object(te.a)(Object(te.a)({},e),{},{error:n,isPending:!1})},gt={channels:null,error:"",isPending:!0,selectedChannelId:""},xt=function(e){return Object(te.a)(Object(te.a)({},e),{},{isPending:!0})},Pt=function(e){return Object(te.a)(Object(te.a)({},e),{},{isPending:!1})},_t=function(e,t){var n=t.payload;return Object(te.a)(Object(te.a)({},e),{},{error:n,isPending:!1})},Nt=function(e,t){var n=t.payload;return Object(te.a)(Object(te.a)({},e),{},{isPending:!1,channels:n})},Ct=function(e){return Object(te.a)(Object(te.a)({},e),{},{isPending:!1})},kt=function(e,t){var n=t.payload;return Object(te.a)(Object(te.a)({},e),{},{selectedChannelId:n})},yt={data:null,error:"",isPending:!0,selectedProfileId:""},Mt=function(e){return Object(te.a)(Object(te.a)({},e),{},{isPending:!0})},St=function(e){return Object(te.a)(Object(te.a)({},e),{},{isPending:!1})},wt=function(e,t){var n=t.payload;return Object(te.a)(Object(te.a)({},e),{},{error:n,isPending:!1})},Et=function(e,t){var n=t.payload;return Object(te.a)(Object(te.a)({},e),{},{isPending:!1,data:n})},It=function(e){return Object(te.a)(Object(te.a)({},e),{},{isPending:!1})},Ft=function(e,t){var n=t.payload;return Object(te.a)(Object(te.a)({},e),{},{selectedProfileId:n})},Tt={auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ke.loginSuccess:return ht(e);case Ke.loginError:return vt(e,t);default:return e}},channels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.createChannel:return xt(e);case G.createChannelSuccess:return Pt(e);case G.createChannelsError:return _t(e,t);case G.fetchChannelsSuccess:return Nt(e,t);case G.fetchChannelsError:return Ct(e);case G.setChannelId:return kt(e,t);default:return e}},profiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.createProfile:return Mt(e);case E.createProfileSuccess:return St(e);case E.createProfileError:return wt(e,t);case E.fetchProfilesSuccess:return Et(e,t);case E.fetchProfilesError:return It(e);case E.selectProfile:return Ft(e,t);default:return e}}},Ht=function(){return Object(jt.combineReducers)(Object(te.a)({},Tt))},Lt=n(184),Dt=n(24),Ut=n.n(Dt),At=n(15),Rt=Ut.a.mark(Bt);function Bt(e){var t,n;return Ut.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,c.next=4,I.a.auth().signInWithEmailAndPassword("eryk.sandecki@gmail.com",t);case 4:return c.next=6,Object(At.c)({type:Ke.loginSuccess});case 6:c.next=13;break;case 8:return c.prev=8,c.t0=c.catch(1),n=c.t0.code,c.next=13,Object(At.c)((a=n,{type:Ke.loginError,payload:a}));case 13:case"end":return c.stop()}var a}),Rt,null,[[1,8]])}var zt=Ut.a.mark(Wt);function Wt(){return Ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(At.a)([Object(At.f)(Ke.login,Bt)]);case 2:case"end":return e.stop()}}),zt)}var Vt=n(90),Gt=function(e,t){var n=[],c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";do{n.splice(0,n.length);for(var a=0;a<9;a++)n.push(c.charAt(Math.floor(Math.random()*c.length)))}while(e.find((function(e){return e[t]===n.join("")})));return n.join("")},Jt=Ut.a.mark(Yt);function Yt(e){var t,n,c,a,r;return Ut.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.name,c=t.shortcut,s.next=4,Object(At.d)(pe("channels"));case 4:return a=s.sent,r=Gt(a,"channelId"),s.prev=6,s.next=9,Object(At.b)(1e3);case 9:return s.next=11,F([v.channels]).set([].concat(Object(Vt.a)(a),[{channelId:r,name:n,shortcut:c}]));case 11:return s.next=13,Object(At.c)({type:G.createChannelSuccess});case 13:s.next=19;break;case 15:return s.prev=15,s.t0=s.catch(6),s.next=19,Object(At.c)(oe(s.t0));case 19:case"end":return s.stop()}}),Jt,null,[[6,15]])}var Kt=Ut.a.mark(Qt);function Qt(){return Ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(At.a)([Object(At.f)(G.createChannel,Yt)]);case 2:case"end":return e.stop()}}),Kt)}var Xt=Ut.a.mark(qt);function qt(e){var t,n,c,a,r,s,i;return Ut.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.action,c=t.file,a=t.path,o.prev=2,r=I.a.storage().ref(a).put(c),s=Object(pt.b)((function(e){return r.on("state_changed",e)})),i="",o.next=8,Object(At.f)(s,(function(){}));case 8:return o.next=10,r;case 10:return o.next=12,r.snapshot.ref.getDownloadURL().then((function(e){return i=e}));case 12:return o.next=14,Object(At.c)(n({result:"success",src:i}));case 14:o.next=20;break;case 16:return o.prev=16,o.t0=o.catch(2),o.next=20,Object(At.c)(n({error:o.t0,result:"error"}));case 20:case"end":return o.stop()}}),Xt,null,[[2,16]])}var Zt;!function(e){e[e.uploadFile="".concat("common","/uploadFile")]="uploadFile"}(Zt||(Zt={}));var $t=Ut.a.mark(en);function en(){return Ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(At.a)([Object(At.f)(Zt.uploadFile,qt)]);case 2:case"end":return e.stop()}}),$t)}var tn=function(e){var t=e.error,n=e.result,c=e.src;if("error"===n)throw t;return c},nn=function(e){return{type:Zt.uploadFile,payload:e}},cn=Ut.a.mark(sn),an=Ut.a.mark(on),rn=Ut.a.mark(ln);function sn(e){var t,n,c,r,s,i,o,l,u,d;return Ut.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,n=t.backToProfileList,c=t.name,r=t.imageData.file,s="".concat(a.profiles,"/").concat(c),f.next=5,Object(At.d)(Q("data"));case 5:return i=f.sent,o=Gt(i,"profileId"),f.prev=7,f.next=10,Object(At.c)(nn({action:$,path:s,file:r}));case 10:return f.next=12,Object(At.e)(E.uploadImageFinished);case 12:return l=f.sent,u=l.payload,d=tn(u),f.next=17,F([v.profiles]).set([].concat(Object(Vt.a)(i),[{lastUpdateTime:(new Date).getTime(),name:c,online:!1,profileId:o,src:d}]));case 17:return f.next=19,Object(At.c)({type:E.createProfileSuccess});case 19:return f.next=21,n();case 21:f.next=27;break;case 23:return f.prev=23,f.t0=f.catch(7),f.next=27,Object(At.c)(Z(f.t0));case 27:case"end":return f.stop()}}),cn,null,[[7,23]])}function on(e){var t,n,c;return Ut.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,Object(At.d)(Q("data"));case 3:return n=a.sent,c=n.findIndex((function(e){return e.profileId===t})),a.prev=5,a.next=8,F([v.profiles,c,"online"]).set(!0);case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(5),a.next=14,Object(At.c)((r=a.t0,{type:E.selectProfileError,payload:r}));case 14:case"end":return a.stop()}var r}),an,null,[[5,10]])}function ln(e){var t,n,c;return Ut.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,Object(At.d)(Q("data"));case 3:return n=a.sent,c=n.findIndex((function(e){return e.profileId===t})),a.prev=5,a.next=8,F([v.profiles,c,"lastUpdateTime"]).set((new Date).getTime());case 8:return a.next=10,Object(At.b)(6e4);case 10:return a.next=12,ln({payload:t});case 12:a.next=18;break;case 14:return a.prev=14,a.t0=a.catch(5),a.next=18,Object(At.c)((r=a.t0,{type:E.updateTimeProfileError,payload:r}));case 18:case"end":return a.stop()}var r}),rn,null,[[5,14]])}var un=Ut.a.mark(dn);function dn(){return Ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(At.a)([Object(At.f)(E.createProfile,sn),Object(At.f)(E.selectProfile,on),Object(At.f)(E.updateTimeProfile,ln)]);case 2:case"end":return e.stop()}}),un)}var fn=[Wt,Qt,en,dn],jn=function(e){var t,n=Object(Lt.a)(fn);try{for(n.s();!(t=n.n()).done;){var c=t.value;e.run(c)}}catch(a){n.e(a)}finally{n.f()}},bn=Object(pt.a)(),pn=function(){var e=Object(jt.createStore)(Ht(),{},Object(bt.composeWithDevTools)(jt.applyMiddleware.apply(void 0,[Ot.a].concat([bn]))));return jn(bn),e};n(358);o.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsxs)(l.a,{store:pn(),children:[Object(j.jsx)(ft,{}),Object(j.jsx)(st,{})]})}),document.getElementById("root"))}},[[359,1,2]]]);
//# sourceMappingURL=main.032338d5.chunk.js.map