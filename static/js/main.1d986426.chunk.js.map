{"version":3,"sources":["store/channels/actionsType.ts","assets/images/backgrounds/error.svg","components/ErrorPage/ErrorPage.tsx","store/channels/selectors.ts","store/typings/actionsType.ts","store/typings/actions.ts","store/profiles/actionsType.ts","components/Chat/ChatInput/useTyping.ts","assets/images/icons/send-icon.svg","assets/images/icons/send-disabled-icon.svg","components/Chat/ChatInput/services.ts","store/channels/actions.ts","store/profiles/selectors.ts","enums.ts","components/Chat/ChatInput/ChatInput.tsx","assets/images/icons/typing-spinner.svg","services/isOnlineUser.ts","constants.ts","components/Chat/ChatMessages/ChatMessagesTypings/ChatMessagesTypings.tsx","components/Chat/ChatMessages/useScroll.ts","assets/images/backgrounds/empty-messages.svg","components/Chat/ChatMessages/constants.ts","components/Chat/ChatMessages/services.ts","store/typings/selectors.ts","components/Chat/ChatMessages/ChatMessages.tsx","core/ContextProvider/ContextProvider.tsx","components/Firebase/enums.ts","components/Chat/Chat.tsx","assets/images/icons/update-icon.svg","components/ModalNewUpdates/constants.ts","components/ModalNewUpdates/ModalNewUpdates.tsx","components/ProfilePickerSection/enums.ts","components/Firebase/services/getRefDatabase.ts","components/OnlineHandler/useSubscribesOnDisconnectHandlers.ts","store/profiles/actions.ts","components/OnlineHandler/OnlineHandler.tsx","components/NavMenu/NavMenuCreateChannelForm/NavMenuCreateChannelForm.tsx","assets/images/icons/plus-white-icon.svg","components/NavMenu/NavMenuChannels/NavMenuChannels.tsx","assets/images/icons/offline-icon.svg","assets/images/icons/online-icon.svg","components/NavMenu/NavMenuProfiles/NavMenuProfiles.tsx","assets/images/icons/close-white-icon.svg","components/NavMenu/NavMenu.tsx","assets/images/icons/close-icon.svg","assets/images/icons/gear-icon.svg","assets/images/icons/modify-size-icon.svg","components/PageHeader/PageHeaderSettingsMenu/PageHeaderSettingsMenu.tsx","assets/images/icons/hamburger-menu.svg","components/PageHeader/PageHeader.tsx","assets/images/icons/back.svg","assets/images/icons/button-picture.svg","assets/images/icons/empty-image.svg","components/ProfileForm/services/loadImage.ts","components/ProfileForm/ProfileForm.tsx","components/CreateProfileForm/CreateProfileForm.tsx","components/ProfilePicker/useOutsideClickCard.ts","components/ProfilePicker/usePress.ts","assets/images/icons/edit-icon.svg","assets/images/icons/plus.svg","assets/images/icons/trash-icon.svg","components/ProfilePicker/ProfilePicker.tsx","store/auth/actionsType.ts","components/ProfilePickerList/ProfilePickerList.tsx","components/ProfilePickerSection/ProfilePickerSection.tsx","components/Spinner/Spinner.tsx","assets/images/backgrounds/gentleman.svg","components/PageLoader/PageLoader.tsx","store/auth/selectors.ts","store/selectors.ts","components/Page/Page.tsx","components/App/App.tsx","store/auth/actions.ts","components/Firebase/constants.ts","components/Firebase/services/databaseErrorHandler.ts","components/Firebase/services/databaseSuccessHandler.ts","components/Firebase/services/databaseHandler.ts","components/Firebase/Firebase.tsx","store/auth/reducer.ts","store/channels/reducer.ts","store/profiles/reducer.ts","store/typings/reducer.ts","store/reducers.ts","store/auth/saga.ts","store/auth/watch.ts","components/Firebase/services/generateId.ts","store/channels/saga.ts","store/channels/watch.ts","store/common/saga.ts","store/common/actionsType.ts","store/common/watch.ts","components/Firebase/services/afterUploadImageHandler.ts","store/common/actions.ts","store/profiles/saga.ts","store/profiles/watch.ts","store/typings/saga.ts","store/typings/watch.ts","store/watchers.ts","store/configureStore.ts","index.tsx"],"names":["ChannelsActionsType","ErrorPage","className","alt","src","Background","REDUCER_KEY","TypingsActionsType","channelsSelector","getFp","isPendingSelector","createSelector","channelsLoadedSelector","composeFp","isArrayFp","getAttributeFromChannels","headFp","attribute","getAttributesFromSelectedChannel","channels","selectedChannelId","findFp","channelId","getAttributeFromSelectedChannel","ProfilesActionsType","setStatusTyping","payload","type","setStatusTypingError","useTyping","profileId","profileName","useState","isTyping","setIsTyping","dispatch","useDispatch","useSelector","hideTyping","useCallback","debounce","mode","time","useEffect","Date","getTime","getPreparedContent","content","replaceAll","getTypingsWithRemovedItem","typings","selectedProfileId","filter","createChannelError","createChannelsError","sendMessageError","setChannelId","LocalStorageKey","StoragePath","profilesSelector","profilesLoadedSelector","getAttributeFromProfiles","getAttributesFromSelectedProfile","data","getAttributeFromSelectedProfile","ChatInput","forwardRef","ref","updateHeightMessages","channelName","inputRef","useRef","setContent","visibilityPlaceholder","setVisibilityPlaceholder","name","avatarSrc","inputText","current","innerText","trim","showTyping","resetAfterSubmit","contentEditable","onBlur","onFocus","onInput","event","target","innerHTML","suppressContentEditableWarning","onClick","sendMessage","SendIcon","SendDisabledIcon","isOnlineUser","lastTimeFromSelectedProfile","lastUpdateFromTimeSomeProfile","online","ChatMessagesTypings","lastUpdateTime","filteredProfiles","lastUpdateTimeProfile","length","users","map","join","getUsersWhoTypings","TypingSpinner","useScroll","messages","automaticScroll","setAutomaticScroll","scrollTo","top","scrollHeight","behavior","maxScrollTop","clientHeight","scrollTop","DAYS_MEANINGS","shouldBeWithZero","value","getFormatedDate","date","getFullYear","getMonth","getDate","dateFromMessage","currentDate","diffrentDays","Math","round","abs","getHours","getMinutes","typingsSelector","typingsLoadedSelector","getAttributeFromTypings","ChatMessages","_","scrollHandler","lastElement","onScroll","EmptyMessages","index","dangerouslySetInnerHTML","__html","DatabaseColumns","Context","createContext","margin","setMargin","ContextProvider","children","parseInt","localStorage","getItem","marginOffset","Provider","result","setItem","Chat","chatInputRef","messagesRef","useContext","style","height","calculatedHeight","maxHeight","UPDATE_DETAILS","CURRENT_VERSION","ModalNewUpdates","visible","setVisible","savedVersion","version","onClickHandler","setTimeout","Modal","closeAfterTransition","open","onClose","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","UpdateIcon","description","Button","variant","Mode","getRefDatabase","path","refDataBase","firebase","database","i","child","useSubscribesDisconnectHandlers","indexProfile","subscribeTypings","onDisconnect","set","subscribeProfile","profiles","createProfileError","uploadImageFinished","OnlineHandler","findIndex","updateTimeProfile","NavMenuCreateChannelForm","closeModal","openNotifiaction","setName","shortcut","setShortcut","isSubmitted","setIsSubmitted","isPending","onSubmit","preventDefault","toUpperCase","createChannel","TextField","onChange","e","label","inputProps","maxLength","color","disabled","size","CircularProgress","NavMenuChannels","closeNavMenu","setOpen","Alert","props","elevation","PlusWhiteIcon","Snackbar","autoHideDuration","severity","NavMenuProfiles","getIconPath","OnlineIcon","OfflineIcon","NavMenu","stopPropagation","CloseWhiteIcon","PageHeaderSettingsMenu","anchorEl","setAnchorEl","onClickCloseHandler","currentTarget","GearIcon","Menu","id","keepMounted","Boolean","MenuItem","ModifySizeIcon","CloseIcon","PageHeader","reduce","total","HamburgerMenu","loadImage","setImageData","reader","FileReader","files","onload","file","readAsDataURL","ProfileForm","clickHandler","initialName","imageData","initialImageData","submitHandler","title","BackIcon","backToProfileList","EmptyImage","click","ButtonPicture","CreateProfileForm","restProps","formData","createProfile","useOutsideClickCard","isFocus","setFocus","eventType","isMobile","handleClickOutside","contains","document","addEventListener","removeEventListener","isTouchEvent","touches","usePress","pressHandler","shouldPreventDefault","delay","longPressTriggered","setLongPressTriggered","start","passive","clear","shouldTriggerClick","clearTimeout","onMouseDown","onTouchStart","onMouseUp","onMouseLeave","onTouchEnd","clearManual","ProfilePicker","cardRef","overlayVisible","setOverlayVisible","isOverlayVisible","restPropsPress","PlusIcon","EditIcon","TrashIcon","AuthActionsType","ProfilePickerList","selectProfile","ProfilePickerSection","listProfiles","setMode","Spinner","PageLoader","visibleContent","setVisibleContent","Gentleman","authSelector","errorMessageSelector","isAuthenticatedSelector","isPendingAuthSelector","errorMessage","appDataLoadedSelector","profilesData","channelsData","typingsData","Page","appDataLoaded","get","App","theme","useMemo","createMuiTheme","palette","password","prompt","indexedDB","deleteDatabase","login","ThemeProvider","config","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","databaseErrorHandler","error","console","getData","values","keys","Object","push","databaseSuccessHandler","response","actions","val","databaseHandler","on","Firebase","isAuthenticated","initializeApp","profilesActions","fetchProfilesSuccess","channelsActions","fetchChannelsSuccess","typingsActions","fetchTypingsSuccess","initialState","loginSuccess","state","loginError","createChannelSuccess","fetchChannelsError","createProfileSuccess","fetchProfilesError","setProfileId","fetchTypingsError","reducers","auth","action","createRootReducer","combineReducers","signInWithEmailAndPassword","put","code","watchAuth","all","takeEvery","generateId","keyId","characters","splice","charAt","floor","random","find","select","indexOfChannel","sendMessageSuccess","watchChannels","uploadImage","uploadTask","storage","channel","eventChannel","emit","snapshot","getDownloadURL","then","CommonActionsType","watchCommonStore","uploadFile","afterUploadImageHandler","take","selectProfileError","updateTimeProfileError","watchProfiles","watchTypings","watches","sagaMiddlewareRuns","sagaMiddleware","watch","run","createSagaMiddleware","configureStore","store","createStore","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1d986426.chunk.js","sourcesContent":["// @ts-nocheck\r\nexport const REDUCER_KEY = 'channels';\r\n\r\nexport enum ChannelsActionsType {\r\n  createChannel = `${REDUCER_KEY}/createChannel`,\r\n  createChannelSuccess = `${REDUCER_KEY}/createChannelSuccess`,\r\n  createChannelsError = `${REDUCER_KEY}/createChannelsError`,\r\n  fetchChannelsSuccess = `${REDUCER_KEY}/fetchChannelsSuccess`,\r\n  fetchChannelsError = `${REDUCER_KEY}/fetchChannelsError`,\r\n  uploadImageFinished = `${REDUCER_KEY}/uploadImageFinished`,\r\n  sendMessage = `${REDUCER_KEY}/sendMessage`,\r\n  sendMessageSuccess = `${REDUCER_KEY}/sendMessageSuccess`,\r\n  sendMessageError = `${REDUCER_KEY}/sendMessageError`,\r\n  setChannelId = `${REDUCER_KEY}/setChannelId`,\r\n}\r\n","export default __webpack_public_path__ + \"static/media/error.6a233495.svg\";","import { FunctionComponent } from 'react';\r\n\r\n// others\r\nimport Background from '../../assets/images/backgrounds/error.svg';\r\n\r\n// styles\r\nimport './error-page-styles.scss';\r\n\r\nconst ErrorPage: FunctionComponent = () => (\r\n  <section className=\"ErrorPage\">\r\n    <img\r\n      alt=\"background-error\"\r\n      className=\"ErrorPage__background\"\r\n      src={Background}\r\n    />\r\n  </section>\r\n);\r\n\r\nexport default ErrorPage;\r\n","import composeFp from 'lodash/fp/compose';\r\nimport findFp from 'lodash/fp/find';\r\nimport getFp from 'lodash/fp/get';\r\nimport headFp from 'lodash/head';\r\nimport isArrayFp from 'lodash/fp/isArray';\r\nimport { createSelector, Selector } from 'reselect';\r\n\r\n// store\r\nimport { REDUCER_KEY } from './actionsType';\r\nimport { TMainState } from '../../types';\r\nimport { TChannel, TChannelsState } from './types';\r\n\r\nexport const channelsSelector: Selector<TMainState, TChannelsState> =\r\n  getFp(REDUCER_KEY);\r\n\r\nexport const isPendingSelector: Selector<TMainState, boolean | undefined> =\r\n  createSelector(channelsSelector, getFp('isPending'));\r\n\r\nexport const channelsLoadedSelector: Selector<TMainState, boolean> =\r\n  createSelector(channelsSelector, composeFp(isArrayFp, getFp('channels')));\r\n\r\nexport const getDefaultChannelId: Selector<TMainState, TChannel> =\r\n  createSelector(\r\n    channelsSelector,\r\n    composeFp(getFp('channelId'), headFp, getFp('channels'))\r\n  );\r\n\r\nexport const getAttributeFromChannels = (\r\n  attribute: string\r\n): Selector<TMainState, any> =>\r\n  createSelector(channelsSelector, getFp(attribute));\r\n\r\n// @ts-ignore\r\nexport const getAttributesFromSelectedChannel: Selector<TMainState, TChannel> =\r\n  createSelector(channelsSelector, ({ channels, selectedChannelId }) =>\r\n    findFp(({ channelId }) => channelId === selectedChannelId, channels)\r\n  );\r\n\r\nexport const getAttributeFromSelectedChannel = (\r\n  attribute: string\r\n): Selector<TMainState, any> =>\r\n  createSelector(getAttributesFromSelectedChannel, getFp(attribute));\r\n","// @ts-nocheck\r\nexport const REDUCER_KEY = 'typings';\r\n\r\nexport enum TypingsActionsType {\r\n  fetchTypingsSuccess = `${REDUCER_KEY}/fetchTypingsSuccess`,\r\n  fetchTypingsError = `${REDUCER_KEY}/fetchTypingsError`,\r\n  setStatusTyping = `${REDUCER_KEY}/setStatusTyping`,\r\n  setStatusTypingError = `${REDUCER_KEY}/setStatusTypingError`,\r\n}\r\n","// others\r\nimport {\r\n  TFetchTypingsSuccess,\r\n  TFetchTypingsError,\r\n  TSetStatusTyping,\r\n  TSetStatusTypingError,\r\n  TTyping,\r\n} from './types';\r\n\r\n// store\r\nimport { TypingsActionsType } from './actionsType';\r\n\r\nexport const fetchTypingsSuccess = (\r\n  payload: Array<TTyping>\r\n): TFetchTypingsSuccess => ({\r\n  type: TypingsActionsType.fetchTypingsSuccess,\r\n  payload,\r\n});\r\n\r\nexport const fetchTypingsError = (): TFetchTypingsError => ({\r\n  type: TypingsActionsType.fetchTypingsError,\r\n});\r\n\r\nexport const setStatusTyping = (\r\n  payload: TTyping & { mode: 'add' | 'remove' }\r\n): TSetStatusTyping => ({\r\n  type: TypingsActionsType.setStatusTyping,\r\n  payload,\r\n});\r\n\r\nexport const setStatusTypingError = (\r\n  payload: string\r\n): TSetStatusTypingError => ({\r\n  type: TypingsActionsType.setStatusTyping,\r\n  payload,\r\n});\r\n","// @ts-nocheck\r\nexport const REDUCER_KEY = 'profiles';\r\n\r\nexport enum ProfilesActionsType {\r\n  createProfile = `${REDUCER_KEY}/createProfile`,\r\n  createProfileSuccess = `${REDUCER_KEY}/createProfileSuccess`,\r\n  createProfileError = `${REDUCER_KEY}/createProfileError`,\r\n  fetchProfilesSuccess = `${REDUCER_KEY}/fetchProfilesSuccess`,\r\n  fetchProfilesError = `${REDUCER_KEY}/fetchProfilesError`,\r\n  uploadImageFinished = `${REDUCER_KEY}/uploadImageFinished`,\r\n  selectProfile = `${REDUCER_KEY}/selectProfile`,\r\n  selectProfileError = `${REDUCER_KEY}/selectProfileError`,\r\n  updateTimeProfile = `${REDUCER_KEY}/updateTimeProfile`,\r\n  updateTimeProfileError = `${REDUCER_KEY}/updateTimeProfileError`,\r\n}\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport debounce from 'lodash/debounce';\r\n\r\n// store\r\nimport { getAttributeFromChannels } from '../../../store/channels/selectors';\r\nimport { setStatusTyping } from '../../../store/typings/actions';\r\n\r\nconst useTyping = (profileId: string, profileName: string) => {\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const channelId = useSelector(getAttributeFromChannels('selectedChannelId'));\r\n  const payload = {\r\n    profileId,\r\n    profileName,\r\n    channelId,\r\n  };\r\n\r\n  // eslint-disable-next-line\r\n  const hideTyping = useCallback(\r\n    debounce(() => {\r\n      setIsTyping(false);\r\n      dispatch(\r\n        setStatusTyping({\r\n          ...payload,\r\n          mode: 'remove',\r\n          time: -1,\r\n        })\r\n      );\r\n    }, 1000),\r\n    []\r\n  );\r\n\r\n  const showTyping = () => {\r\n    if (!isTyping) {\r\n      setIsTyping(true);\r\n      dispatch(\r\n        setStatusTyping({\r\n          ...payload,\r\n          mode: 'add',\r\n          time: new Date().getTime(),\r\n        })\r\n      );\r\n    }\r\n    hideTyping();\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch(\r\n      setStatusTyping({\r\n        ...payload,\r\n        mode: 'remove',\r\n        time: -1,\r\n      })\r\n    );\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return showTyping;\r\n};\r\n\r\nexport default useTyping;\r\n","export default __webpack_public_path__ + \"static/media/send-icon.d7969ca4.svg\";","export default __webpack_public_path__ + \"static/media/send-disabled-icon.91ad69d9.svg\";","import { TTyping } from '../../../store/typings/types';\r\n\r\nexport const getPreparedContent = (content: string) =>\r\n  content.replaceAll(\r\n    '<div><br></div>',\r\n    `<div class=\"ChatMessages__break-line\"><br></div>`\r\n  );\r\n\r\nexport const getTypingsWithRemovedItem = (\r\n  typings: Array<TTyping>,\r\n  selectedProfileId: string\r\n) => typings.filter(({ profileId }) => profileId !== selectedProfileId);\r\n","// others\r\nimport {\r\n  TChannel,\r\n  TCreateChannel,\r\n  TCreateChannelError,\r\n  TCreateChannelSuccess,\r\n  TFetchChannelsError,\r\n  TFetchChannelsSuccess,\r\n  TMessage,\r\n  TSendMessage,\r\n  TSendMessageError,\r\n  TSendMessageSuccess,\r\n  TSetChannelId,\r\n} from './types';\r\n\r\n// store\r\nimport { ChannelsActionsType } from './actionsType';\r\n\r\nexport const createChannel = (\r\n  payload: Omit<TChannel, 'chanelId' | 'messages'>\r\n): TCreateChannel => ({\r\n  type: ChannelsActionsType.createChannel,\r\n  payload,\r\n});\r\n\r\nexport const createChannelSuccess = (): TCreateChannelSuccess => ({\r\n  type: ChannelsActionsType.createChannelSuccess,\r\n});\r\n\r\nexport const createChannelError = (payload: string): TCreateChannelError => ({\r\n  type: ChannelsActionsType.createChannelsError,\r\n  payload,\r\n});\r\n\r\nexport const fetchChannelsSuccess = (\r\n  payload: Array<TChannel>\r\n): TFetchChannelsSuccess => ({\r\n  type: ChannelsActionsType.fetchChannelsSuccess,\r\n  payload,\r\n});\r\n\r\nexport const fetchChannelsError = (): TFetchChannelsError => ({\r\n  type: ChannelsActionsType.fetchChannelsError,\r\n});\r\n\r\nexport const sendMessage = (payload: TMessage): TSendMessage => ({\r\n  type: ChannelsActionsType.sendMessage,\r\n  payload,\r\n});\r\n\r\nexport const sendMessageSuccess = (): TSendMessageSuccess => ({\r\n  type: ChannelsActionsType.sendMessageSuccess,\r\n});\r\n\r\nexport const sendMessageError = (payload: string): TSendMessageError => ({\r\n  type: ChannelsActionsType.sendMessageError,\r\n  payload,\r\n});\r\n\r\nexport const setChannelId = (payload: string): TSetChannelId => ({\r\n  type: ChannelsActionsType.setChannelId,\r\n  payload,\r\n});\r\n","import composeFp from 'lodash/fp/compose';\r\nimport findFp from 'lodash/fp/find';\r\nimport getFp from 'lodash/fp/get';\r\nimport isArrayFp from 'lodash/fp/isArray';\r\nimport { createSelector, Selector } from 'reselect';\r\n\r\n// store\r\nimport { REDUCER_KEY } from './actionsType';\r\nimport { TMainState } from '../../types';\r\nimport { TProfile, TProfilesState } from './types';\r\n\r\nexport const profilesSelector: Selector<TMainState, TProfilesState> =\r\n  getFp(REDUCER_KEY);\r\n\r\nexport const isPendingSelector: Selector<TMainState, boolean | undefined> =\r\n  createSelector(profilesSelector, getFp('isPending'));\r\n\r\nexport const profilesLoadedSelector: Selector<TMainState, boolean> =\r\n  createSelector(profilesSelector, composeFp(isArrayFp, getFp('data')));\r\n\r\nexport const getAttributeFromProfiles = (\r\n  attribute: string\r\n): Selector<TMainState, any> =>\r\n  createSelector(profilesSelector, getFp(attribute));\r\n\r\n// @ts-ignore\r\nexport const getAttributesFromSelectedProfile: Selector<TMainState, TProfile> =\r\n  createSelector(profilesSelector, ({ data, selectedProfileId }) =>\r\n    findFp(({ profileId }) => profileId === selectedProfileId, data)\r\n  );\r\n\r\nexport const getAttributeFromSelectedProfile = (\r\n  attribute: string\r\n): Selector<TMainState, TProfile> =>\r\n  createSelector(getAttributesFromSelectedProfile, getFp(attribute));\r\n","export enum LocalStorageKey {\r\n  marginOffset = 'MARGIN_OFFSET',\r\n  version = 'VERSION',\r\n}\r\n\r\nexport enum StoragePath {\r\n  profiles = 'PROFILES',\r\n}\r\n","// @ts-nocheck\r\nimport {\r\n  forwardRef,\r\n  ForwardRefExoticComponent,\r\n  RefAttributes,\r\n  useRef,\r\n  useState,\r\n} from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\n// hooks\r\nimport useTyping from './useTyping';\r\n\r\n// others\r\nimport SendIcon from '../../../assets/images/icons/send-icon.svg';\r\nimport SendDisabledIcon from '../../../assets/images/icons/send-disabled-icon.svg';\r\nimport { TProfile } from '../../../store/profiles/types';\r\n\r\n// services\r\nimport { getPreparedContent } from './services';\r\n\r\n// store\r\nimport { sendMessage } from '../../../store/channels/actions';\r\nimport { getAttributesFromSelectedProfile } from '../../../store/profiles/selectors';\r\n\r\n// styles\r\nimport './chat-input-styles.scss';\r\n\r\ntype TProps = {\r\n  channelName: string;\r\n  updateHeightMessages: () => void;\r\n};\r\n\r\nconst ChatInput: ForwardRefExoticComponent<\r\n  TProps & RefAttributes<HTMLDivElement>\r\n> = forwardRef<HTMLDivElement, TProps>(\r\n  ({ updateHeightMessages, channelName }, ref) => {\r\n    const dispatch = useDispatch();\r\n    const inputRef = useRef(null);\r\n    const [content, setContent] = useState('');\r\n    const [visibilityPlaceholder, setVisibilityPlaceholder] = useState(true);\r\n    const {\r\n      name: profileName,\r\n      src: avatarSrc,\r\n      profileId,\r\n    }: TProfile = useSelector(getAttributesFromSelectedProfile);\r\n    const inputText = inputRef.current?.innerText.trim() || '';\r\n    const showTyping = useTyping(profileId, profileName);\r\n\r\n    const onBlurHandler = (): void => {\r\n      if (!inputText) {\r\n        setVisibilityPlaceholder(true);\r\n      }\r\n    };\r\n\r\n    const onInputHandler = (event: Event): void => {\r\n      const { target } = event;\r\n\r\n      showTyping();\r\n      setContent(target.innerHTML);\r\n      updateHeightMessages();\r\n    };\r\n    // eslint-disable-next-line\r\n\r\n    const onSubmitHandler = () => {\r\n      if (content) {\r\n        dispatch(\r\n          sendMessage({\r\n            avatarSrc,\r\n            content: getPreparedContent(content),\r\n            profileName,\r\n            profileId,\r\n            time: new Date().getTime(),\r\n          })\r\n        );\r\n        resetAfterSubmit();\r\n      }\r\n    };\r\n\r\n    const resetAfterSubmit = () => {\r\n      inputRef.current.innerText = '';\r\n\r\n      updateHeightMessages();\r\n      setContent('');\r\n      setVisibilityPlaceholder(true);\r\n    };\r\n\r\n    return (\r\n      <div className=\"ChatInput\" ref={ref}>\r\n        <p\r\n          className=\"ChatInput__text-field\"\r\n          contentEditable={true}\r\n          onBlur={onBlurHandler}\r\n          onFocus={() => setVisibilityPlaceholder(false)}\r\n          onInput={onInputHandler}\r\n          ref={inputRef}\r\n          suppressContentEditableWarning\r\n        />\r\n        {visibilityPlaceholder && (\r\n          <span className=\"ChatInput__placeholder\">\r\n            Message #{channelName}:\r\n          </span>\r\n        )}\r\n        <img\r\n          alt=\"send-icon\"\r\n          className=\"ChatInput__send-icon\"\r\n          onClick={onSubmitHandler}\r\n          src={inputText ? SendIcon : SendDisabledIcon}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default ChatInput;\r\n","export default __webpack_public_path__ + \"static/media/typing-spinner.d495cf01.svg\";","// others\r\nimport { TIME_TO_COMPARE } from '../constants';\r\n\r\nconst isOnlineUser = (\r\n  lastTimeFromSelectedProfile: number,\r\n  lastUpdateFromTimeSomeProfile: number,\r\n  online: boolean\r\n): boolean =>\r\n  online &&\r\n  lastTimeFromSelectedProfile - lastUpdateFromTimeSomeProfile < TIME_TO_COMPARE;\r\n\r\nexport default isOnlineUser;\r\n","export const EMAIL = 'eryk.sandecki@gmail.com';\r\nexport const UPDATE_DELAY_TIME = 60000;\r\nexport const TIME_TO_COMPARE = 90000;\r\n","//@ts-nocheck\r\nimport { FunctionComponent, useCallback } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\n// others\r\nimport TypingSpinner from '../../../../assets/images/icons/typing-spinner.svg';\r\nimport { TTyping } from '../../../../store/typings/types';\r\n\r\n// store\r\nimport {\r\n  getAttributeFromProfiles,\r\n  getAttributeFromSelectedProfile,\r\n} from '../../../../store/profiles/selectors';\r\nimport { getAttributeFromChannels } from '../../../../store/channels/selectors';\r\n\r\n// services\r\nimport isOnlineUser from '../../../../services/isOnlineUser';\r\n\r\n// styles\r\nimport './chat-messages-typings-styles.scss';\r\n\r\ntype TProps = {\r\n  typings: Array<TTyping>;\r\n};\r\n\r\nconst ChatMessagesTypings: FunctionComponent<TProps> = ({ typings }) => {\r\n  const selectedProfileId = useSelector(\r\n    getAttributeFromProfiles('selectedProfileId')\r\n  );\r\n  const selectedChannelId = useSelector(\r\n    getAttributeFromChannels('selectedChannelId')\r\n  );\r\n  const lastUpdateTime: number = useSelector(\r\n    getAttributeFromSelectedProfile('lastUpdateTime')\r\n  );\r\n  const filteredProfiles = useCallback(\r\n    () =>\r\n      typings.filter(\r\n        ({ channelId, profileId, time: lastUpdateTimeProfile }) =>\r\n          profileId !== selectedProfileId &&\r\n          channelId === selectedChannelId &&\r\n          isOnlineUser(lastUpdateTime, lastUpdateTimeProfile, true)\r\n      ),\r\n    [lastUpdateTime, selectedChannelId, selectedProfileId, typings]\r\n  );\r\n\r\n  const getDescription = (): string =>\r\n    filteredProfiles().length === 1 ? 'is Typing:' : 'are Typings:';\r\n\r\n  const getUsersWhoTypings = (): string => {\r\n    const users = filteredProfiles();\r\n\r\n    return users.length > 2\r\n      ? `${users.length} users`\r\n      : users.map(({ profileName }) => profileName).join(', ');\r\n  };\r\n\r\n  if (filteredProfiles().length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"ChatMessagesTypings\">\r\n      <p className=\"ChatMessagesTypings__profile\">{getUsersWhoTypings()}</p>\r\n      <p className=\"ChatMessagesTypings__description\">{getDescription()}</p>\r\n      <img\r\n        alt=\"typing-spinner\"\r\n        className=\"ChatMessagesTypings__spinner\"\r\n        src={TypingSpinner}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatMessagesTypings;\r\n","// @ts-nocheck\r\nimport { ForwardedRef, useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\n// others\r\nimport { TMessage } from './../../../store/channels/types';\r\nimport { TTyping } from './../../../store/typings/types';\r\n\r\n// store\r\nimport { getAttributeFromChannels } from '../../../store/channels/selectors';\r\n\r\nconst useScroll = (\r\n  messages: Array<TMessage>,\r\n  ref: ForwardedRef<HTMLDivElement>,\r\n  typings: Array<TTyping>\r\n) => {\r\n  const [automaticScroll, setAutomaticScroll] = useState(true);\r\n  const selectedChannelId = useSelector(\r\n    getAttributeFromChannels('selectedChannelId')\r\n  );\r\n\r\n  const scrollHandler = () => {\r\n    const { current } = ref;\r\n    const maxScrollTop = current.scrollHeight - current.clientHeight;\r\n\r\n    if (current.scrollTop === maxScrollTop) {\r\n      setAutomaticScroll(true);\r\n    } else {\r\n      setAutomaticScroll(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const { current } = ref;\r\n    if (automaticScroll) {\r\n      current.scrollTo({ top: current.scrollHeight, behavior: 'smooth' });\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [messages, ref, typings]);\r\n\r\n  useEffect(() => {\r\n    const { current } = ref;\r\n    current.scrollTo({ top: current.scrollHeight, behavior: 'smooth' });\r\n    setAutomaticScroll(true);\r\n    // eslint-disable-next-line\r\n  }, [selectedChannelId]);\r\n\r\n  return scrollHandler;\r\n};\r\n\r\nexport default useScroll;\r\n","export default __webpack_public_path__ + \"static/media/empty-messages.0c9658a1.svg\";","export const DAYS_MEANINGS = ['Today', 'Yesterday'];\r\n","// @ts-nocheck\r\n// others\r\nimport { DAYS_MEANINGS } from './constants';\r\n\r\nconst oneDay = 24 * 60 * 60 * 1000;\r\n\r\nconst shouldBeWithZero = (value: number): string =>\r\n  value < 10 ? `0${value}` : value;\r\n\r\nconst getFormatedDate = (date: Date): string =>\r\n  `${date.getFullYear()}-${shouldBeWithZero(\r\n    date.getMonth() + 1\r\n  )}-${shouldBeWithZero(date.getDate())}`;\r\n\r\nconst getFormatedTime = (date: Date): string =>\r\n  `${shouldBeWithZero(date.getHours())}:${shouldBeWithZero(date.getMinutes())}`;\r\n\r\nexport const getDate = (time: number): string => {\r\n  const dateFromMessage = new Date(getFormatedDate(new Date(time)));\r\n  const currentDate = new Date(getFormatedDate(new Date()));\r\n  const diffrentDays = Math.round(\r\n    Math.abs((currentDate - dateFromMessage) / oneDay)\r\n  );\r\n\r\n  if (diffrentDays === 0) {\r\n    return getFormatedTime(new Date());\r\n  }\r\n\r\n  return diffrentDays < DAYS_MEANINGS.length\r\n    ? DAYS_MEANINGS[diffrentDays]\r\n    : getFormatedDate(new Date(time));\r\n};\r\n","import composeFp from 'lodash/fp/compose';\r\nimport getFp from 'lodash/fp/get';\r\nimport isArrayFp from 'lodash/fp/isArray';\r\nimport { createSelector, Selector } from 'reselect';\r\n\r\n// store\r\nimport { REDUCER_KEY } from './actionsType';\r\nimport { TMainState } from '../../types';\r\nimport { TTypingsState } from './types';\r\n\r\nexport const typingsSelector: Selector<TMainState, TTypingsState> =\r\n  getFp(REDUCER_KEY);\r\n\r\nexport const isPendingSelector: Selector<TMainState, boolean | undefined> =\r\n  createSelector(typingsSelector, getFp('isPending'));\r\n\r\nexport const typingsLoadedSelector: Selector<TMainState, boolean> =\r\n  createSelector(typingsSelector, composeFp(isArrayFp, getFp('typings')));\r\n\r\nexport const getAttributeFromTypings = (\r\n  attribute: string\r\n): Selector<TMainState, any> =>\r\n  createSelector(typingsSelector, getFp(attribute));\r\n","// @ts-nocheck\r\nimport { forwardRef, ForwardRefExoticComponent, RefAttributes } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\n// components\r\nimport ChatMessagesTypings from './ChatMessagesTypings/ChatMessagesTypings';\r\n\r\n// hooks\r\nimport useScroll from './useScroll';\r\n\r\n// others\r\nimport EmptyMessages from '../../../assets/images/backgrounds/empty-messages.svg';\r\nimport { TMessage } from '../../../store/channels/types';\r\nimport { TTyping } from '../../../store/typings/types';\r\n\r\n// services\r\nimport { getDate } from './services';\r\n\r\n// store\r\nimport { getAttributeFromSelectedChannel } from '../../../store/channels/selectors';\r\nimport { getAttributeFromTypings } from '../../../store/typings/selectors';\r\n\r\n// styles\r\nimport './chat-messages-styles.scss';\r\n\r\nconst ChatMessages: ForwardRefExoticComponent<RefAttributes<HTMLDivElement>> =\r\n  forwardRef<HTMLDivElement, {}>((_, ref) => {\r\n    // eslint-disable-next-line\r\n    const messages: Array<TMessage> =\r\n      useSelector(getAttributeFromSelectedChannel('messages')) || [];\r\n    const typings: Array<TTyping> =\r\n      useSelector(getAttributeFromTypings('typings')) || [];\r\n    const scrollHandler = useScroll(messages, ref, typings);\r\n    const lastElement = messages.length - 1;\r\n\r\n    return (\r\n      <section className=\"ChatMessages\" onScroll={scrollHandler} ref={ref}>\r\n        {messages.length === 0 ? (\r\n          <div className=\"ChatMessages__empty\">\r\n            <img alt=\"empty-messages\" src={EmptyMessages} />\r\n            <p className=\"ChatMessages__suggestion\">\r\n              No messages! You can start a conversation on this channel.\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {messages.map(\r\n              ({ avatarSrc, content, profileName, time }, index) => (\r\n                <div\r\n                  className={`ChatMessages__wrapper ${\r\n                    index === lastElement ? 'ChatMessages__wrapper--last' : ''\r\n                  }`}\r\n                  key={index}\r\n                >\r\n                  <img\r\n                    alt=\"avatar\"\r\n                    className=\"ChatMessages__avatar\"\r\n                    src={avatarSrc}\r\n                  />\r\n                  <div className=\"ChatMessages__content\">\r\n                    <p className=\"ChatMessages__profile-name\">\r\n                      <b>{profileName}</b> {getDate(time)}\r\n                    </p>\r\n                    <p\r\n                      className=\"ChatMessages__content\"\r\n                      dangerouslySetInnerHTML={{ __html: content }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )\r\n            )}\r\n            <ChatMessagesTypings typings={typings} />\r\n          </>\r\n        )}\r\n      </section>\r\n    );\r\n  });\r\n\r\nexport default ChatMessages;\r\n","// @ts-nocheck\r\nimport { createContext, FunctionComponent, ReactNode, useState } from 'react';\r\n\r\n// other\r\nimport { LocalStorageKey } from '../../enums';\r\n\r\ntype TProps = {\r\n  children: ReactNode;\r\n};\r\n\r\nexport const Context: React.Context<any> = createContext({\r\n  margin: 0,\r\n  setMargin: () => {},\r\n});\r\n\r\nconst getMarginFromLocalStorage = (): number =>\r\n  parseInt(localStorage.getItem(LocalStorageKey.marginOffset) || 0);\r\n\r\nconst ContextProvider: FunctionComponent<TProps> = ({ children }) => {\r\n  const [margin, setMargin] = useState(getMarginFromLocalStorage());\r\n\r\n  const setMarginHandler = (value: number): void => {\r\n    const result = margin + value;\r\n\r\n    if (margin > 0 || value !== -1) {\r\n      setMargin(result);\r\n      localStorage.setItem(LocalStorageKey.marginOffset, result);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Context.Provider value={{ margin, setMargin: setMarginHandler }}>\r\n      {children}\r\n    </Context.Provider>\r\n  );\r\n};\r\n\r\nexport default ContextProvider;\r\n","export enum DatabaseColumns {\r\n  profiles = 'profiles',\r\n  channels = 'channels',\r\n  typings = 'typings',\r\n}\r\n","// @ts-nocheck\r\nimport { FunctionComponent, useContext, useRef } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\n// components\r\nimport ChatInput from './ChatInput/ChatInput';\r\nimport ChatMessages from './ChatMessages/ChatMessages';\r\n\r\n// core\r\nimport { Context } from '../../core/ContextProvider/ContextProvider';\r\n\r\n// others\r\nimport { TContext } from '../../core/ContextProvider/types';\r\n\r\n// store\r\nimport { getAttributeFromSelectedChannel } from '../../store/channels/selectors';\r\n\r\n// styles\r\nimport './chat-styles.scss';\r\n\r\nconst Chat: FunctionComponent<{}> = () => {\r\n  const chatInputRef = useRef(null);\r\n  const messagesRef = useRef(null);\r\n  const name = useSelector(getAttributeFromSelectedChannel('name'));\r\n  const { margin }: TContext = useContext(Context);\r\n\r\n  const updateHeightMessages = (): void => {\r\n    const height = chatInputRef.current.clientHeight;\r\n    const calculatedHeight = `calc(100% - ${height}px)`;\r\n\r\n    messagesRef.current.style.height = calculatedHeight;\r\n    messagesRef.current.style.maxHeight = calculatedHeight;\r\n  };\r\n\r\n  return (\r\n    <section\r\n      className=\"Chat\"\r\n      style={{ height: `calc(100vh - ${80 + margin}px)` }}\r\n    >\r\n      <ChatMessages ref={messagesRef} />\r\n      <ChatInput\r\n        channelName={name}\r\n        ref={chatInputRef}\r\n        updateHeightMessages={updateHeightMessages}\r\n      />\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","export default __webpack_public_path__ + \"static/media/update-icon.4cd55b79.svg\";","export const UPDATE_DETAILS = [\r\n  'Application access by password',\r\n  'Ability to create profiles',\r\n  'Ability to create channels',\r\n  'Status of active brothers-in-law',\r\n  'Application adapted to all devices',\r\n  'Ability to write on the channel',\r\n  'Status on the number of active brothers-in-law',\r\n  'Ability to send messages',\r\n  'Determination of date of last message',\r\n  'The current status of a person who is currently writing on a channel',\r\n];\r\nexport const CURRENT_VERSION = '1.0.0';\r\n","import { FunctionComponent, useEffect, useState } from 'react';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport Button from '@material-ui/core/Button';\r\nimport Fade from '@material-ui/core/Fade';\r\nimport Modal from '@material-ui/core/Modal';\r\n\r\n// others\r\nimport UpdateIcon from '../../assets/images/icons/update-icon.svg';\r\nimport { UPDATE_DETAILS, CURRENT_VERSION } from './constants';\r\nimport { LocalStorageKey } from '../../enums';\r\n\r\n// styles\r\nimport './modal-new-updates-styles.scss';\r\n\r\nconst ModalNewUpdates: FunctionComponent = () => {\r\n  const [visible, setVisible] = useState(false);\r\n  const savedVersion = localStorage.getItem(LocalStorageKey.version) || '';\r\n\r\n  const onClickHandler = (): void => {\r\n    localStorage.setItem(LocalStorageKey.version, CURRENT_VERSION);\r\n    setVisible(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (savedVersion !== CURRENT_VERSION) {\r\n      setTimeout(() => {\r\n        setVisible(true);\r\n      }, 1000);\r\n    }\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <Modal\r\n      className=\"ModalNewUpdates\"\r\n      closeAfterTransition\r\n      open={visible}\r\n      onClose={onClickHandler}\r\n      BackdropComponent={Backdrop}\r\n      BackdropProps={{\r\n        timeout: 500,\r\n      }}\r\n    >\r\n      <Fade in={visible}>\r\n        <div className=\"ModalNewUpdates__container\">\r\n          <div className=\"ModalNewUpdates__wrapper\">\r\n            {/* ICON */}\r\n            <div className=\"ModalNewUpdates__icon\">\r\n              <img alt=\"update-icon\" src={UpdateIcon} />\r\n            </div>\r\n\r\n            {/* DETAILS */}\r\n            <div className=\"ModalNewUpdates__content\">\r\n              <h4 className=\"ModalNewUpdates__title\">\r\n                New Update: {CURRENT_VERSION}\r\n              </h4>\r\n              <ul className=\"ModalNewUpdates__details\">\r\n                {UPDATE_DETAILS.map((description) => (\r\n                  <li className=\"ModalNewUpdates__item\" key={description}>\r\n                    <p className=\"ModalNewUpdates__description\">\r\n                      {description}.\r\n                    </p>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n          <Button\r\n            className=\"ModalNewUpdates__submit\"\r\n            onClick={onClickHandler}\r\n            variant=\"outlined\"\r\n          >\r\n            Understand\r\n          </Button>\r\n        </div>\r\n      </Fade>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ModalNewUpdates;\r\n","export enum Mode {\r\n  createProfile = 'createProfile',\r\n  listProfiles = 'listProfiles',\r\n}\r\n","import firebase from 'firebase';\r\n\r\nconst getRefDatabase = (path: Array<string>): firebase.database.Reference => {\r\n  let refDataBase = firebase.database().ref(path[0]);\r\n  for (let i = 1; i < path.length; i++) {\r\n    refDataBase = refDataBase.child(path[i]);\r\n  }\r\n  return refDataBase;\r\n};\r\n\r\nexport default getRefDatabase;\r\n","// @ts-nocheck\r\nimport { useSelector } from 'react-redux';\r\n\r\n// others\r\nimport { DatabaseColumns } from '../Firebase/enums';\r\n\r\n// services\r\nimport getRefDatabase from '../Firebase/services/getRefDatabase';\r\nimport { getTypingsWithRemovedItem } from '../Chat/ChatInput/services';\r\n\r\n// store\r\nimport { getAttributeFromSelectedChannel } from '../../store/channels/selectors';\r\n\r\nconst useSubscribesDisconnectHandlers = (\r\n  indexProfile: number,\r\n  selectedProfileId: string\r\n) => {\r\n  const typings = useSelector(getAttributeFromSelectedChannel('typings')) || [];\r\n\r\n  const subscribeProfile = () =>\r\n    getRefDatabase([DatabaseColumns.profiles, indexProfile, 'online'])\r\n      .onDisconnect()\r\n      .set(false);\r\n\r\n  const subscribeTypings = () =>\r\n    getRefDatabase([DatabaseColumns.typings])\r\n      .onDisconnect()\r\n      .set(getTypingsWithRemovedItem(typings, selectedProfileId));\r\n\r\n  return {\r\n    subscribeTypings,\r\n    subscribeProfile,\r\n  };\r\n};\r\n\r\nexport default useSubscribesDisconnectHandlers;\r\n","import { TUpdateTimeProfileError } from './types';\r\n// others\r\nimport { TReturnablePayload } from './../common/types';\r\nimport {\r\n  TCreateProfile,\r\n  TCreateProfileSuccess,\r\n  TCreateProfileError,\r\n  TFetchProfilesSuccess,\r\n  TFetchProfilesError,\r\n  TProfile,\r\n  TProfileFormData,\r\n  TUploadImageFinished,\r\n  TSelectProfile,\r\n  TSelectProfileError,\r\n  TUpdateTimeProfile,\r\n} from './types';\r\n\r\n// store\r\nimport { ProfilesActionsType } from './actionsType';\r\n\r\nexport const createProfile = (payload: TProfileFormData): TCreateProfile => ({\r\n  type: ProfilesActionsType.createProfile,\r\n  payload,\r\n});\r\n\r\nexport const createProfileSuccess = (): TCreateProfileSuccess => ({\r\n  type: ProfilesActionsType.createProfileSuccess,\r\n});\r\n\r\nexport const createProfileError = (payload: string): TCreateProfileError => ({\r\n  type: ProfilesActionsType.createProfileError,\r\n  payload,\r\n});\r\n\r\nexport const fetchProfilesSuccess = (\r\n  payload: Array<TProfile>\r\n): TFetchProfilesSuccess => ({\r\n  type: ProfilesActionsType.fetchProfilesSuccess,\r\n  payload,\r\n});\r\n\r\nexport const fetchProfilesError = (): TFetchProfilesError => ({\r\n  type: ProfilesActionsType.fetchProfilesError,\r\n});\r\n\r\nexport const uploadImageFinished = (\r\n  payload: TReturnablePayload\r\n): TUploadImageFinished => ({\r\n  type: ProfilesActionsType.uploadImageFinished,\r\n  payload,\r\n});\r\n\r\nexport const selectProfile = (payload: string): TSelectProfile => ({\r\n  type: ProfilesActionsType.selectProfile,\r\n  payload,\r\n});\r\n\r\nexport const selectProfileError = (payload: string): TSelectProfileError => ({\r\n  type: ProfilesActionsType.selectProfileError,\r\n  payload,\r\n});\r\n\r\nexport const updateTimeProfile = (payload: string): TUpdateTimeProfile => ({\r\n  type: ProfilesActionsType.updateTimeProfile,\r\n  payload,\r\n});\r\n\r\nexport const updateTimeProfileError = (\r\n  payload: string\r\n): TUpdateTimeProfileError => ({\r\n  type: ProfilesActionsType.updateTimeProfileError,\r\n  payload,\r\n});\r\n","// @ts-nocheck\r\nimport { FunctionComponent, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\n// hooks\r\nimport useSubscribesDisconnectHandlers from './useSubscribesOnDisconnectHandlers';\r\n\r\n// others\r\nimport { TProfile } from '../../store/profiles/types';\r\n\r\n// store\r\nimport { getAttributeFromProfiles } from '../../store/profiles/selectors';\r\nimport { updateTimeProfile } from '../../store/profiles/actions';\r\n\r\nconst OnlineHandler: FunctionComponent = () => {\r\n  const dispatch = useDispatch();\r\n  const selectedProfileId = useSelector(\r\n    getAttributeFromProfiles('selectedProfileId')\r\n  );\r\n  const profiles: Array<TProfile> = useSelector(\r\n    getAttributeFromProfiles('data')\r\n  );\r\n  const indexProfile = profiles.findIndex(\r\n    ({ profileId }) => profileId === selectedProfileId\r\n  );\r\n\r\n  const { subscribeTypings, subscribeProfile } =\r\n    useSubscribesDisconnectHandlers(indexProfile, selectedProfileId);\r\n\r\n  useEffect(() => {\r\n    subscribeProfile();\r\n    subscribeTypings();\r\n    dispatch(updateTimeProfile(selectedProfileId));\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return null;\r\n};\r\n\r\nexport default OnlineHandler;\r\n","// @ts-nocheck\r\nimport { FunctionComponent, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\n// store\r\nimport { createChannel } from '../../../store/channels/actions';\r\nimport { isPendingSelector } from '../../../store/channels/selectors';\r\n\r\n// styles\r\nimport './nav-menu-create-channel-form-styles.scss';\r\n\r\ntype TProps = {\r\n  closeModal: () => void;\r\n  openNotifiaction: () => void;\r\n};\r\n\r\nconst NavMenuCreateChannelForm: FunctionComponent<TProps> = ({\r\n  closeModal,\r\n  openNotifiaction,\r\n}) => {\r\n  const [name, setName] = useState('');\r\n  const [shortcut, setShortcut] = useState('');\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n  const isPending = useSelector(isPendingSelector);\r\n  const dispatch = useDispatch();\r\n\r\n  const onSubmitHandler = (event: Event): void => {\r\n    event.preventDefault();\r\n\r\n    if (name && shortcut) {\r\n      dispatch(createChannel({ name, shortcut: shortcut.toUpperCase() }));\r\n      setIsSubmitted(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isPending && isSubmitted) {\r\n      closeModal();\r\n      openNotifiaction();\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [isPending, isSubmitted]);\r\n\r\n  return (\r\n    <form className=\"NavMenuCreateChannelForm\" onSubmit={onSubmitHandler}>\r\n      <h2>Create channel:</h2>\r\n      <TextField\r\n        className=\"NavMenuCreateChannelForm__input\"\r\n        onChange={(e) => setName(e.target.value)}\r\n        label=\"Channel name:\"\r\n        value={name}\r\n      />\r\n      <TextField\r\n        className=\"NavMenuCreateChannelForm__input\"\r\n        onChange={(e) => setShortcut(e.target.value)}\r\n        label=\"Shortcut channel name eg. (ME):\"\r\n        inputProps={{ maxLength: 2 }}\r\n        value={shortcut}\r\n      />\r\n      <Button\r\n        className=\"ProfileForm__submit-button\"\r\n        color=\"primary\"\r\n        disabled={isPending}\r\n        size=\"large\"\r\n        type=\"submit\"\r\n        variant=\"contained\"\r\n      >\r\n        Create Channel\r\n        {isPending && (\r\n          <CircularProgress\r\n            className=\"ProfileForm__spinner\"\r\n            color=\"primary\"\r\n            size={20}\r\n          />\r\n        )}\r\n      </Button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default NavMenuCreateChannelForm;\r\n","export default __webpack_public_path__ + \"static/media/plus-white-icon.abb60e4a.svg\";","import { FunctionComponent, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport Fade from '@material-ui/core/Fade';\r\nimport MuiAlert, { AlertProps } from '@material-ui/lab/Alert';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\n\r\n// components\r\nimport NavMenuCreateChannelForm from '../NavMenuCreateChannelForm/NavMenuCreateChannelForm';\r\n\r\n// others\r\nimport PlusWhiteIcon from '../../../assets/images/icons/plus-white-icon.svg';\r\nimport { TChannel } from '../../../store/channels/types';\r\n\r\n// store\r\nimport { getAttributeFromChannels } from '../../../store/channels/selectors';\r\nimport { setChannelId } from '../../../store/channels/actions';\r\n\r\n// styles\r\nimport './nav-menu-channels-styles.scss';\r\n\r\ntype TProps = {\r\n  closeNavMenu: () => void;\r\n};\r\n\r\nconst NavMenuChannels: FunctionComponent<TProps> = ({ closeNavMenu }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [visible, setVisible] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const channels: Array<TChannel> = useSelector(\r\n    getAttributeFromChannels('channels')\r\n  );\r\n\r\n  const Alert = (props: AlertProps) => {\r\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n  };\r\n\r\n  const onClickHandler = (channelId: string): void => {\r\n    closeNavMenu();\r\n    dispatch(setChannelId(channelId));\r\n  };\r\n\r\n  return (\r\n    <div className=\"NavMenuChannels\">\r\n      {/* NAV */}\r\n      <div className=\"NavMenuChannels__nav\">\r\n        <p className=\"NavMenuChannels__title\">Channels</p>\r\n        <img\r\n          alt=\"plus-white-icon\"\r\n          className=\"NavMenuChannels__button\"\r\n          onClick={() => setVisible(true)}\r\n          src={PlusWhiteIcon}\r\n        />\r\n      </div>\r\n      {/* CHANNELS */}\r\n      <div className=\"NavMenuChannels__channels\">\r\n        {channels.map(({ channelId, name }) => (\r\n          <p\r\n            className=\"NavMenuChannels__channel-name\"\r\n            key={channelId}\r\n            onClick={() => onClickHandler(channelId)}\r\n          >\r\n            #{name}\r\n          </p>\r\n        ))}\r\n      </div>\r\n\r\n      {/* MODAL */}\r\n      <Modal\r\n        className=\"NavMenuChannels__modal\"\r\n        closeAfterTransition\r\n        open={visible}\r\n        onClose={() => setVisible(false)}\r\n        BackdropComponent={Backdrop}\r\n        BackdropProps={{\r\n          timeout: 500,\r\n        }}\r\n      >\r\n        <Fade in={visible}>\r\n          <div className=\"NavMenuChannels__card\">\r\n            <NavMenuCreateChannelForm\r\n              closeModal={() => setVisible(false)}\r\n              openNotifiaction={() => setOpen(true)}\r\n            />\r\n          </div>\r\n        </Fade>\r\n      </Modal>\r\n\r\n      {/* NOTIFICATION */}\r\n      <Snackbar\r\n        open={open}\r\n        className=\"NavMenuChannels__snackbar\"\r\n        autoHideDuration={5000}\r\n        onClose={() => setOpen(false)}\r\n      >\r\n        <Alert onClose={() => setOpen(false)} severity=\"success\">\r\n          Channel has been added!\r\n        </Alert>\r\n      </Snackbar>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NavMenuChannels;\r\n","export default __webpack_public_path__ + \"static/media/offline-icon.e258b94e.svg\";","export default __webpack_public_path__ + \"static/media/online-icon.f3194dda.svg\";","import { FunctionComponent } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\n// others\r\nimport OfflineIcon from '../../../assets/images/icons/offline-icon.svg';\r\nimport OnlineIcon from '../../../assets/images/icons/online-icon.svg';\r\nimport { TProfile } from '../../../store/profiles/types';\r\n\r\n// services\r\nimport isOnlineUser from '../../../services/isOnlineUser';\r\n\r\n// store\r\nimport {\r\n  getAttributeFromProfiles,\r\n  getAttributeFromSelectedProfile,\r\n} from '../../../store/profiles/selectors';\r\n\r\n// styles\r\nimport './nav-menu-profiles-styles.scss';\r\n\r\nconst NavMenuProfiles: FunctionComponent = () => {\r\n  const profiles: Array<TProfile> = useSelector(\r\n    getAttributeFromProfiles('data')\r\n  );\r\n  const selectedProfileId = useSelector(\r\n    getAttributeFromProfiles('selectedProfileId')\r\n  );\r\n\r\n  //@ts-ignore\r\n  const lastUpdateTime: number = useSelector(\r\n    getAttributeFromSelectedProfile('lastUpdateTime')\r\n  );\r\n\r\n  const getIconPath = (\r\n    lastUpdateTimeProfile: number,\r\n    online: boolean\r\n  ): string => {\r\n    if (isOnlineUser(lastUpdateTime, lastUpdateTimeProfile, online)) {\r\n      return OnlineIcon;\r\n    }\r\n    return OfflineIcon;\r\n  };\r\n\r\n  return (\r\n    <div className=\"NavMenuProfiles\">\r\n      {/* HEADER */}\r\n      <div className=\"NavMenuProfiles__header\">\r\n        <p className=\"NavMenuProfiles__title\">Brothers-in-law</p>\r\n      </div>\r\n\r\n      {/* USERS */}\r\n      <div className=\"NavMenuProfiles__profiles\">\r\n        {profiles\r\n          .filter(({ profileId }) => profileId !== selectedProfileId)\r\n          .map(({ lastUpdateTime, name, online, profileId, src }) => (\r\n            <div className=\"NavMenuProfiles__profile\" key={profileId}>\r\n              <img\r\n                alt={profileId}\r\n                className=\"NavMenuProfiles__avatar\"\r\n                src={src}\r\n              />\r\n              <img\r\n                alt=\"status-icon\"\r\n                className=\"NavMenuProfiles__status\"\r\n                src={getIconPath(lastUpdateTime, online)}\r\n              />\r\n              <p className=\"NavMenuProfiles__name\" key={profileId}>\r\n                {name}\r\n              </p>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NavMenuProfiles;\r\n","export default __webpack_public_path__ + \"static/media/close-white-icon.46536c1e.svg\";","import { FunctionComponent } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\n// components\r\nimport NavMenuChannels from './NavMenuChannels/NavMenuChannels';\r\nimport NavMenuProfiles from './NavMenuProfiles/NavMenuProfiles';\r\n\r\n// others\r\nimport CloseWhiteIcon from '../../assets/images/icons/close-white-icon.svg';\r\n\r\n// store\r\nimport { getAttributesFromSelectedProfile } from '../../store/profiles/selectors';\r\n\r\n// styles\r\nimport './nav-menu-styles.scss';\r\n\r\ntype TProps = {\r\n  visible: boolean;\r\n  setVisible: (flag: boolean) => void;\r\n};\r\n\r\nconst NavMenu: FunctionComponent<TProps> = ({ visible, setVisible }) => {\r\n  const onClickHandler = (): void => setVisible(false);\r\n  const { name, src } = useSelector(getAttributesFromSelectedProfile);\r\n\r\n  return (\r\n    <div\r\n      className={`NavMenu ${visible && 'NavMenu--visible'}`}\r\n      onClick={onClickHandler}\r\n    >\r\n      {/* BACKGROUND */}\r\n      <div\r\n        className={`NavMenu__background ${\r\n          visible && 'NavMenu__background--visible'\r\n        }`}\r\n      />\r\n\r\n      {/* CONTAINER */}\r\n      <div\r\n        className={`NavMenu__container ${\r\n          visible && 'NavMenu__container--visible'\r\n        }`}\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/* HEADER */}\r\n        <div className=\"NavMenu__header\">\r\n          <div className=\"NavMenu__profile-data\">\r\n            <img\r\n              alt=\"profile-avatar\"\r\n              className=\"NavMenu__profile-avatar\"\r\n              src={src}\r\n            />\r\n            <p className=\"NavMenu__profile-name\">{name}</p>\r\n          </div>\r\n          <img\r\n            alt=\"close-white-icon\"\r\n            className=\"NavMenu__button-close\"\r\n            onClick={onClickHandler}\r\n            src={CloseWhiteIcon}\r\n          />\r\n        </div>\r\n\r\n        {/* CONTENT */}\r\n        <div className=\"NavMenu__content\">\r\n          <NavMenuChannels closeNavMenu={onClickHandler} />\r\n          <NavMenuProfiles />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NavMenu;\r\n","export default __webpack_public_path__ + \"static/media/close-icon.092c61d5.svg\";","export default __webpack_public_path__ + \"static/media/gear-icon.e5deb93c.svg\";","export default __webpack_public_path__ + \"static/media/modify-size-icon.7b8f31f6.svg\";","// @ts-nocheck\r\nimport { FunctionComponent, useContext, useState } from 'react';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\n// core\r\nimport { Context } from '../../../core/ContextProvider/ContextProvider';\r\n\r\n// others\r\nimport CloseIcon from '../../../assets/images/icons/close-icon.svg';\r\nimport GearIcon from '../../../assets/images/icons/gear-icon.svg';\r\nimport ModifySizeIcon from '../../../assets/images/icons/modify-size-icon.svg';\r\nimport { TContext } from '../../../core/ContextProvider/types';\r\n\r\n// styles\r\nimport './page-header-settings-menu-styles.scss';\r\n\r\nconst PageHeaderSettingsMenu: FunctionComponent<{}> = () => {\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const { setMargin }: TContext = useContext(Context);\r\n  const onClickOpenHandler = (event: Event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const onClickCloseHandler = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"PageHeaderSettingsMenu\">\r\n      <img alt=\"gear-icon\" onClick={onClickOpenHandler} src={GearIcon} />\r\n      <Menu\r\n        id=\"simple-menu\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={onClickCloseHandler}\r\n      >\r\n        <MenuItem\r\n          className=\"PageHeaderSettingsMenu__item\"\r\n          onClick={() => setMargin(1)}\r\n        >\r\n          Up\r\n          <img alt=\"gear-icon\" src={ModifySizeIcon} />\r\n        </MenuItem>\r\n        <MenuItem\r\n          className=\"PageHeaderSettingsMenu__item\"\r\n          onClick={() => setMargin(-1)}\r\n        >\r\n          Down\r\n          <img\r\n            alt=\"reverted-gear-icon\"\r\n            className=\"PageHeaderSettingsMenu__icon-rotate\"\r\n            src={ModifySizeIcon}\r\n          />\r\n        </MenuItem>\r\n        <MenuItem\r\n          className=\"PageHeaderSettingsMenu__item\"\r\n          onClick={onClickCloseHandler}\r\n        >\r\n          Close\r\n          <img alt=\"close-icon\" src={CloseIcon} />\r\n        </MenuItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n};\r\nexport default PageHeaderSettingsMenu;\r\n","export default __webpack_public_path__ + \"static/media/hamburger-menu.85ddbb0d.svg\";","import { FunctionComponent, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\n// components\r\nimport NavMenu from '../NavMenu/NavMenu';\r\nimport PageHeaderSettingsMenu from './PageHeaderSettingsMenu/PageHeaderSettingsMenu';\r\n\r\n// others\r\nimport HamburgerMenu from '../../assets/images/icons/hamburger-menu.svg';\r\nimport { TChannel } from '../../store/channels/types';\r\nimport { TProfile } from '../../store/profiles/types';\r\n\r\n// services\r\nimport isOnlineUser from '../../services/isOnlineUser';\r\n\r\n// store\r\nimport { getAttributesFromSelectedChannel } from '../../store/channels/selectors';\r\nimport {\r\n  getAttributeFromProfiles,\r\n  getAttributeFromSelectedProfile,\r\n} from '../../store/profiles/selectors';\r\n\r\n// styles\r\nimport './page-header-styles.scss';\r\n\r\nconst PageHeader: FunctionComponent<{}> = () => {\r\n  const [visible, setVisible] = useState(false);\r\n  const { name, shortcut }: TChannel = useSelector(\r\n    getAttributesFromSelectedChannel\r\n  );\r\n  const profiles: Array<TProfile> = useSelector(\r\n    getAttributeFromProfiles('data')\r\n  );\r\n  const selectedProfileId = useSelector(\r\n    getAttributeFromProfiles('selectedProfileId')\r\n  );\r\n\r\n  //@ts-ignore\r\n  const lastUpdateTime: number = useSelector(\r\n    getAttributeFromSelectedProfile('lastUpdateTime')\r\n  );\r\n\r\n  const getNumberOfUsersOnline = (): number =>\r\n    profiles\r\n      .filter(({ profileId }) => profileId !== selectedProfileId)\r\n      .reduce(\r\n        (total, { lastUpdateTime: lastUpdateTimeProfile, online }) =>\r\n          isOnlineUser(lastUpdateTime, lastUpdateTimeProfile, online)\r\n            ? ++total\r\n            : total,\r\n        0\r\n      );\r\n\r\n  return (\r\n    <header className=\"PageHeader\">\r\n      {/* LEFT COLUMN */}\r\n      <div className=\"PageHeader__left-column\">\r\n        {/* PICKER */}\r\n        <div className=\"PageHeader__channel-picker\">{shortcut}</div>\r\n\r\n        {/* DETAILS */}\r\n        <div>\r\n          <p className=\"PageHeader__title\">#{name}</p>\r\n          <p className=\"PageHeader__users\">\r\n            {getNumberOfUsersOnline()} Brothers online\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* RIGHT COLUMN */}\r\n      <div className=\"PageHeader__right-column\">\r\n        <PageHeaderSettingsMenu />\r\n        <img\r\n          alt=\"hamburger-menu\"\r\n          className=\"PageHeader__hamburger-menu\"\r\n          onClick={() => setVisible(true)}\r\n          src={HamburgerMenu}\r\n        />\r\n      </div>\r\n\r\n      {/* Nav Left Menu */}\r\n      <NavMenu visible={visible} setVisible={setVisible} />\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default PageHeader;\r\n","export default __webpack_public_path__ + \"static/media/back.d5208217.svg\";","export default __webpack_public_path__ + \"static/media/button-picture.9659aaae.svg\";","export default __webpack_public_path__ + \"static/media/empty-image.acb60281.svg\";","// @ts-nocheck\r\n// others\r\n\r\nconst loadImage = (\r\n  event: Event,\r\n  setImageData: (file: string | ArrayBuffer | null) => void\r\n) => {\r\n  const reader = new FileReader();\r\n  const { files } = event.target;\r\n\r\n  reader.onload = (e) => {\r\n    setImageData({\r\n      file: files[0],\r\n      src: e.target.result,\r\n    });\r\n  };\r\n\r\n  reader.readAsDataURL(files[0]);\r\n};\r\n\r\nexport default loadImage;\r\n","// @ts-nocheck\r\nimport { FunctionComponent, useRef, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\n// others\r\nimport BackIcon from '../../assets/images/icons/back.svg';\r\nimport ButtonPicture from '../../assets/images/icons/button-picture.svg';\r\nimport EmptyImage from '../../assets/images/icons/empty-image.svg';\r\nimport { TImageData } from '../../types';\r\nimport { TProfileFormData } from '../../store/profiles/types';\r\n\r\n// services\r\nimport loadImage from './services/loadImage';\r\n\r\n// store\r\nimport { isPendingSelector } from '../../store/profiles/selectors';\r\n\r\n// styles\r\nimport './profile-form-styles.scss';\r\n\r\ntype TProps = {\r\n  clickHandler: () => void;\r\n  name?: string;\r\n  imageData?: TImageData;\r\n  submitHandler: (formData: TProfileFormData) => void;\r\n  title: string;\r\n};\r\n\r\nconst ProfileForm: FunctionComponent<TProps> = ({\r\n  clickHandler,\r\n  name: initialName = '',\r\n  imageData: initialImageData = null,\r\n  submitHandler,\r\n  title,\r\n}) => {\r\n  const isPending = useSelector(isPendingSelector);\r\n  const inputRef = useRef(null);\r\n  const [imageData, setImageData] = useState(initialImageData);\r\n  const [name, setName] = useState(initialName);\r\n\r\n  const onSubmitHandler = (event: Event) => {\r\n    event.preventDefault();\r\n\r\n    if (imageData && name) {\r\n      submitHandler({ backToProfileList: clickHandler, imageData, name });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"ProfileForm__form-wrapper\">\r\n      <h2 className=\"ProfileForm__title\">\r\n        <img\r\n          alt=\"back-icon\"\r\n          className=\"ProfileForm__icon\"\r\n          onClick={clickHandler}\r\n          src={BackIcon}\r\n        />\r\n        {title}\r\n      </h2>\r\n\r\n      {/* FORM */}\r\n      <form className=\"ProfileForm\" onSubmit={onSubmitHandler}>\r\n        {/* AVATAR */}\r\n        <div\r\n          className={`ProfileForm__avatar ${\r\n            imageData ? 'ProfileForm__avatar--selected' : ''\r\n          }`}\r\n        >\r\n          {imageData ? (\r\n            <img\r\n              alt=\"avatar\"\r\n              className=\"ProfileForm__image\"\r\n              src={imageData.src}\r\n            />\r\n          ) : (\r\n            <img\r\n              alt=\"empty\"\r\n              className=\"ProfileForm__empty-picture\"\r\n              src={EmptyImage}\r\n            />\r\n          )}\r\n\r\n          {/* BUTTON */}\r\n          <img\r\n            alt=\"button-icon\"\r\n            className=\"ProfileForm__button-picture\"\r\n            onClick={() => inputRef.current.click()}\r\n            src={ButtonPicture}\r\n          />\r\n          <input\r\n            className=\"ProfileForm__input-file\"\r\n            onChange={(event: Event) => loadImage(event, setImageData)}\r\n            ref={inputRef}\r\n            type=\"file\"\r\n          />\r\n        </div>\r\n\r\n        {/* INPUT NAME */}\r\n        <TextField\r\n          className=\"ProfileForm__input-name\"\r\n          onChange={(e) => setName(e.target.value)}\r\n          label=\"Profile name:\"\r\n          value={name}\r\n        />\r\n\r\n        <Button\r\n          className=\"ProfileForm__submit-button\"\r\n          color=\"primary\"\r\n          disabled={isPending}\r\n          size=\"large\"\r\n          type=\"submit\"\r\n          variant=\"contained\"\r\n        >\r\n          Create Profile\r\n          {isPending && (\r\n            <CircularProgress\r\n              className=\"ProfileForm__spinner\"\r\n              color=\"primary\"\r\n              size={20}\r\n            />\r\n          )}\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileForm;\r\n","import { FunctionComponent } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\n// components\r\nimport ProfileForm from '../ProfileForm/ProfileForm';\r\n\r\n// store\r\nimport { createProfile } from '../../store/profiles/actions';\r\nimport { TProfileFormData } from '../../store/profiles/types';\r\n\r\nconst CreateProfileForm: FunctionComponent = ({ ...restProps }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const submitHandler = (formData: TProfileFormData) =>\r\n    dispatch(createProfile(formData));\r\n\r\n  return (\r\n    //@ts-ignore\r\n    <ProfileForm\r\n      submitHandler={submitHandler}\r\n      title=\"Create Profile:\"\r\n      {...restProps}\r\n    />\r\n  );\r\n};\r\n\r\nexport default CreateProfileForm;\r\n","// @ts-nocheck\r\nimport { MutableRefObject, useEffect, useState } from 'react';\r\nimport { isMobile } from 'react-device-detect';\r\n\r\nconst useOutsideClickCard = (ref: MutableRefObject<HTMLDivElement>) => {\r\n  const [isFocus, setFocus] = useState(false);\r\n  const eventType = isMobile ? 'touchstart' : 'mousedown';\r\n\r\n  const handleClickOutside = (event: Event): void => {\r\n    const target = event.target as Node;\r\n\r\n    if (ref.current) {\r\n      if (!isFocus && ref.current.contains(target)) {\r\n        setFocus(true);\r\n      } else if (isFocus && !ref.current.contains(target)) {\r\n        setFocus(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(eventType, handleClickOutside);\r\n\r\n    return () => {\r\n      document.removeEventListener(eventType, handleClickOutside);\r\n    };\r\n    // eslint-disable-next-line\r\n  }, [ref, isFocus]);\r\n\r\n  return isFocus;\r\n};\r\n\r\nexport default useOutsideClickCard;\r\n","// @ts-nocheck\r\nimport { useCallback, useRef, useState } from 'react';\r\n\r\nconst usePress = (\r\n  pressHandler,\r\n  clickHandler,\r\n  { shouldPreventDefault = true, delay = 1000 } = {}\r\n) => {\r\n  const [longPressTriggered, setLongPressTriggered] = useState(false);\r\n  const timeout = useRef();\r\n  const target = useRef();\r\n\r\n  const start = useCallback(\r\n    (event) => {\r\n      if (shouldPreventDefault && event.target) {\r\n        event.target.addEventListener('touchend', preventDefault, {\r\n          passive: false,\r\n        });\r\n        target.current = event.target;\r\n      }\r\n\r\n      timeout.current = setTimeout(() => {\r\n        pressHandler(event);\r\n        setLongPressTriggered(true);\r\n      }, delay);\r\n    },\r\n    [pressHandler, delay, shouldPreventDefault]\r\n  );\r\n\r\n  const clear = useCallback(\r\n    (_, shouldTriggerClick = true) => {\r\n      if (timeout.current) {\r\n        clearTimeout(timeout.current);\r\n      }\r\n\r\n      if (shouldTriggerClick && !longPressTriggered) {\r\n        clickHandler();\r\n      }\r\n\r\n      if (shouldPreventDefault && target.current) {\r\n        target.current.removeEventListener('touchend', preventDefault);\r\n      }\r\n\r\n      setLongPressTriggered(false);\r\n    },\r\n    [shouldPreventDefault, clickHandler, longPressTriggered]\r\n  );\r\n\r\n  return {\r\n    onMouseDown: (e) => start(e),\r\n    onTouchStart: (e) => start(e),\r\n    onMouseUp: (e) => clear(e),\r\n    onMouseLeave: (e) => clear(e, false),\r\n    onTouchEnd: (e) => clear(e),\r\n    clearManual: () => clear(null, false),\r\n  };\r\n};\r\n\r\nconst isTouchEvent = (event) => {\r\n  return 'touches' in event;\r\n};\r\n\r\nconst preventDefault = (event) => {\r\n  if (!isTouchEvent(event)) return;\r\n\r\n  if (event.touches.length < 2 && event.preventDefault) {\r\n    event.preventDefault();\r\n  }\r\n};\r\n\r\nexport default usePress;\r\n","export default __webpack_public_path__ + \"static/media/edit-icon.d1210505.svg\";","export default __webpack_public_path__ + \"static/media/plus.c453ef1e.svg\";","export default __webpack_public_path__ + \"static/media/trash-icon.c05708e2.svg\";","import {\r\n  FunctionComponent,\r\n  MutableRefObject,\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n} from 'react';\r\n\r\n// hooks\r\nimport useOutsideClickCard from './useOutsideClickCard';\r\nimport usePress from './usePress';\r\n\r\n// others\r\nimport EditIcon from '../../assets/images/icons/edit-icon.svg';\r\nimport PlusIcon from '../../assets/images/icons/plus.svg';\r\nimport TrashIcon from '../../assets/images/icons/trash-icon.svg';\r\n\r\n// styles\r\nimport './profile-picker-styles.scss';\r\n\r\ntype TProps = {\r\n  clickHandler: () => void;\r\n  mode?: 'add' | 'select';\r\n  name?: string;\r\n  src?: string;\r\n};\r\n\r\nconst ProfilePicker: FunctionComponent<TProps> = ({\r\n  clickHandler,\r\n  mode = 'add',\r\n  name,\r\n  src,\r\n}) => {\r\n  // @ts-ignore\r\n  const cardRef: MutableRefObject<HTMLDivElement> = useRef(null);\r\n  const isFocus = useOutsideClickCard(cardRef);\r\n  const [overlayVisible, setOverlayVisible] = useState(false);\r\n  const isOverlayVisible = mode === 'select' && overlayVisible && isFocus;\r\n\r\n  const onPressHandler = () => {\r\n    setOverlayVisible(true);\r\n  };\r\n\r\n  const onClickHandler = () => {\r\n    clickHandler();\r\n  };\r\n\r\n  const { clearManual, ...restPropsPress } = usePress(\r\n    onPressHandler,\r\n    onClickHandler\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!isFocus && overlayVisible) {\r\n      setOverlayVisible(false);\r\n      clearManual();\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [isFocus, overlayVisible]);\r\n\r\n  return (\r\n    <section\r\n      className={`ProfilePicker ${\r\n        isOverlayVisible ? 'ProfilePicker--blur' : ''\r\n      }`}\r\n      ref={cardRef}\r\n    >\r\n      <div\r\n        className={`ProfilePicker__card ProfilePicker--${mode}__card ${\r\n          isOverlayVisible ? 'ProfilePicker__card--blur' : ''\r\n        }`}\r\n        {...restPropsPress}\r\n      >\r\n        {/* TITLE */}\r\n        <p className={`ProfilePicker__title ProfilePicker--${mode}__title`}>\r\n          {name ? name : 'Create:'}\r\n        </p>\r\n\r\n        {/* CIRCLE */}\r\n        <div className={`ProfilePicker__button ProfilePicker--${mode}__button`}>\r\n          <img\r\n            alt={name ? `${name}-avatar` : 'icon'}\r\n            className={`ProfilePicker__image ProfilePicker--${mode}__image`}\r\n            src={src ? src : PlusIcon}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* OVERLAY */}\r\n      {isOverlayVisible && (\r\n        <div className=\"ProfilePicker__overlay\">\r\n          <div className=\"ProfilePicker__wrapper\">\r\n            <p className=\"ProfilePicker__help-text\">\r\n              Select one of the options:\r\n            </p>\r\n            <div className=\"ProfilePicker__options\">\r\n              <div className=\"ProfilePicker__option\">\r\n                <img alt=\"edit-icon\" src={EditIcon} />\r\n              </div>\r\n              <div className=\"ProfilePicker__option\">\r\n                <img alt=\"trash-icon\" src={TrashIcon} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default ProfilePicker;\r\n","// @ts-nocheck\r\nexport const REDUCER_KEY = 'auth';\r\n\r\nexport enum AuthActionsType {\r\n  login = `${REDUCER_KEY}/login`,\r\n  loginSuccess = `${REDUCER_KEY}/loginSuccess`,\r\n  loginError = `${REDUCER_KEY}/loginError`,\r\n}\r\n","import { FunctionComponent } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\n// components\r\nimport ProfilePicker from '../ProfilePicker/ProfilePicker';\r\n\r\n// others\r\nimport { Mode } from '../ProfilePickerSection/enums';\r\nimport { TProfile } from '../../store/profiles/types';\r\n\r\n// store\r\nimport { selectProfile } from '../../store/profiles/actions';\r\nimport { getAttributeFromProfiles } from '../../store/profiles/selectors';\r\n\r\n// styles\r\nimport './profile-picker-list-styles.scss';\r\n\r\ntype TProps = {\r\n  clickHandler: (mode: Mode) => void;\r\n};\r\n\r\nconst ProfilePickerList: FunctionComponent<TProps> = ({ clickHandler }) => {\r\n  const dispatch = useDispatch();\r\n  const profiles: Array<TProfile> = useSelector(\r\n    getAttributeFromProfiles('data')\r\n  );\r\n\r\n  return (\r\n    <section className=\"ProfilePickerList\">\r\n      {/* CONTENT */}\r\n      <h1 className=\"ProfilePickerList__title\">Choose a brother-in-law:</h1>\r\n      <p className=\"ProfilePickerList__description\">\r\n        Select a profile to start a conversation with your brother-in-law.\r\n      </p>\r\n\r\n      {/* PICKERS */}\r\n      <div className=\"ProfilePickerList__pickers\">\r\n        <ProfilePicker clickHandler={() => clickHandler(Mode.createProfile)} />\r\n\r\n        {/* LIST */}\r\n        {/* @ts-ignore */}\r\n        {profiles.map(({ name, profileId, src }) => (\r\n          <ProfilePicker\r\n            clickHandler={() => dispatch(selectProfile(profileId))}\r\n            key={profileId}\r\n            mode=\"select\"\r\n            name={name}\r\n            src={src}\r\n          />\r\n        ))}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default ProfilePickerList;\r\n","import { FunctionComponent, useState } from 'react';\r\n\r\n// components\r\nimport CreateProfileForm from '../CreateProfileForm/CreateProfileForm';\r\nimport ProfilePickerList from '../ProfilePickerList/ProfilePickerList';\r\n\r\n// others\r\nimport { Mode } from './enums';\r\n\r\n// styles\r\nimport './profile-picker-section-styles.scss';\r\n\r\nconst ProfilePickerSection: FunctionComponent = () => {\r\n  const [mode, setMode] = useState(Mode.listProfiles);\r\n\r\n  const onClickBackHandler = (): void => setMode(Mode.listProfiles);\r\n\r\n  return (\r\n    <section className=\"ProfilePickerSection\">\r\n      {mode === Mode.listProfiles ? (\r\n        // LIST\r\n        <ProfilePickerList clickHandler={(mode: Mode) => setMode(mode)} />\r\n      ) : (\r\n        // @ts-ignore\r\n        <CreateProfileForm clickHandler={onClickBackHandler} />\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default ProfilePickerSection;\r\n","import { FunctionComponent } from 'react';\r\n\r\n// styles\r\nimport './spinner-styles.scss';\r\n\r\nconst Spinner: FunctionComponent = () => <div className=\"Spinner\" />;\r\n\r\nexport default Spinner;\r\n","export default __webpack_public_path__ + \"static/media/gentleman.41770c9f.svg\";","import { FunctionComponent, useEffect, useState } from 'react';\r\n\r\n// components\r\nimport Spinner from '../Spinner/Spinner';\r\n\r\n// others\r\nimport Gentleman from '../../assets/images/backgrounds/gentleman.svg';\r\n\r\n// styles\r\nimport './page-loader-styles.scss';\r\n\r\nconst PageLoader: FunctionComponent = () => {\r\n  const [visibleContent, setVisibleContent] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => setVisibleContent(false), 5000);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"PageLoader\">\r\n      {/* CONTENT */}\r\n      {visibleContent && (\r\n        <div className=\"PageLoader__content\">\r\n          <h2 className=\"PageLoader__title\">Welcome Gentleman:</h2>\r\n          <img\r\n            alt=\"gentleman-logo\"\r\n            className=\"PageLoader__image-welcome\"\r\n            src={Gentleman}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* SPINNER */}\r\n      <div\r\n        className={`PageLoader__spinner ${\r\n          !visibleContent ? 'PageLoader__spinner--show' : ''\r\n        }`}\r\n      >\r\n        <Spinner />\r\n        <p className=\"PageLoader__prompt\">Loading...</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageLoader;\r\n","// @ts-nocheck\r\nimport getFp from 'lodash/fp/get';\r\nimport { createSelector, Selector } from 'reselect';\r\n\r\n// store\r\nimport { REDUCER_KEY } from './actionsType';\r\nimport { TMainState } from '../../types';\r\nimport { TLocationState } from './types';\r\n\r\nexport const authSelector: Selector<TMainState, TLocationState> =\r\n  getFp(REDUCER_KEY);\r\n\r\nexport const errorMessageSelector: Selector<TMainState, boolean> =\r\n  createSelector(authSelector, getFp('error'));\r\n\r\nexport const isPendingSelector: Selector<TMainState, boolean> = createSelector(\r\n  authSelector,\r\n  getFp('isPending')\r\n);\r\n","import { createSelector, Selector } from 'reselect';\r\n\r\n// others\r\nimport { TMainState } from '../types';\r\n\r\n// store\r\nimport { channelsLoadedSelector } from './channels/selectors';\r\nimport {\r\n  errorMessageSelector,\r\n  isPendingSelector as isPendingAuthSelector,\r\n} from './auth/selectors';\r\nimport { profilesLoadedSelector } from './profiles/selectors';\r\nimport { typingsLoadedSelector } from './typings/selectors';\r\n\r\nexport const isAuthenticatedSelector: Selector<TMainState, boolean> =\r\n  createSelector(\r\n    isPendingAuthSelector,\r\n    errorMessageSelector,\r\n    (isPending, errorMessage) => !isPending && !errorMessage\r\n  );\r\n\r\nexport const appDataLoadedSelector: Selector<TMainState, boolean> =\r\n  createSelector(\r\n    profilesLoadedSelector,\r\n    channelsLoadedSelector,\r\n    typingsLoadedSelector,\r\n    (profilesData, channelsData, typingsData) =>\r\n      profilesData && channelsData && typingsData\r\n  );\r\n","import { FunctionComponent, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport get from 'lodash/get';\r\n\r\n// components\r\nimport Chat from '../Chat/Chat';\r\nimport ModalNewUpdates from '../ModalNewUpdates/ModalNewUpdates';\r\nimport OnlineHandler from '../OnlineHandler/OnlineHandler';\r\nimport PageHeader from '../PageHeader/PageHeader';\r\nimport ProfilePicker from '../ProfilePickerSection/ProfilePickerSection';\r\nimport PageLoader from '../PageLoader/PageLoader';\r\n\r\n// store\r\nimport { appDataLoadedSelector } from '../../store/selectors';\r\nimport { getAttributeFromProfiles } from '../../store/profiles/selectors';\r\nimport { getAttributeFromChannels } from '../../store/channels/selectors';\r\nimport { setChannelId } from '../../store/channels/actions';\r\n\r\n// styles\r\nimport './page-styles.scss';\r\n\r\nconst Page: FunctionComponent<{}> = () => {\r\n  const dispatch = useDispatch();\r\n  const selectedProfileId = useSelector(\r\n    getAttributeFromProfiles('selectedProfileId')\r\n  );\r\n  const selectedChannelId = useSelector(\r\n    getAttributeFromChannels('selectedChannelId')\r\n  );\r\n  const appDataLoaded = useSelector(appDataLoadedSelector);\r\n  const channels = useSelector(getAttributeFromChannels('channels'));\r\n\r\n  useEffect(() => {\r\n    if (appDataLoaded && !selectedChannelId) {\r\n      const channelId = get(channels, '0.channelId');\r\n      dispatch(setChannelId(channelId));\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [appDataLoaded, selectedChannelId]);\r\n\r\n  if (!appDataLoaded) {\r\n    return <PageLoader />;\r\n  }\r\n\r\n  if (!selectedProfileId) {\r\n    return (\r\n      <>\r\n        <ModalNewUpdates />\r\n        <ProfilePicker />\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"Page\">\r\n      <OnlineHandler />\r\n      <PageHeader />\r\n      <Chat />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Page;\r\n","import { useEffect, useMemo, FunctionComponent } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\n\r\n// components\r\nimport ErrorPage from '../ErrorPage/ErrorPage';\r\nimport Page from '../Page/Page';\r\n\r\n// core\r\nimport ContextProvider from '../../core/ContextProvider/ContextProvider';\r\n\r\n// store\r\nimport {\r\n  errorMessageSelector,\r\n  isPendingSelector,\r\n} from '../../store/auth/selectors';\r\nimport { loginAction } from '../../store/auth/actions';\r\n\r\nconst App: FunctionComponent<{}> = () => {\r\n  const isPending = useSelector(isPendingSelector);\r\n  const dispatch = useDispatch();\r\n  const errorMessage = useSelector(errorMessageSelector);\r\n\r\n  const theme = useMemo(\r\n    () =>\r\n      createMuiTheme({\r\n        palette: {\r\n          type: 'dark',\r\n        },\r\n      }),\r\n    []\r\n  );\r\n\r\n  useEffect(() => {\r\n    const password = prompt('Please enter a password:');\r\n    indexedDB.deleteDatabase('firebaseLocalStorageDb');\r\n    dispatch(loginAction(password as string));\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  if (isPending) {\r\n    return null;\r\n  }\r\n\r\n  if (errorMessage) {\r\n    return <ErrorPage />;\r\n  }\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <ContextProvider>\r\n        <Page />\r\n      </ContextProvider>\r\n    </ThemeProvider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","// store\r\nimport { AuthActionsType } from './actionsType';\r\nimport { TLogin, TLoginSuccess, TLoginError } from './types';\r\n\r\nexport const loginAction = (payload: string): TLogin => ({\r\n  type: AuthActionsType.login,\r\n  payload,\r\n});\r\n\r\nexport const loginActionSuccess = (): TLoginSuccess => ({\r\n  type: AuthActionsType.loginSuccess,\r\n});\r\n\r\nexport const loginActionError = (payload: string): TLoginError => ({\r\n  type: AuthActionsType.loginError,\r\n  payload,\r\n});\r\n","export const config = {\r\n  apiKey: 'AIzaSyBYQ05TbRrP2wVEX7NDn5CWodoAnnkpcOY',\r\n  authDomain: 'comics-book.firebaseapp.com',\r\n  projectId: 'comics-book',\r\n  storageBucket: 'comics-book.appspot.com',\r\n  messagingSenderId: '426496482303',\r\n  appId: '1:426496482303:web:ebf257ff0a64a90f6ae5ca',\r\n};\r\n","const databaseErrorHandler = (error: string): void => {\r\n  // eslint-disable-next-line\r\n  console.error(error);\r\n};\r\n\r\nexport default databaseErrorHandler;\r\n","// @ts-nocheck\r\nconst getData = (values: any): void => {\r\n  const keys = Object.keys(values);\r\n  const data = [];\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    data.push(values[keys[i]]);\r\n  }\r\n  return data;\r\n};\r\n\r\nconst databaseSuccessHandler = (\r\n  response: any,\r\n  actions: (data: any) => void = null\r\n): void => {\r\n  const values = response.val();\r\n  actions(getData(values || {}));\r\n};\r\n\r\nexport default databaseSuccessHandler;\r\n","// @ts-nocheck\r\n// others\r\nimport { DatabaseColumns } from '../enums';\r\n\r\n// services\r\nimport databaseErrorHandler from './databaseErrorHandler';\r\nimport databaseSuccessHandler from './databaseSuccessHandler';\r\n\r\nconst databaseHandler = (\r\n  firebase: any,\r\n  actions: (data: any) => void,\r\n  ref: DatabaseColumns\r\n) => {\r\n  firebase\r\n    .database()\r\n    .ref(ref)\r\n    .on(\r\n      'value',\r\n      (response: any) => databaseSuccessHandler(response, actions),\r\n      databaseErrorHandler\r\n    );\r\n};\r\n\r\nexport default databaseHandler;\r\n","import { FunctionComponent, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport firebase from 'firebase';\r\n\r\n// others\r\nimport { config } from './constants';\r\nimport { DatabaseColumns } from './enums';\r\nimport { TChannel } from '../../store/channels/types';\r\nimport { TProfile } from '../../store/profiles/types';\r\nimport { TTyping } from '../../store/typings/types';\r\n\r\n// store\r\nimport { isAuthenticatedSelector } from '../../store/selectors';\r\nimport { fetchChannelsSuccess } from '../../store/channels/actions';\r\nimport { fetchProfilesSuccess } from '../../store/profiles/actions';\r\nimport { fetchTypingsSuccess } from '../../store/typings/actions';\r\n\r\n// services\r\nimport databaseHandler from './services/databaseHandler';\r\n\r\nconst Firebase: FunctionComponent<{}> = () => {\r\n  const isAuthenticated = useSelector(isAuthenticatedSelector);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    firebase.initializeApp(config);\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const profilesActions = (payload: Array<TProfile>): void => {\r\n      dispatch(fetchProfilesSuccess(payload));\r\n    };\r\n    const channelsActions = (payload: Array<TChannel>): void => {\r\n      dispatch(fetchChannelsSuccess(payload));\r\n    };\r\n    const typingsActions = (payload: Array<TTyping>): void => {\r\n      dispatch(fetchTypingsSuccess(payload));\r\n    };\r\n\r\n    if (isAuthenticated) {\r\n      setTimeout(() => {\r\n        databaseHandler(firebase, profilesActions, DatabaseColumns.profiles);\r\n        databaseHandler(firebase, channelsActions, DatabaseColumns.channels);\r\n        databaseHandler(firebase, typingsActions, DatabaseColumns.typings);\r\n      }, 8000);\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [isAuthenticated]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default Firebase;\r\n","// @ts-nocheck\r\n// others\r\nimport { TLoginError } from './types';\r\n\r\n// store\r\nimport { AuthActionsType } from './actionsType';\r\nimport { TAnyAction } from '../../types';\r\nimport { TAuthState } from './types';\r\n\r\nconst initialState: TAuthState = {\r\n  error: '',\r\n  isPending: true,\r\n};\r\n\r\nconst loginSuccess = (state: TAuthState): TAuthState => ({\r\n  ...state,\r\n  isPending: false,\r\n});\r\n\r\nconst loginError = (\r\n  state: TAuthState,\r\n  { payload: error }: TLoginError\r\n): TAuthState => ({\r\n  ...state,\r\n  error,\r\n  isPending: false,\r\n});\r\n\r\nconst auth = (\r\n  state: TAuthState = initialState,\r\n  action: TAnyAction\r\n): TAuthState => {\r\n  switch (action.type) {\r\n    case AuthActionsType.loginSuccess:\r\n      return loginSuccess(state, action);\r\n    case AuthActionsType.loginError:\r\n      return loginError(state, action);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default auth;\r\n","// @ts-nocheck\r\n// others\r\nimport {\r\n  TCreateChannelError,\r\n  TFetchChannelsSuccess,\r\n  TChannelsState,\r\n  TSendMessageError,\r\n  TSetChannelId,\r\n  TSetStatusTypingError,\r\n} from './types';\r\n\r\n// store\r\nimport { ChannelsActionsType } from './actionsType';\r\nimport { TAnyAction } from '../../types';\r\n\r\nconst initialState: TChannelsState = {\r\n  channels: null,\r\n  error: '',\r\n  isPending: true,\r\n  selectedChannelId: '',\r\n};\r\n\r\nconst createChannel = (state: TAuthState): TAuthState => ({\r\n  ...state,\r\n  isPending: true,\r\n});\r\n\r\nconst createChannelSuccess = (state: TAuthState): TAuthState => ({\r\n  ...state,\r\n  isPending: false,\r\n});\r\n\r\nconst createChannelError = (\r\n  state: TAuthState,\r\n  { payload: error }: TCreateChannelError\r\n): TAuthState => ({\r\n  ...state,\r\n  error,\r\n  isPending: false,\r\n});\r\n\r\nconst fetchChannelsSuccess = (\r\n  state: TAuthState,\r\n  { payload: channels }: TFetchChannelsSuccess\r\n): TAuthState => ({\r\n  ...state,\r\n  isPending: false,\r\n  channels,\r\n});\r\n\r\nconst fetchChannelsError = (state: TAuthState): TAuthState => ({\r\n  ...state,\r\n  isPending: false,\r\n});\r\n\r\nconst sendMessage = (state: TAuthState): TAuthState => ({\r\n  ...state,\r\n  isPending: true,\r\n});\r\n\r\nconst sendMessageError = (\r\n  state: TAuthState,\r\n  { payload: error }: TSendMessageError\r\n): TAuthState => ({\r\n  ...state,\r\n  error,\r\n  isPending: false,\r\n});\r\n\r\nconst setChannelId = (\r\n  state: TAuthState,\r\n  { payload: selectedChannelId }: TSetChannelId\r\n): TAuthState => ({\r\n  ...state,\r\n  selectedChannelId,\r\n});\r\n\r\nconst setStatusTypingError = (\r\n  state: TAuthState,\r\n  { payload: error }: TSetStatusTypingError\r\n): TAuthState => ({\r\n  ...state,\r\n  error,\r\n});\r\n\r\nconst channels = (\r\n  state: TAuthState = initialState,\r\n  action: TAnyAction\r\n): TAuthState => {\r\n  switch (action.type) {\r\n    case ChannelsActionsType.createChannel:\r\n      return createChannel(state, action);\r\n    case ChannelsActionsType.createChannelSuccess:\r\n      return createChannelSuccess(state, action);\r\n    case ChannelsActionsType.createChannelsError:\r\n      return createChannelError(state, action);\r\n    case ChannelsActionsType.fetchChannelsSuccess:\r\n      return fetchChannelsSuccess(state, action);\r\n    case ChannelsActionsType.fetchChannelsError:\r\n      return fetchChannelsError(state, action);\r\n    case ChannelsActionsType.sendMessage:\r\n      return sendMessage(state, action);\r\n    case ChannelsActionsType.sendMessageError:\r\n      return sendMessageError(state, action);\r\n    case ChannelsActionsType.setChannelId:\r\n      return setChannelId(state, action);\r\n    case ChannelsActionsType.setStatusTypingError:\r\n      return setStatusTypingError(state, action);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default channels;\r\n","// @ts-nocheck\r\n// others\r\nimport {\r\n  TCreateProfileError,\r\n  TFetchProfilesSuccess,\r\n  TProfilesState,\r\n  TSelectProfile,\r\n} from './types';\r\n\r\n// store\r\nimport { ProfilesActionsType } from './actionsType';\r\nimport { TAnyAction } from '../../types';\r\n\r\nconst initialState: TProfilesState = {\r\n  data: null,\r\n  error: '',\r\n  isPending: true,\r\n  selectedProfileId: '',\r\n};\r\n\r\nconst createProfile = (state: TAuthState): TAuthState => ({\r\n  ...state,\r\n  isPending: true,\r\n});\r\n\r\nconst createProfileSuccess = (state: TAuthState): TAuthState => ({\r\n  ...state,\r\n  isPending: false,\r\n});\r\n\r\nconst createProfileError = (\r\n  state: TAuthState,\r\n  { payload: error }: TCreateProfileError\r\n): TAuthState => ({\r\n  ...state,\r\n  error,\r\n  isPending: false,\r\n});\r\n\r\nconst fetchProfilesSuccess = (\r\n  state: TAuthState,\r\n  { payload: data }: TFetchProfilesSuccess\r\n): TAuthState => ({\r\n  ...state,\r\n  isPending: false,\r\n  data,\r\n});\r\n\r\nconst fetchProfilesError = (state: TAuthState): TAuthState => ({\r\n  ...state,\r\n  isPending: false,\r\n});\r\n\r\nconst setProfileId = (\r\n  state: TAuthState,\r\n  { payload: selectedProfileId }: TSelectProfile\r\n): TAuthState => ({\r\n  ...state,\r\n  selectedProfileId,\r\n});\r\n\r\nconst profiles = (\r\n  state: TAuthState = initialState,\r\n  action: TAnyAction\r\n): TAuthState => {\r\n  switch (action.type) {\r\n    case ProfilesActionsType.createProfile:\r\n      return createProfile(state, action);\r\n    case ProfilesActionsType.createProfileSuccess:\r\n      return createProfileSuccess(state, action);\r\n    case ProfilesActionsType.createProfileError:\r\n      return createProfileError(state, action);\r\n    case ProfilesActionsType.fetchProfilesSuccess:\r\n      return fetchProfilesSuccess(state, action);\r\n    case ProfilesActionsType.fetchProfilesError:\r\n      return fetchProfilesError(state, action);\r\n    case ProfilesActionsType.selectProfile:\r\n      return setProfileId(state, action);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default profiles;\r\n","// @ts-nocheck\r\n// others\r\nimport { TTypingsState, TSetStatusTypingError } from './types';\r\n\r\n// store\r\nimport { TypingsActionsType } from './actionsType';\r\nimport { TAnyAction } from '../../types';\r\n\r\nconst initialState: TTypingsState = {\r\n  error: '',\r\n  typings: null,\r\n};\r\n\r\nconst fetchTypingsSuccess = (\r\n  state: TAuthState,\r\n  { payload: typings }: TFetchChannelsSuccess\r\n): TAuthState => ({\r\n  ...state,\r\n  typings,\r\n});\r\n\r\nconst fetchTypingsError = (\r\n  state: TAuthState,\r\n  { payload: error }: TSetStatusTypingError\r\n): TAuthState => ({\r\n  ...state,\r\n  error,\r\n});\r\n\r\nconst setStatusTypingError = (\r\n  state: TAuthState,\r\n  { payload: error }: TSetStatusTypingError\r\n): TAuthState => ({\r\n  ...state,\r\n  error,\r\n});\r\n\r\nconst typings = (\r\n  state: TAuthState = initialState,\r\n  action: TAnyAction\r\n): TAuthState => {\r\n  switch (action.type) {\r\n    case TypingsActionsType.fetchTypingsSuccess:\r\n      return fetchTypingsSuccess(state, action);\r\n    case TypingsActionsType.fetchTypingsError:\r\n      return fetchTypingsError(state, action);\r\n    case TypingsActionsType.setStatusTypingError:\r\n      return setStatusTypingError(state, action);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default typings;\r\n","// @ts-nocheck\r\nimport { combineReducers } from 'redux';\r\n\r\n// store\r\nimport auth from './auth/reducer';\r\nimport channels from './channels/reducer';\r\nimport profiles from './profiles/reducer';\r\nimport typings from './typings/reducer';\r\n\r\nconst reducers = { auth, channels, profiles, typings };\r\n\r\nconst createRootReducer = () =>\r\n  combineReducers({\r\n    ...reducers,\r\n  });\r\n\r\nexport default createRootReducer;\r\n","// @ts-nocheck\r\nimport { PutEffect, put } from 'redux-saga/effects';\r\nimport firebase from 'firebase';\r\n\r\n// others\r\nimport { EMAIL } from '../../constants';\r\n\r\n// store\r\nimport { loginActionError, loginActionSuccess } from './actions';\r\n\r\nexport function* login(data: { payload: string }): Generator<PutEffect<any>> {\r\n  const password = data.payload;\r\n\r\n  try {\r\n    yield firebase.auth().signInWithEmailAndPassword(EMAIL, password);\r\n    yield put(loginActionSuccess());\r\n  } catch (error) {\r\n    const { code } = error;\r\n    yield put(loginActionError(code));\r\n  }\r\n}\r\n","import { all, AllEffect, ForkEffect, takeEvery } from 'redux-saga/effects';\r\n\r\n// store\r\nimport { login } from './saga';\r\nimport { AuthActionsType } from './actionsType';\r\n\r\nexport function* watchAuth(): Generator<AllEffect<ForkEffect<any>>> {\r\n  yield all([\r\n    // @ts-ignore\r\n    takeEvery(AuthActionsType.login, login),\r\n  ]);\r\n}\r\n","// @ts-nocheck\r\n// others\r\nimport { TChannel } from '../../../store/channels/types';\r\nimport { TProfile } from '../../../store/profiles/types';\r\n\r\nconst generateId = (data: Array<TProfile | TChannel>, keyId: string) => {\r\n  const result: Array<string> = [];\r\n  const characters =\r\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n\r\n  do {\r\n    result.splice(0, result.length);\r\n    for (let i = 0; i < 9; i++) {\r\n      result.push(\r\n        characters.charAt(Math.floor(Math.random() * characters.length))\r\n      );\r\n    }\r\n  } while (data.find((data) => data[keyId] === result.join('')));\r\n\r\n  return result.join('');\r\n};\r\n\r\nexport default generateId;\r\n","// @ts-nocheck\r\nimport { delay, PutEffect, put, select } from 'redux-saga/effects';\r\n\r\n// others\r\nimport { DatabaseColumns } from '../../components/Firebase/enums';\r\nimport { TChannel } from './types';\r\n\r\n// services\r\nimport generateId from '../../components/Firebase/services/generateId';\r\nimport getRefDatabase from '../../components/Firebase/services/getRefDatabase';\r\n\r\n// store\r\nimport {\r\n  createChannelSuccess,\r\n  createChannelError,\r\n  sendMessageSuccess,\r\n  sendMessageError,\r\n} from './actions';\r\nimport {\r\n  getAttributeFromChannels,\r\n  getAttributeFromSelectedChannel,\r\n} from './selectors';\r\n\r\nexport function* createChannel({ payload }): Generator<PutEffect<any>> {\r\n  const { name, shortcut } = payload;\r\n  const data = yield select(getAttributeFromChannels('channels'));\r\n  const channelId = generateId(data, 'channelId');\r\n\r\n  try {\r\n    yield delay(1000);\r\n    yield getRefDatabase([DatabaseColumns.channels]).set([\r\n      ...data,\r\n      { channelId, name, shortcut },\r\n    ]);\r\n    yield put(createChannelSuccess());\r\n  } catch (error) {\r\n    yield put(createChannelError(error));\r\n  }\r\n}\r\n\r\nexport function* sendMessage({ payload }): Generator<PutEffect<any>> {\r\n  const channels: Array<TChannel> = yield select(\r\n    getAttributeFromChannels('channels')\r\n  );\r\n  const selectedChannelId = yield select(\r\n    getAttributeFromChannels('selectedChannelId')\r\n  );\r\n  const messages =\r\n    (yield select(getAttributeFromSelectedChannel('messages'))) || [];\r\n  const indexOfChannel = channels.findIndex(\r\n    ({ channelId }) => channelId === selectedChannelId\r\n  );\r\n\r\n  try {\r\n    yield getRefDatabase([\r\n      DatabaseColumns.channels,\r\n      indexOfChannel,\r\n      'messages',\r\n    ]).set([...messages, payload]);\r\n    yield put(sendMessageSuccess());\r\n  } catch (error) {\r\n    yield put(sendMessageError(error));\r\n  }\r\n}\r\n","// @ts-nocheck\r\nimport { all, AllEffect, ForkEffect, takeEvery } from 'redux-saga/effects';\r\n\r\n// store\r\nimport { createChannel, sendMessage } from './saga';\r\nimport { ChannelsActionsType } from './actionsType';\r\n\r\nexport function* watchChannels(): Generator<AllEffect<ForkEffect<any>>> {\r\n  yield all([\r\n    takeEvery(ChannelsActionsType.createChannel, createChannel),\r\n    takeEvery(ChannelsActionsType.sendMessage, sendMessage),\r\n  ]);\r\n}\r\n","// @ts-nocheck\r\nimport firebase from 'firebase';\r\nimport { eventChannel } from 'redux-saga';\r\nimport { PutEffect, put, takeEvery } from 'redux-saga/effects';\r\nimport { TFileUploadPayload } from './types';\r\n\r\nexport function* uploadImage({ payload }): Generator<PutEffect<any>> {\r\n  const { action, file, path }: TFileUploadPayload = payload;\r\n\r\n  try {\r\n    const uploadTask = firebase.storage().ref(path).put(file);\r\n    const channel = eventChannel((emit) =>\r\n      uploadTask.on('state_changed', emit)\r\n    );\r\n    let src = '';\r\n\r\n    yield takeEvery(channel, () => {});\r\n    yield uploadTask;\r\n    yield uploadTask.snapshot.ref\r\n      .getDownloadURL()\r\n      .then((response) => (src = response));\r\n    yield put(action({ result: 'success', src }));\r\n  } catch (error) {\r\n    yield put(action({ error, result: 'error' }));\r\n  }\r\n}\r\n","// @ts-nocheck\r\nexport const REDUCER_KEY = 'common';\r\n\r\nexport enum CommonActionsType {\r\n  uploadFile = `${REDUCER_KEY}/uploadFile`,\r\n}\r\n","import { all, AllEffect, ForkEffect, takeEvery } from 'redux-saga/effects';\r\n\r\n// store\r\nimport { uploadImage } from './saga';\r\nimport { CommonActionsType } from './actionsType';\r\n\r\nexport function* watchCommonStore(): Generator<AllEffect<ForkEffect<any>>> {\r\n  yield all([\r\n    // @ts-ignore\r\n    takeEvery(CommonActionsType.uploadFile, uploadImage),\r\n  ]);\r\n}\r\n","// @ts-nocheck\r\n//others\r\nimport { TReturnablePayload } from '../../../store/common/types';\r\n\r\nconst afterUploadImageHandler = ({\r\n  error,\r\n  result,\r\n  src,\r\n}: TReturnablePayload) => {\r\n  if (result === 'error') {\r\n    throw error;\r\n  }\r\n  return src;\r\n};\r\n\r\nexport default afterUploadImageHandler;\r\n","// others\r\nimport { TFileUploadPayload, TUploadFile } from './types';\r\n\r\n// store\r\nimport { CommonActionsType } from './actionsType';\r\n\r\nexport const uploadFile = (payload: TFileUploadPayload): TUploadFile => ({\r\n  type: CommonActionsType.uploadFile,\r\n  payload,\r\n});\r\n","// @ts-nocheck\r\nimport { delay, PutEffect, put, select, take } from 'redux-saga/effects';\r\nimport { TProfileFormData } from './types';\r\n\r\n// others\r\nimport { DatabaseColumns } from '../../components/Firebase/enums';\r\nimport { StoragePath } from '../../enums';\r\nimport { TProfile } from './types';\r\nimport { UPDATE_DELAY_TIME } from '../../constants';\r\n\r\n// services\r\nimport afterUploadImageHandler from '../../components/Firebase/services/afterUploadImageHandler';\r\nimport generateId from '../../components/Firebase/services/generateId';\r\nimport getRefDatabase from '../../components/Firebase/services/getRefDatabase';\r\n\r\n// store\r\nimport { ProfilesActionsType } from './actionsType';\r\nimport {\r\n  createProfileSuccess,\r\n  createProfileError,\r\n  uploadImageFinished,\r\n  selectProfileError,\r\n  updateTimeProfileError,\r\n} from './actions';\r\nimport { uploadFile } from '../common/actions';\r\nimport { getAttributeFromProfiles } from './selectors';\r\n\r\nexport function* createProfile({ payload }): Generator<PutEffect<any>> {\r\n  const {\r\n    backToProfileList,\r\n    name,\r\n    imageData: { file },\r\n  }: TProfileFormData = payload;\r\n  const path = `${StoragePath.profiles}/${name}`;\r\n  const data = yield select(getAttributeFromProfiles('data'));\r\n  const profileId = generateId(data, 'profileId');\r\n\r\n  try {\r\n    yield put(uploadFile({ action: uploadImageFinished, path, file }));\r\n\r\n    const { payload } = yield take(ProfilesActionsType.uploadImageFinished);\r\n    const src = afterUploadImageHandler(payload);\r\n\r\n    yield getRefDatabase([DatabaseColumns.profiles]).set([\r\n      ...data,\r\n      {\r\n        lastUpdateTime: new Date().getTime(),\r\n        name,\r\n        online: false,\r\n        profileId,\r\n        src,\r\n      },\r\n    ]);\r\n    yield put(createProfileSuccess());\r\n    yield backToProfileList();\r\n  } catch (error) {\r\n    yield put(createProfileError(error));\r\n  }\r\n}\r\n\r\nexport function* selectProfile({\r\n  payload: selectedProfileId,\r\n}): Generator<PutEffect<any>> {\r\n  const profiles: Array<TProfile> = yield select(\r\n    getAttributeFromProfiles('data')\r\n  );\r\n  const indexProfile = profiles.findIndex(\r\n    ({ profileId }) => profileId === selectedProfileId\r\n  );\r\n\r\n  try {\r\n    yield getRefDatabase([\r\n      DatabaseColumns.profiles,\r\n      indexProfile,\r\n      'online',\r\n    ]).set(true);\r\n  } catch (error) {\r\n    yield put(selectProfileError(error));\r\n  }\r\n}\r\n\r\nexport function* updateTimeProfile({\r\n  payload: selectedProfileId,\r\n}): Generator<PutEffect<any>> {\r\n  const data: Array<TProfile> = yield select(getAttributeFromProfiles('data'));\r\n  const indexProfile = data.findIndex(\r\n    ({ profileId }) => profileId === selectedProfileId\r\n  );\r\n\r\n  try {\r\n    yield getRefDatabase([\r\n      DatabaseColumns.profiles,\r\n      indexProfile,\r\n      'lastUpdateTime',\r\n    ]).set(new Date().getTime());\r\n    yield delay(UPDATE_DELAY_TIME);\r\n    yield updateTimeProfile({ payload: selectedProfileId });\r\n  } catch (error) {\r\n    yield put(updateTimeProfileError(error));\r\n  }\r\n}\r\n","// @ts-nocheck\r\nimport { all, AllEffect, ForkEffect, takeEvery } from 'redux-saga/effects';\r\n\r\n// store\r\nimport { createProfile, selectProfile, updateTimeProfile } from './saga';\r\nimport { ProfilesActionsType } from './actionsType';\r\n\r\nexport function* watchProfiles(): Generator<AllEffect<ForkEffect<any>>> {\r\n  yield all([\r\n    // @ts-ignore\r\n    takeEvery(ProfilesActionsType.createProfile, createProfile),\r\n    takeEvery(ProfilesActionsType.selectProfile, selectProfile),\r\n    takeEvery(ProfilesActionsType.updateTimeProfile, updateTimeProfile),\r\n  ]);\r\n}\r\n","// @ts-nocheck\r\nimport { PutEffect, put, select } from 'redux-saga/effects';\r\n\r\n// others\r\nimport { DatabaseColumns } from '../../components/Firebase/enums';\r\nimport { TChannel, TTyping } from './types';\r\n\r\n// services\r\nimport getRefDatabase from '../../components/Firebase/services/getRefDatabase';\r\nimport { getTypingsWithRemovedItem } from '../../components/Chat/ChatInput/services';\r\n\r\n// store\r\nimport { getAttributeFromTypings } from './selectors';\r\nimport { setStatusTypingError } from './actions';\r\n\r\nexport function* setStatusTyping({\r\n  payload,\r\n}: TTyping & { mode: 'add' | 'remove' }): Generator<PutEffect<any>> {\r\n  const { channelId, mode, profileId, profileName, time } = payload;\r\n  const typings: Array<TChannel> =\r\n    (yield select(getAttributeFromTypings('typings'))) || [];\r\n\r\n  try {\r\n    yield getRefDatabase([DatabaseColumns.typings]).set(\r\n      mode === 'add'\r\n        ? [...typings, { channelId, profileId, profileName, time }]\r\n        : getTypingsWithRemovedItem(typings, profileId)\r\n    );\r\n  } catch (error) {\r\n    yield put(setStatusTypingError(error));\r\n  }\r\n}\r\n","// @ts-nocheck\r\nimport { all, AllEffect, ForkEffect, takeEvery } from 'redux-saga/effects';\r\n\r\n// store\r\nimport { setStatusTyping } from './saga';\r\nimport { TypingsActionsType } from './actionsType';\r\n\r\nexport function* watchTypings(): Generator<AllEffect<ForkEffect<any>>> {\r\n  yield all([takeEvery(TypingsActionsType.setStatusTyping, setStatusTyping)]);\r\n}\r\n","// @ts-nocheck\r\nimport { SagaMiddleware } from 'redux-saga';\r\n\r\n// store\r\nimport { watchAuth } from './auth/watch';\r\nimport { watchChannels } from './channels/watch';\r\nimport { watchCommonStore } from './common/watch';\r\nimport { watchProfiles } from './profiles/watch';\r\nimport { watchTypings } from './typings/watch';\r\n\r\nconst watches = [\r\n  watchAuth,\r\n  watchChannels,\r\n  watchCommonStore,\r\n  watchProfiles,\r\n  watchTypings,\r\n];\r\n\r\nconst sagaMiddlewareRuns = (sagaMiddleware: SagaMiddleware): void => {\r\n  for (const watch of watches) sagaMiddleware.run(watch);\r\n};\r\n\r\nexport default sagaMiddlewareRuns;\r\n","// @ts-nocheck\r\nimport {\r\n  Action,\r\n  applyMiddleware,\r\n  CombinedState,\r\n  createStore,\r\n  Store,\r\n} from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport thunk from 'redux-thunk';\r\n\r\n// store\r\nimport reducers from './reducers';\r\nimport sagaMiddlewareRuns from './watchers';\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst configureStore = (): Store<CombinedState<any>, Action> => {\r\n  const store = createStore(\r\n    reducers(),\r\n    {},\r\n    composeWithDevTools(applyMiddleware(...[thunk], sagaMiddleware))\r\n  );\r\n  sagaMiddlewareRuns(sagaMiddleware);\r\n\r\n  return store;\r\n};\r\n\r\nexport default configureStore;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\n\r\n// components\r\nimport App from './components/App/App';\r\nimport Firebase from './components/Firebase/Firebase';\r\n\r\n// store\r\nimport configureStore from './store/configureStore';\r\n\r\n// styles\r\nimport './index.scss';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={configureStore()}>\r\n      <Firebase />\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}