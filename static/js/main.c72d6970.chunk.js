(this["webpackJsonpcomics-book"]=this["webpackJsonpcomics-book"]||[]).push([[0],{185:function(e,t,r){},187:function(e,t,r){},188:function(e,t,r){},189:function(e,t,r){},190:function(e,t,r){},191:function(e,t,r){},193:function(e,t,r){},317:function(e,t,r){},318:function(e,t,r){},319:function(e,t,r){},320:function(e,t,r){},321:function(e,t,r){},322:function(e,t,r){},329:function(e,t,r){},330:function(e,t,r){"use strict";r.r(t);var c,n,a=r(0),i=r.n(a),s=r(17),o=r.n(s),l=r(23),u=r(167),f=r(369),d=r.p+"static/media/error.6a233495.svg",j=(r(185),r(5)),b=function(){return Object(j.jsx)("section",{className:"ErrorPage",children:Object(j.jsx)("img",{alt:"background-error",className:"ErrorPage__background",src:d})})},m=r(30),p=r.p+"static/media/send-icon.d7969ca4.svg",O=(r(187),Object(a.forwardRef)((function(e,t){var r=e.inputHandler,c=Object(a.useState)(!0),n=Object(m.a)(c,2),i=n[0],s=n[1];return Object(j.jsxs)("div",{className:"ChatInput",ref:t,children:[Object(j.jsx)("p",{className:"ChatInput__text-field",contentEditable:!0,onBlur:function(e){""===e.target.innerText&&s(!0)},onFocus:function(){return s(!1)},onInput:r,suppressContentEditableWarning:!0}),i&&Object(j.jsx)("span",{className:"ChatInput__placeholder",children:"Message #Meetings:"}),Object(j.jsx)("img",{alt:"send-icon",className:"ChatInput__send-icon",src:p})]})}))),g=(r(188),Object(a.forwardRef)((function(e,t){return Object(j.jsx)("div",{className:"ChatMessages",ref:t})})));!function(e){e.profileId="profileId",e.marginOffset="MARGIN_OFFSET"}(c||(c={})),function(e){e.profiles="PROFILES"}(n||(n={}));var v,h=Object(a.createContext)({margin:0,setMargin:function(){}}),P=function(e){var t=e.children,r=Object(a.useState)(parseInt(localStorage.getItem(c.marginOffset)||0)),n=Object(m.a)(r,2),i=n[0],s=n[1];return Object(j.jsx)(h.Provider,{value:{margin:i,setMargin:function(e){if(i>0||-1!==e){var t=i+e;s(t),localStorage.setItem(c.marginOffset,t)}}},children:t})},x=(r(189),function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),r=Object(a.useContext)(h).margin;return Object(j.jsxs)("section",{className:"Chat",style:{height:"calc(100vh - ".concat(80+r,"px)")},children:[Object(j.jsx)(g,{ref:e}),Object(j.jsx)(O,{inputHandler:function(){var r=t.current.clientHeight;e.current.style.height="calc(100% - ".concat(r,"px)")},ref:t})]})}),_=r.p+"static/media/close-outlined-icon.91205169.svg",k=(r(190),function(e){var t=e.visible,r=e.setVisible,c=function(){return r(!1)};return Object(j.jsxs)("div",{className:"NavMenu ".concat(t&&"NavMenu--visible"),onClick:c,children:[Object(j.jsx)("div",{className:"NavMenu__background ".concat(t&&"NavMenu__background--visible")}),Object(j.jsx)("div",{className:"NavMenu__container ".concat(t&&"NavMenu__container--visible"),onClick:function(e){return e.stopPropagation()},children:Object(j.jsx)("div",{className:"NavMenu__header",children:Object(j.jsx)("div",{className:"NavMenu__button-close",children:Object(j.jsx)("img",{alt:"close-outlined-icon",onClick:c,src:_})})})})]})}),N=r(168),y=r(371),S=r.p+"static/media/close-icon.51d90ac8.svg",I=r.p+"static/media/gear-icon.7598d1ce.svg",w=r.p+"static/media/modify-size-icon.54599b76.svg",E=(r(191),function(){var e=Object(a.useState)(null),t=Object(m.a)(e,2),r=t[0],c=t[1],n=Object(a.useContext)(h).setMargin,i=function(){c(null)};return Object(j.jsxs)("div",{className:"PageHeaderSettingsMenu",children:[Object(j.jsx)("img",{alt:"gear-icon",onClick:function(e){c(e.currentTarget)},src:I}),Object(j.jsxs)(N.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:i,children:[Object(j.jsxs)(y.a,{className:"PageHeaderSettingsMenu__item",onClick:function(){return n(1)},children:["Up",Object(j.jsx)("img",{alt:"gear-icon",src:w})]}),Object(j.jsxs)(y.a,{className:"PageHeaderSettingsMenu__item",onClick:function(){return n(-1)},children:["Down",Object(j.jsx)("img",{alt:"reverted-gear-icon",className:"PageHeaderSettingsMenu__icon-rotate",src:w})]}),Object(j.jsxs)(y.a,{className:"PageHeaderSettingsMenu__item",onClick:i,children:["Close",Object(j.jsx)("img",{alt:"close-icon",src:S})]})]})]})}),C=r.p+"static/media/hamburger-menu.85ddbb0d.svg",M=(r(193),function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),r=t[0],c=t[1];return Object(j.jsxs)("header",{className:"PageHeader",children:[Object(j.jsxs)("div",{className:"PageHeader__left-column",children:[Object(j.jsx)("div",{className:"PageHeader__channel-picker",children:"ME"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"PageHeader__title",children:"#Meetings"}),Object(j.jsx)("p",{className:"PageHeader__users",children:"2 Brothers online"})]})]}),Object(j.jsxs)("div",{className:"PageHeader__right-column",children:[Object(j.jsx)(E,{}),Object(j.jsx)("img",{alt:"hamburger-menu",className:"PageHeader__hamburger-menu",onClick:function(){return c(!0)},src:C})]}),Object(j.jsx)(k,{visible:r,setVisible:c})]})}),F=r(22),H=r(370),L=r(367),D=r(368),R=r.p+"static/media/back.3f83d067.svg",A=r.p+"static/media/button-picture.9659aaae.svg",T=r.p+"static/media/empty-image.16de0a9b.svg",B=function(e,t){var r=new FileReader,c=e.target.files;r.onload=function(e){t({file:c[0],src:e.target.result})},r.readAsDataURL(c[0])},z=r(37),W=r.n(z),U=r(162),V=r.n(U),G=r(163),J=r.n(G),Y=r(35),K="profiles";!function(e){e[e.createProfile="".concat(K,"/createProfile")]="createProfile",e[e.createProfileSuccess="".concat(K,"/createProfileSuccess")]="createProfileSuccess",e[e.createProfileError="".concat(K,"/createProfileError")]="createProfileError",e[e.fetchProfilesSuccess="".concat(K,"/fetchProfilesSuccess")]="fetchProfilesSuccess",e[e.fetchProfilesError="".concat(K,"/fetchProfilesError")]="fetchProfilesError",e[e.uploadImageFinished="".concat(K,"/uploadImageFinished")]="uploadImageFinished",e[e.setProfileId="".concat(K,"/setProfileId")]="setProfileId"}(v||(v={}));var Q,X=W()(K),q=Object(Y.a)(X,W()("isPending")),Z=Object(Y.a)(X,J()(V.a,W()("data"))),$=function(e){return Object(Y.a)(X,W()(e))},ee=(r(317),function(e){var t=e.clickHandler,r=e.name,c=void 0===r?"":r,n=e.imageData,i=void 0===n?null:n,s=e.submitHandler,o=e.title,u=Object(l.c)(q),f=Object(a.useRef)(null),d=Object(a.useState)(i),b=Object(m.a)(d,2),p=b[0],O=b[1],g=Object(a.useState)(c),v=Object(m.a)(g,2),h=v[0],P=v[1];return Object(j.jsxs)("div",{className:"ProfileForm__form-wrapper",children:[Object(j.jsxs)("h2",{className:"ProfileForm__title",children:[Object(j.jsx)("img",{alt:"back-icon",className:"ProfileForm__icon",onClick:t,src:R}),o]}),Object(j.jsxs)("form",{className:"ProfileForm",onSubmit:function(e){e.preventDefault(),p&&h&&s({backToProfileList:t,imageData:p,name:h})},children:[Object(j.jsxs)("div",{className:"ProfileForm__avatar ".concat(p?"ProfileForm__avatar--selected":""),children:[p?Object(j.jsx)("img",{alt:"avatar",className:"ProfileForm__image",src:p.src}):Object(j.jsx)("img",{alt:"empty",className:"ProfileForm__empty-picture",src:T}),Object(j.jsx)("img",{alt:"button-icon",className:"ProfileForm__button-picture",onClick:function(){return f.current.click()},src:A}),Object(j.jsx)("input",{className:"ProfileForm__input-file",onChange:function(e){return B(e,O)},ref:f,type:"file"})]}),Object(j.jsx)(H.a,{className:"ProfileForm__input-name",onChange:function(e){return P(e.target.value)},label:"Profile name:",value:h}),Object(j.jsxs)(L.a,{className:"ProfileForm__submit-button",color:"primary",disabled:u,size:"large",type:"submit",variant:"contained",children:["Create Profile",u&&Object(j.jsx)(D.a,{className:"ProfileForm__spinner",color:"primary",size:20})]})]})]})}),te=function(e){return{type:v.createProfileError,payload:e}},re=function(e){return{type:v.uploadImageFinished,payload:e}},ce=function(e){var t=Object.assign({},e),r=Object(l.b)();return Object(j.jsx)(ee,Object(F.a)({submitHandler:function(e){return r((t=e,{type:v.createProfile,payload:t}));var t},title:"Create Profile:"},t))},ne=r.p+"static/media/plus.c453ef1e.svg",ae=(r(318),function(e){var t=e.clickHandler,r=e.mode,c=void 0===r?"add":r,n=e.name,a=e.src;return Object(j.jsxs)("section",{className:"ProfilePicker ProfilePicker--".concat(c),onClick:t,children:[Object(j.jsx)("p",{className:"ProfilePicker__title ProfilePicker--".concat(c,"__title"),children:n||"Create:"}),Object(j.jsx)("div",{className:"ProfilePicker__button ProfilePicker--".concat(c,"__button"),children:Object(j.jsx)("img",{alt:n?"".concat(n,"-avatar"):"icon",className:"ProfilePicker__image ProfilePicker--".concat(c,"__image"),src:a||ne})})]})});!function(e){e.createProfile="createProfile",e.listProfiles="listProfiles"}(Q||(Q={}));r(319);var ie,se=function(e){var t=e.clickHandler,r=Object(l.b)(),c=Object(l.c)($("data"));return Object(j.jsxs)("section",{className:"ProfilePickerList",children:[Object(j.jsx)("h1",{className:"ProfilePickerList__title",children:"Choose a brother-in-law:"}),Object(j.jsx)("p",{className:"ProfilePickerList__description",children:"Select a profile to start a conversation with your brother-in-law."}),Object(j.jsxs)("div",{className:"ProfilePickerList__pickers",children:[Object(j.jsx)(ae,{clickHandler:function(){return t(Q.createProfile)}}),c.map((function(e){var t=e.name,c=e.profileId,n=e.src;return Object(j.jsx)(ae,{clickHandler:function(){return r((e=c,{type:v.setProfileId,payload:e}));var e},mode:"select",name:t,src:n},c)}))]})]})},oe=(r(320),function(){var e=Object(a.useState)(Q.listProfiles),t=Object(m.a)(e,2),r=t[0],c=t[1];return Object(j.jsx)("section",{className:"ProfilePickerSection",children:r===Q.listProfiles?Object(j.jsx)(se,{clickHandler:function(e){return c(e)}}):Object(j.jsx)(ce,{clickHandler:function(){return c(Q.listProfiles)}})})}),le=r.p+"static/media/gentleman.ff3326dc.svg",ue=(r(321),function(e){e.appDataLoaded;return Object(j.jsxs)("div",{className:"PageLoader",children:[Object(j.jsx)("h2",{className:"PageLoader__title",children:"WELCOME GENTLEMAN"}),Object(j.jsx)("img",{alt:"gentleman-logo",src:le}),Object(j.jsx)("div",{className:"PageLoader__spinner",children:Array.from(Array(12)).map((function(e,t){return Object(j.jsx)("div",{className:"PageLoader__circle PageLoader__circle--".concat(t+1)},t)}))})]})}),fe="auth";!function(e){e[e.login="".concat(fe,"/login")]="login",e[e.loginSuccess="".concat(fe,"/loginSuccess")]="loginSuccess",e[e.loginError="".concat(fe,"/loginError")]="loginError"}(ie||(ie={}));var de,je=W()(fe),be=Object(Y.a)(je,W()("error")),me=Object(Y.a)(je,W()("isPending")),pe=Object(Y.a)(me,be,(function(e,t){return!e&&!t})),Oe=Object(Y.a)(Z,(function(e){return e})),ge=(r(322),function(){var e=Object(l.c)($("seletedProfileId")),t=Object(l.c)(Oe);return t?e?Object(j.jsxs)("div",{className:"Page",children:[Object(j.jsx)(M,{}),Object(j.jsx)(x,{})]}):Object(j.jsx)(oe,{}):Object(j.jsx)(ue,{appDataLoaded:t})}),ve=function(e){return{type:ie.loginError,payload:e}},he=function(){var e=Object(l.c)(me),t=Object(l.b)(),r=Object(l.c)(be),c=Object(a.useMemo)((function(){return Object(u.a)({palette:{type:"dark"}})}),[]);return Object(a.useEffect)((function(){var e,r=prompt("Please enter a password:");indexedDB.deleteDatabase("firebaseLocalStorageDb"),t((e=r,{type:ie.login,payload:e}))}),[]),e?null:r?Object(j.jsx)(b,{}):Object(j.jsx)(f.a,{theme:c,children:Object(j.jsx)(P,{children:Object(j.jsx)(ge,{})})})},Pe=r(36),xe={apiKey:"AIzaSyBYQ05TbRrP2wVEX7NDn5CWodoAnnkpcOY",authDomain:"comics-book.firebaseapp.com",projectId:"comics-book",storageBucket:"comics-book.appspot.com",messagingSenderId:"426496482303",appId:"1:426496482303:web:ebf257ff0a64a90f6ae5ca"};!function(e){e.profiles="profiles"}(de||(de={}));var _e=function(e){console.error(e)},ke=function(e){for(var t=Object.keys(e),r=[],c=0;c<t.length;c++)r.push(e[t[c]]);return r},Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.val();t(ke(r||{}))},ye=function(e,t,r){e.database().ref(r).on("value",(function(e){return Ne(e,t)}),_e)},Se=function(){var e=Object(l.c)(pe),t=Object(l.b)();return Object(a.useEffect)((function(){Pe.a.initializeApp(xe)}),[]),Object(a.useEffect)((function(){var r=function(e){t(function(e){return{type:v.fetchProfilesSuccess,payload:e}}(e))};e&&setTimeout((function(){ye(Pe.a,r,de.profiles)}),5e3)}),[e]),null},Ie=r(40),we=r(164),Ee=r(80),Ce=r(165),Me={error:"",isPending:!0,profileId:""},Fe=function(e,t){var r=t.payload;return Object(F.a)(Object(F.a)({},e),{},{isPending:!1,profileId:r})},He=function(e,t){var r=t.payload;return Object(F.a)(Object(F.a)({},e),{},{error:r,isPending:!1})},Le={data:null,error:"",isPending:!0,seletedProfileId:""},De=function(e){return Object(F.a)(Object(F.a)({},e),{},{isPending:!0})},Re=function(e){return Object(F.a)(Object(F.a)({},e),{},{isPending:!1})},Ae=function(e,t){var r=t.payload;return Object(F.a)(Object(F.a)({},e),{},{error:r,isPending:!1})},Te=function(e,t){var r=t.payload;return Object(F.a)(Object(F.a)({},e),{},{isPending:!1,data:r})},Be=function(e){return Object(F.a)(Object(F.a)({},e),{},{isPending:!1})},ze=function(e,t){var r=t.payload;return Object(F.a)(Object(F.a)({},e),{},{seletedProfileId:r})},We={auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie.loginSuccess:return Fe(e,t);case ie.loginError:return He(e,t);default:return e}},profiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.createProfile:return De(e);case v.createProfileSuccess:return Re(e);case v.createProfileError:return Ae(e,t);case v.fetchProfilesSuccess:return Te(e,t);case v.fetchProfilesError:return Be(e);case v.setProfileId:return ze(e,t);default:return e}}},Ue=function(){return Object(Ie.combineReducers)(Object(F.a)({},We))},Ve=r(166),Ge=r(24),Je=r.n(Ge),Ye=r(21),Ke=Je.a.mark(Qe);function Qe(e){var t,r,n;return Je.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=localStorage.getItem(c.profileId)||"",a.prev=2,a.next=5,Pe.a.auth().signInWithEmailAndPassword("eryk.sandecki@gmail.com",t);case 5:return a.next=7,Object(Ye.b)((i=r,{type:ie.loginSuccess,payload:i}));case 7:a.next=14;break;case 9:return a.prev=9,a.t0=a.catch(2),n=a.t0.code,a.next=14,Object(Ye.b)(ve(n));case 14:case"end":return a.stop()}var i}),Ke,null,[[2,9]])}var Xe=Je.a.mark(qe);function qe(){return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ye.a)([Object(Ye.e)(ie.login,Qe)]);case 2:case"end":return e.stop()}}),Xe)}var Ze=Je.a.mark($e);function $e(e){var t,r,c,n,a,i,s;return Je.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.action,c=t.file,n=t.path,o.prev=2,a=Pe.a.storage().ref(n).put(c),i=Object(Ee.b)((function(e){return a.on("state_changed",e)})),s="",o.next=8,Object(Ye.e)(i,(function(){}));case 8:return o.next=10,a;case 10:return o.next=12,a.snapshot.ref.getDownloadURL().then((function(e){return s=e}));case 12:return o.next=14,Object(Ye.b)(r({result:"success",src:s}));case 14:o.next=20;break;case 16:return o.prev=16,o.t0=o.catch(2),o.next=20,Object(Ye.b)(r({error:o.t0,result:"error"}));case 20:case"end":return o.stop()}}),Ze,null,[[2,16]])}var et;!function(e){e[e.uploadFile="".concat("common","/uploadFile")]="uploadFile"}(et||(et={}));var tt=Je.a.mark(rt);function rt(){return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ye.a)([Object(Ye.e)(et.uploadFile,$e)]);case 2:case"end":return e.stop()}}),tt)}var ct=r(169),nt=function(e){var t=e.error,r=e.result,c=e.src;if("error"===r)throw t;return c},at=function(e){var t=[],r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";do{t.splice(0,t.length);for(var c=0;c<9;c++)t.push(r.charAt(Math.floor(Math.random()*r.length)))}while(e.find((function(e){return e.profileId===t.join("")})));return t.join("")},it=function(e){for(var t=Pe.a.database().ref(e[0]),r=1;r<e.length;r++)t=t.child(e[r]);return t},st=function(e){return{type:et.uploadFile,payload:e}},ot=Je.a.mark(lt);function lt(e){var t,r,c,a,i,s,o,l,u,f;return Je.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,r=t.backToProfileList,c=t.name,a=t.imageData.file,i="".concat(n.profiles,"/").concat(c),d.next=5,Object(Ye.c)($("data"));case 5:return s=d.sent,o=at(s),d.prev=7,d.next=10,Object(Ye.b)(st({action:re,path:i,file:a}));case 10:return d.next=12,Object(Ye.d)(v.uploadImageFinished);case 12:return l=d.sent,u=l.payload,f=nt(u),d.next=17,it([de.profiles]).set([].concat(Object(ct.a)(s),[{name:c,online:!1,profileId:o,src:f}]));case 17:return d.next=19,Object(Ye.b)({type:v.createProfileSuccess});case 19:return d.next=21,r();case 21:d.next=27;break;case 23:return d.prev=23,d.t0=d.catch(7),d.next=27,Object(Ye.b)(te(d.t0));case 27:case"end":return d.stop()}}),ot,null,[[7,23]])}var ut=Je.a.mark(ft);function ft(){return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ye.a)([Object(Ye.e)(v.createProfile,lt)]);case 2:case"end":return e.stop()}}),ut)}var dt=[qe,rt,ft],jt=function(e){var t,r=Object(Ve.a)(dt);try{for(r.s();!(t=r.n()).done;){var c=t.value;e.run(c)}}catch(n){r.e(n)}finally{r.f()}},bt=Object(Ee.a)(),mt=function(){var e=Object(Ie.createStore)(Ue(),{},Object(we.composeWithDevTools)(Ie.applyMiddleware.apply(void 0,[Ce.a].concat([bt]))));return jt(bt),e};r(329);o.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsxs)(l.a,{store:mt(),children:[Object(j.jsx)(Se,{}),Object(j.jsx)(he,{})]})}),document.getElementById("root"))}},[[330,1,2]]]);
//# sourceMappingURL=main.c72d6970.chunk.js.map