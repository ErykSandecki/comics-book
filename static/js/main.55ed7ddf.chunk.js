(this["webpackJsonpcomics-book"]=this["webpackJsonpcomics-book"]||[]).push([[0],{177:function(e,t,r){},179:function(e,t,r){},180:function(e,t,r){},181:function(e,t,r){},182:function(e,t,r){},183:function(e,t,r){},307:function(e,t,r){},309:function(e,t,r){},310:function(e,t,r){},311:function(e,t,r){},312:function(e,t,r){},313:function(e,t,r){},320:function(e,t,r){},321:function(e,t,r){"use strict";r.r(t);var c,a=r(0),n=r.n(a),i=r(17),o=r.n(i),s=r(23),l=r(162),u=r(357),f=r.p+"static/media/error.6a233495.svg",d=(r(177),r(5)),b=function(){return Object(d.jsx)("section",{className:"ErrorPage",children:Object(d.jsx)("img",{alt:"background-error",className:"ErrorPage__background",src:f})})},j=r.p+"static/media/send-icon.d7969ca4.svg",p=(r(179),Object(a.forwardRef)((function(e,t){var r=e.changeHandler;return Object(d.jsxs)("div",{className:"ChatInput",ref:t,children:[Object(d.jsx)("p",{className:"ChatInput__text-field",contentEditable:!0,onInput:r,suppressContentEditableWarning:!0}),Object(d.jsx)("img",{alt:"send-icon",className:"ChatInput__send-icon",src:j})]})}))),m=(r(180),Object(a.forwardRef)((function(e,t){return Object(d.jsx)("div",{className:"ChatMessages",ref:t})}))),O=(r(181),function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null);return Object(d.jsxs)("section",{className:"Chat",children:[Object(d.jsx)(m,{ref:e}),Object(d.jsx)(p,{changeHandler:function(r){var c=t.current.clientHeight;e.current.style.height="calc(100% - ".concat(c,"px)")},ref:t})]})}),v=r(44),g=r.p+"static/media/close.91205169.svg",h=(r(182),function(e){var t=e.visible,r=e.setVisible,c=function(){return r(!1)};return Object(d.jsxs)("div",{className:"NavMenu ".concat(t&&"NavMenu--visible"),onClick:c,children:[Object(d.jsx)("div",{className:"NavMenu__background ".concat(t&&"NavMenu__background--visible")}),Object(d.jsx)("div",{className:"NavMenu__container ".concat(t&&"NavMenu__container--visible"),onClick:function(e){return e.stopPropagation()},children:Object(d.jsx)("div",{className:"NavMenu__header",children:Object(d.jsx)("div",{className:"NavMenu__button-close",children:Object(d.jsx)("img",{alt:"close-icon",onClick:c,src:g})})})})]})}),P=r.p+"static/media/hamburger-menu.85ddbb0d.svg",x=(r(183),function(){var e=Object(a.useState)(!1),t=Object(v.a)(e,2),r=t[0],c=t[1];return Object(d.jsxs)("header",{className:"PageHeader",children:[Object(d.jsxs)("div",{className:"PageHeader__content",children:[Object(d.jsx)("div",{className:"PageHeader__channel-picker",children:"ME"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{className:"PageHeader__title",children:"Gentleman App - Meetings"}),Object(d.jsx)("p",{className:"PageHeader__users",children:"2 Brothers-in-law online"})]})]}),Object(d.jsx)("img",{alt:"hamburger-menu",className:"PageHeader__hamburger-menu",onClick:function(){return c(!0)},src:P}),Object(d.jsx)(h,{visible:r,setVisible:c})]})}),_=r(22),k=r(358),N=r(359),y=r(356),I=r.p+"static/media/back.3f83d067.svg",w=r.p+"static/media/button-picture.9659aaae.svg",E=r.p+"static/media/empty-image.16de0a9b.svg",S=function(e,t){var r=new FileReader,c=e.target.files;r.onload=function(e){t({file:c[0],src:e.target.result})},r.readAsDataURL(c[0])},F=r(35),C=r.n(F),L=r(157),H=r.n(L),M=r(158),D=r.n(M),R=r(31),A="profiles";!function(e){e[e.createProfile="".concat(A,"/createProfile")]="createProfile",e[e.createProfileSuccess="".concat(A,"/createProfileSuccess")]="createProfileSuccess",e[e.createProfileError="".concat(A,"/createProfileError")]="createProfileError",e[e.fetchProfilesSuccess="".concat(A,"/fetchProfilesSuccess")]="fetchProfilesSuccess",e[e.fetchProfilesError="".concat(A,"/fetchProfilesError")]="fetchProfilesError",e[e.uploadImageFinished="".concat(A,"/uploadImageFinished")]="uploadImageFinished",e[e.setProfileId="".concat(A,"/setProfileId")]="setProfileId"}(c||(c={}));var T,B=C()(A),W=Object(R.a)(B,C()("isPending")),z=Object(R.a)(B,D()(H.a,C()("data"))),V=function(e){return Object(R.a)(B,C()(e))},G=(r(307),function(e){var t=e.clickHandler,r=e.name,c=void 0===r?"":r,n=e.imageData,i=void 0===n?null:n,o=e.submitHandler,l=e.title,u=Object(s.c)(W),f=Object(a.useRef)(null),b=Object(a.useState)(i),j=Object(v.a)(b,2),p=j[0],m=j[1],O=Object(a.useState)(c),g=Object(v.a)(O,2),h=g[0],P=g[1];return Object(d.jsxs)("div",{className:"ProfileForm__form-wrapper",children:[Object(d.jsxs)("h2",{className:"ProfileForm__title",children:[Object(d.jsx)("img",{alt:"back-icon",className:"ProfileForm__icon",onClick:t,src:I}),l]}),Object(d.jsxs)("form",{className:"ProfileForm",onSubmit:function(e){e.preventDefault(),p&&h&&o({backToProfileList:t,imageData:p,name:h})},children:[Object(d.jsxs)("div",{className:"ProfileForm__avatar ".concat(p?"ProfileForm__avatar--selected":""),children:[p?Object(d.jsx)("img",{alt:"avatar",className:"ProfileForm__image",src:p.src}):Object(d.jsx)("img",{alt:"empty",className:"ProfileForm__empty-picture",src:E}),Object(d.jsx)("img",{alt:"button-icon",className:"ProfileForm__button-picture",onClick:function(){return f.current.click()},src:w}),Object(d.jsx)("input",{className:"ProfileForm__input-file",onChange:function(e){return S(e,m)},ref:f,type:"file"})]}),Object(d.jsx)(k.a,{className:"ProfileForm__input-name",onChange:function(e){return P(e.target.value)},label:"Profile name:",value:h}),Object(d.jsxs)(N.a,{className:"ProfileForm__submit-button",color:"primary",disabled:u,size:"large",type:"submit",variant:"contained",children:["Create Profile",u&&Object(d.jsx)(y.a,{className:"ProfileForm__spinner",color:"primary",size:20})]})]})]})}),J=function(e){return{type:c.createProfileError,payload:e}},U=function(e){return{type:c.uploadImageFinished,payload:e}},Y=function(e){var t=Object.assign({},e),r=Object(s.b)();return Object(d.jsx)(G,Object(_.a)({submitHandler:function(e){return r((t=e,{type:c.createProfile,payload:t}));var t},title:"Create Profile:"},t))},K=r.p+"static/media/plus.c453ef1e.svg",Q=(r(309),function(e){var t=e.clickHandler,r=e.mode,c=void 0===r?"add":r,a=e.name,n=e.src;return Object(d.jsxs)("section",{className:"ProfilePicker ProfilePicker--".concat(c),onClick:t,children:[Object(d.jsx)("p",{className:"ProfilePicker__title ProfilePicker--".concat(c,"__title"),children:a||"Create:"}),Object(d.jsx)("div",{className:"ProfilePicker__button ProfilePicker--".concat(c,"__button"),children:Object(d.jsx)("img",{alt:a?"".concat(a,"-avatar"):"icon",className:"ProfilePicker__image ProfilePicker--".concat(c,"__image"),src:n||K})})]})});!function(e){e.createProfile="createProfile",e.listProfiles="listProfiles"}(T||(T={}));r(310);var X,q=function(e){var t=e.clickHandler,r=Object(s.b)(),a=Object(s.c)(V("data"));return Object(d.jsxs)("section",{className:"ProfilePickerList",children:[Object(d.jsx)("h1",{className:"ProfilePickerList__title",children:"Choose a brother-in-law:"}),Object(d.jsx)("p",{className:"ProfilePickerList__description",children:"Select a profile to start a conversation with your brother-in-law."}),Object(d.jsxs)("div",{className:"ProfilePickerList__pickers",children:[Object(d.jsx)(Q,{clickHandler:function(){return t(T.createProfile)}}),a.map((function(e){var t=e.name,a=e.profileId,n=e.src;return Object(d.jsx)(Q,{clickHandler:function(){return r((e=a,{type:c.setProfileId,payload:e}));var e},mode:"select",name:t,src:n},a)}))]})]})},Z=(r(311),function(){var e=Object(a.useState)(T.listProfiles),t=Object(v.a)(e,2),r=t[0],c=t[1];return Object(d.jsx)("section",{className:"ProfilePickerSection",children:r===T.listProfiles?Object(d.jsx)(q,{clickHandler:function(e){return c(e)}}):Object(d.jsx)(Y,{clickHandler:function(){return c(T.listProfiles)}})})}),$=r.p+"static/media/gentleman.ff3326dc.svg",ee=(r(312),function(e){e.appDataLoaded;return Object(d.jsxs)("div",{className:"PageLoader",children:[Object(d.jsx)("h2",{className:"PageLoader__title",children:"WELCOME GENTLEMAN"}),Object(d.jsx)("img",{alt:"gentleman-logo",src:$}),Object(d.jsx)("div",{className:"PageLoader__spinner",children:Array.from(Array(12)).map((function(e,t){return Object(d.jsx)("div",{className:"PageLoader__circle PageLoader__circle--".concat(t+1)},t)}))})]})}),te="auth";!function(e){e[e.login="".concat(te,"/login")]="login",e[e.loginSuccess="".concat(te,"/loginSuccess")]="loginSuccess",e[e.loginError="".concat(te,"/loginError")]="loginError"}(X||(X={}));var re,ce=C()(te),ae=Object(R.a)(ce,C()("error")),ne=Object(R.a)(ce,C()("isPending")),ie=Object(R.a)(ne,ae,(function(e,t){return!e&&!t})),oe=Object(R.a)(z,(function(e){return e})),se=(r(313),function(){var e=Object(s.c)(V("seletedProfileId")),t=Object(s.c)(oe);return t?e?Object(d.jsxs)("div",{className:"Page",children:[Object(d.jsx)(x,{}),Object(d.jsx)(O,{})]}):Object(d.jsx)(Z,{}):Object(d.jsx)(ee,{appDataLoaded:t})}),le=function(e){return{type:X.loginError,payload:e}},ue=function(){var e=Object(s.c)(ne),t=Object(s.b)(),r=Object(s.c)(ae),c=Object(a.useMemo)((function(){return Object(l.a)({palette:{type:"dark"}})}),[]);return Object(a.useEffect)((function(){var e,r=prompt("Please enter a password:");indexedDB.deleteDatabase("firebaseLocalStorageDb"),t((e=r,{type:X.login,payload:e}))}),[]),e?null:r?Object(d.jsx)(b,{}):Object(d.jsxs)(u.a,{theme:c,children:[Object(d.jsx)(se,{}),";"]})},fe=r(34),de={apiKey:"AIzaSyBYQ05TbRrP2wVEX7NDn5CWodoAnnkpcOY",authDomain:"comics-book.firebaseapp.com",projectId:"comics-book",storageBucket:"comics-book.appspot.com",messagingSenderId:"426496482303",appId:"1:426496482303:web:ebf257ff0a64a90f6ae5ca"};!function(e){e.profiles="profiles"}(re||(re={}));var be,je,pe=function(e){console.error(e)},me=function(e){for(var t=Object.keys(e),r=[],c=0;c<t.length;c++)r.push(e[t[c]]);return r},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.val();t(me(r||{}))},ve=function(e,t,r){e.database().ref(r).on("value",(function(e){return Oe(e,t)}),pe)},ge=function(){var e=Object(s.c)(ie),t=Object(s.b)();return Object(a.useEffect)((function(){fe.a.initializeApp(de)}),[]),Object(a.useEffect)((function(){var r=function(e){t(function(e){return{type:c.fetchProfilesSuccess,payload:e}}(e))};e&&setTimeout((function(){ve(fe.a,r,re.profiles)}),5e3)}),[e]),null},he=r(38),Pe=r(159),xe=r(75),_e=r(160),ke={error:"",isPending:!0,profileId:""},Ne=function(e,t){var r=t.payload;return Object(_.a)(Object(_.a)({},e),{},{isPending:!1,profileId:r})},ye=function(e,t){var r=t.payload;return Object(_.a)(Object(_.a)({},e),{},{error:r,isPending:!1})},Ie={data:null,error:"",isPending:!0,seletedProfileId:""},we=function(e){return Object(_.a)(Object(_.a)({},e),{},{isPending:!0})},Ee=function(e){return Object(_.a)(Object(_.a)({},e),{},{isPending:!1})},Se=function(e,t){var r=t.payload;return Object(_.a)(Object(_.a)({},e),{},{error:r,isPending:!1})},Fe=function(e,t){var r=t.payload;return Object(_.a)(Object(_.a)({},e),{},{isPending:!1,data:r})},Ce=function(e){return Object(_.a)(Object(_.a)({},e),{},{isPending:!1})},Le=function(e,t){var r=t.payload;return Object(_.a)(Object(_.a)({},e),{},{seletedProfileId:r})},He={auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X.loginSuccess:return Ne(e,t);case X.loginError:return ye(e,t);default:return e}},profiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.createProfile:return we(e);case c.createProfileSuccess:return Ee(e);case c.createProfileError:return Se(e,t);case c.fetchProfilesSuccess:return Fe(e,t);case c.fetchProfilesError:return Ce(e);case c.setProfileId:return Le(e,t);default:return e}}},Me=function(){return Object(he.combineReducers)(Object(_.a)({},He))},De=r(161),Re=r(24),Ae=r.n(Re),Te=r(21);!function(e){e.profileId="profileId"}(be||(be={})),function(e){e.profiles="PROFILES"}(je||(je={}));var Be=Ae.a.mark(We);function We(e){var t,r,c;return Ae.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=localStorage.getItem(be.profileId)||"",a.prev=2,a.next=5,fe.a.auth().signInWithEmailAndPassword("eryk.sandecki@gmail.com",t);case 5:return a.next=7,Object(Te.b)((n=r,{type:X.loginSuccess,payload:n}));case 7:a.next=14;break;case 9:return a.prev=9,a.t0=a.catch(2),c=a.t0.code,a.next=14,Object(Te.b)(le(c));case 14:case"end":return a.stop()}var n}),Be,null,[[2,9]])}var ze=Ae.a.mark(Ve);function Ve(){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.a)([Object(Te.e)(X.login,We)]);case 2:case"end":return e.stop()}}),ze)}var Ge=Ae.a.mark(Je);function Je(e){var t,r,c,a,n,i,o;return Ae.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.action,c=t.file,a=t.path,s.prev=2,n=fe.a.storage().ref(a).put(c),i=Object(xe.b)((function(e){return n.on("state_changed",e)})),o="",s.next=8,Object(Te.e)(i,(function(){}));case 8:return s.next=10,n;case 10:return s.next=12,n.snapshot.ref.getDownloadURL().then((function(e){return o=e}));case 12:return s.next=14,Object(Te.b)(r({result:"success",src:o}));case 14:s.next=20;break;case 16:return s.prev=16,s.t0=s.catch(2),s.next=20,Object(Te.b)(r({error:s.t0,result:"error"}));case 20:case"end":return s.stop()}}),Ge,null,[[2,16]])}var Ue;!function(e){e[e.uploadFile="".concat("common","/uploadFile")]="uploadFile"}(Ue||(Ue={}));var Ye=Ae.a.mark(Ke);function Ke(){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.a)([Object(Te.e)(Ue.uploadFile,Je)]);case 2:case"end":return e.stop()}}),Ye)}var Qe=r(163),Xe=function(e){var t=e.error,r=e.result,c=e.src;if("error"===r)throw t;return c},qe=function(e){var t=[],r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";do{t.splice(0,t.length);for(var c=0;c<9;c++)t.push(r.charAt(Math.floor(Math.random()*r.length)))}while(e.find((function(e){return e.profileId===t.join("")})));return t.join("")},Ze=function(e){for(var t=fe.a.database().ref(e[0]),r=1;r<e.length;r++)t=t.child(e[r]);return t},$e=function(e){return{type:Ue.uploadFile,payload:e}},et=Ae.a.mark(tt);function tt(e){var t,r,a,n,i,o,s,l,u,f;return Ae.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,r=t.backToProfileList,a=t.name,n=t.imageData.file,i="".concat(je.profiles,"/").concat(a),d.next=5,Object(Te.c)(V("data"));case 5:return o=d.sent,s=qe(o),d.prev=7,d.next=10,Object(Te.b)($e({action:U,path:i,file:n}));case 10:return d.next=12,Object(Te.d)(c.uploadImageFinished);case 12:return l=d.sent,u=l.payload,f=Xe(u),d.next=17,Ze([re.profiles]).set([].concat(Object(Qe.a)(o),[{name:a,online:!1,profileId:s,src:f}]));case 17:return d.next=19,Object(Te.b)({type:c.createProfileSuccess});case 19:return d.next=21,r();case 21:d.next=27;break;case 23:return d.prev=23,d.t0=d.catch(7),d.next=27,Object(Te.b)(J(d.t0));case 27:case"end":return d.stop()}}),et,null,[[7,23]])}var rt=Ae.a.mark(ct);function ct(){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.a)([Object(Te.e)(c.createProfile,tt)]);case 2:case"end":return e.stop()}}),rt)}var at=[Ve,Ke,ct],nt=function(e){var t,r=Object(De.a)(at);try{for(r.s();!(t=r.n()).done;){var c=t.value;e.run(c)}}catch(a){r.e(a)}finally{r.f()}},it=Object(xe.a)(),ot=function(){var e=Object(he.createStore)(Me(),{},Object(Pe.composeWithDevTools)(he.applyMiddleware.apply(void 0,[_e.a].concat([it]))));return nt(it),e};r(320);o.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsxs)(s.a,{store:ot(),children:[Object(d.jsx)(ge,{}),Object(d.jsx)(ue,{})]})}),document.getElementById("root"))}},[[321,1,2]]]);
//# sourceMappingURL=main.55ed7ddf.chunk.js.map